{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/Velocity-1/packages/web/lib/inftAbi.ts"],"sourcesContent":["export const HUMAN_AGENT_INFT_ABI = [\n  \"event Minted(uint256 indexed tokenId, address indexed owner, string encryptedURI, bytes32 metadataHash)\",\n  \"function mint(address to, string encryptedURI, bytes32 metadataHash) returns (uint256)\",\n  \"function ownerToTokenId(address owner) view returns (uint256)\",\n  \"function getEncryptedURI(uint256 tokenId) view returns (string)\",\n  \"function getMetadataHash(uint256 tokenId) view returns (bytes32)\",\n  \"function authorizeUsage(uint256 tokenId, address executor, bool allowed)\",\n  \"function isVerified(address wallet) view returns (bool)\"\n] as const;\n\nexport const FAUCET_ABI = [\n  \"function claim(address caller, address recipient)\",\n  \"function cooldownRemaining(address wallet) view returns (uint256)\"\n] as const;\n\n/** NothingLike0g ERC20 faucet - mints test tokens, no iNFT required */\nexport const TOKEN_FAUCET_ABI = [\n  \"function mintTestTokens(address to)\",\n  \"function lastMintAt(address) view returns (uint256)\",\n  \"function cooldown() view returns (uint256)\"\n] as const;\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,uBAAuB;IAClC;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,aAAa;IACxB;IACA;CACD;AAGM,MAAM,mBAAmB;IAC9B;IACA;IACA;CACD"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/Velocity-1/packages/web/app/api/claim/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { Contract, JsonRpcProvider, Wallet } from \"ethers\";\n\nimport { TOKEN_FAUCET_ABI } from \"@/lib/inftAbi\";\n\nfunction isAddress(value: string): boolean {\n  return /^0x[a-fA-F0-9]{40}$/.test(value);\n}\n\nexport async function POST(req: Request) {\n  const body = await req.json().catch(() => ({}));\n  const to = body?.wallet ?? body?.to;\n  const rpc = process.env.OG_RPC_URL ?? \"https://evmrpc-testnet.0g.ai\";\n  const pk = process.env.PRIVATE_KEY ?? \"\";\n  const tokenAddress = process.env.TOKEN_ADDRESS ?? \"\";\n\n  try {\n    if (!isAddress(to)) {\n      return NextResponse.json({ ok: false, error: \"Invalid wallet input.\" }, { status: 400 });\n    }\n    if (!pk.startsWith(\"0x\") || !isAddress(tokenAddress)) {\n      return NextResponse.json({ ok: false, error: \"Token env missing.\" }, { status: 500 });\n    }\n\n    const provider = new JsonRpcProvider(rpc);\n    const signer = new Wallet(pk, provider);\n    const token = new Contract(tokenAddress, TOKEN_FAUCET_ABI, signer);\n\n    const tx = await token.mintTestTokens(to);\n    const receipt = await tx.wait();\n\n    let cooldownRemainingSec: number | undefined;\n    try {\n      const [lastMintAt, cooldownSec] = await Promise.all([\n        token.lastMintAt(to),\n        token.cooldown()\n      ]);\n      const unlockAt = Number(lastMintAt) + Number(cooldownSec);\n      const now = Math.floor(Date.now() / 1000);\n      cooldownRemainingSec = Math.max(0, unlockAt - now);\n    } catch {\n      /* ignore */\n    }\n\n    return NextResponse.json({\n      ok: true,\n      txHash: receipt?.hash,\n      cooldownRemainingSec\n    });\n  } catch (error: unknown) {\n    const message = error instanceof Error ? error.message : String(error);\n    const isCooldown = /cooldown active/i.test(message);\n    let cooldownRemainingSec: number | undefined;\n    if (isCooldown && isAddress(to) && pk.startsWith(\"0x\") && isAddress(tokenAddress)) {\n      try {\n        const provider = new JsonRpcProvider(rpc);\n        const token = new Contract(tokenAddress, TOKEN_FAUCET_ABI, new Wallet(pk, provider));\n        const [lastMintAt, cooldownSec] = await Promise.all([\n          token.lastMintAt(to),\n          token.cooldown()\n        ]);\n        const unlockAt = Number(lastMintAt) + Number(cooldownSec);\n        const now = Math.floor(Date.now() / 1000);\n        cooldownRemainingSec = Math.max(0, unlockAt - now);\n      } catch {\n        /* ignore */\n      }\n    }\n    return NextResponse.json(\n      { ok: false, error: message, ...(cooldownRemainingSec != null && { cooldownRemainingSec }) },\n      { status: 400 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAEA;;;;AAEA,SAAS,UAAU,KAAa;IAC9B,OAAO,sBAAsB,IAAI,CAAC;AACpC;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAC7C,MAAM,KAAK,MAAM,UAAU,MAAM;IACjC,MAAM,MAAM,QAAQ,GAAG,CAAC,UAAU,IAAI;IACtC,MAAM,KAAK,QAAQ,GAAG,CAAC,WAAW,IAAI;IACtC,MAAM,eAAe,QAAQ,GAAG,CAAC,aAAa,IAAI;IAElD,IAAI;QACF,IAAI,CAAC,UAAU,KAAK;YAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QACxF;QACA,IAAI,CAAC,GAAG,UAAU,CAAC,SAAS,CAAC,UAAU,eAAe;YACpD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAAqB,GAAG;gBAAE,QAAQ;YAAI;QACrF;QAEA,MAAM,WAAW,IAAI,gNAAe,CAAC;QACrC,MAAM,SAAS,IAAI,uLAAM,CAAC,IAAI;QAC9B,MAAM,QAAQ,IAAI,6LAAQ,CAAC,cAAc,uJAAgB,EAAE;QAE3D,MAAM,KAAK,MAAM,MAAM,cAAc,CAAC;QACtC,MAAM,UAAU,MAAM,GAAG,IAAI;QAE7B,IAAI;QACJ,IAAI;YACF,MAAM,CAAC,YAAY,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAClD,MAAM,UAAU,CAAC;gBACjB,MAAM,QAAQ;aACf;YACD,MAAM,WAAW,OAAO,cAAc,OAAO;YAC7C,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;YACpC,uBAAuB,KAAK,GAAG,CAAC,GAAG,WAAW;QAChD,EAAE,OAAM;QACN,UAAU,GACZ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,IAAI;YACJ,QAAQ,SAAS;YACjB;QACF;IACF,EAAE,OAAO,OAAgB;QACvB,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAChE,MAAM,aAAa,mBAAmB,IAAI,CAAC;QAC3C,IAAI;QACJ,IAAI,cAAc,UAAU,OAAO,GAAG,UAAU,CAAC,SAAS,UAAU,eAAe;YACjF,IAAI;gBACF,MAAM,WAAW,IAAI,gNAAe,CAAC;gBACrC,MAAM,QAAQ,IAAI,6LAAQ,CAAC,cAAc,uJAAgB,EAAE,IAAI,uLAAM,CAAC,IAAI;gBAC1E,MAAM,CAAC,YAAY,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAClD,MAAM,UAAU,CAAC;oBACjB,MAAM,QAAQ;iBACf;gBACD,MAAM,WAAW,OAAO,cAAc,OAAO;gBAC7C,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;gBACpC,uBAAuB,KAAK,GAAG,CAAC,GAAG,WAAW;YAChD,EAAE,OAAM;YACN,UAAU,GACZ;QACF;QACA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,IAAI;YAAO,OAAO;YAAS,GAAI,wBAAwB,QAAQ;gBAAE;YAAqB,CAAC;QAAE,GAC3F;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}