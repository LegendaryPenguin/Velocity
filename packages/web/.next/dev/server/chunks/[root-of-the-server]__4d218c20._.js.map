{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/Velocity-1/packages/web/lib/inftAbi.ts"],"sourcesContent":["export const HUMAN_AGENT_INFT_ABI = [\n  \"event Minted(uint256 indexed tokenId, address indexed owner, string encryptedURI, bytes32 metadataHash)\",\n  \"function mint(address to, string encryptedURI, bytes32 metadataHash) returns (uint256)\",\n  \"function ownerToTokenId(address owner) view returns (uint256)\",\n  \"function getEncryptedURI(uint256 tokenId) view returns (string)\",\n  \"function getMetadataHash(uint256 tokenId) view returns (bytes32)\",\n  \"function authorizeUsage(uint256 tokenId, address executor, bool allowed)\",\n  \"function isVerified(address wallet) view returns (bool)\"\n] as const;\n\nexport const FAUCET_ABI = [\n  \"function claim(address caller, address recipient)\",\n  \"function cooldownRemaining(address wallet) view returns (uint256)\"\n] as const;\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,uBAAuB;IAClC;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,aAAa;IACxB;IACA;CACD"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nisch/Desktop/Velocity-1/packages/web/app/api/agent-status/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { Contract, JsonRpcProvider } from \"ethers\";\n\nimport { FAUCET_ABI, HUMAN_AGENT_INFT_ABI } from \"@/lib/inftAbi\";\n\nfunction isAddress(value: string): boolean {\n  return /^0x[a-fA-F0-9]{40}$/.test(value);\n}\n\nexport async function GET(req: Request) {\n  try {\n    const { searchParams } = new URL(req.url);\n    const wallet = searchParams.get(\"wallet\") ?? \"\";\n    if (!isAddress(wallet)) {\n      return NextResponse.json({ ok: false, error: \"Invalid wallet\" }, { status: 400 });\n    }\n\n    const rpcUrl = process.env.OG_RPC_URL ?? \"https://evmrpc-testnet.0g.ai\";\n    const inftAddress = process.env.NEXT_PUBLIC_INFT_ADDRESS ?? \"\";\n    if (!isAddress(inftAddress)) {\n      return NextResponse.json({ ok: false, error: \"INFT address missing\" }, { status: 500 });\n    }\n\n    const provider = new JsonRpcProvider(rpcUrl);\n    const inft = new Contract(inftAddress, HUMAN_AGENT_INFT_ABI, provider);\n    const tokenId = (await inft.ownerToTokenId(wallet)) as bigint;\n    if (tokenId === 0n) {\n      return NextResponse.json({ ok: false, error: \"No agent minted for wallet.\" }, { status: 404 });\n    }\n\n    const [encryptedURI, metadataHash, verified] = await Promise.all([\n      inft.getEncryptedURI(tokenId),\n      inft.getMetadataHash(tokenId),\n      inft.isVerified(wallet)\n    ]);\n\n    let cooldownRemainingSec = 0;\n    const faucetAddress = process.env.NEXT_PUBLIC_FAUCET_ADDRESS ?? \"\";\n    if (isAddress(faucetAddress)) {\n      const faucet = new Contract(faucetAddress, FAUCET_ABI, provider);\n      cooldownRemainingSec = Number(await faucet.cooldownRemaining(wallet));\n    }\n\n    return NextResponse.json({\n      ok: true,\n      tokenId: tokenId.toString(),\n      verified: Boolean(verified),\n      encryptedURI: String(encryptedURI),\n      metadataHash: String(metadataHash),\n      cooldownRemainingSec\n    });\n  } catch (error: unknown) {\n    const message = error instanceof Error ? error.message : String(error);\n    return NextResponse.json({ ok: false, error: message }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAEA;;;;AAEA,SAAS,UAAU,KAAa;IAC9B,OAAO,sBAAsB,IAAI,CAAC;AACpC;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAC7C,IAAI,CAAC,UAAU,SAAS;YACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU,IAAI;QACzC,MAAM,cAAc,kFAAwC;QAC5D,IAAI,CAAC,UAAU,cAAc;YAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QACvF;QAEA,MAAM,WAAW,IAAI,gNAAe,CAAC;QACrC,MAAM,OAAO,IAAI,6LAAQ,CAAC,aAAa,2JAAoB,EAAE;QAC7D,MAAM,UAAW,MAAM,KAAK,cAAc,CAAC;QAC3C,IAAI,YAAY,EAAE,EAAE;YAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QAC9F;QAEA,MAAM,CAAC,cAAc,cAAc,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;YAC/D,KAAK,eAAe,CAAC;YACrB,KAAK,eAAe,CAAC;YACrB,KAAK,UAAU,CAAC;SACjB;QAED,IAAI,uBAAuB;QAC3B,MAAM,gBAAgB,kFAA0C;QAChE,IAAI,UAAU,gBAAgB;YAC5B,MAAM,SAAS,IAAI,6LAAQ,CAAC,eAAe,iJAAU,EAAE;YACvD,uBAAuB,OAAO,MAAM,OAAO,iBAAiB,CAAC;QAC/D;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,IAAI;YACJ,SAAS,QAAQ,QAAQ;YACzB,UAAU,QAAQ;YAClB,cAAc,OAAO;YACrB,cAAc,OAAO;YACrB;QACF;IACF,EAAE,OAAO,OAAgB;QACvB,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAChE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO;QAAQ,GAAG;YAAE,QAAQ;QAAI;IACxE;AACF"}}]
}