module.exports=[4122,(t,e,a)=>{a.bigInt2BytesLE=function(t,e){let a=Array(e),i=BigInt(t);for(let t=0;t<e;t++)a[t]=Number(255n&i),i>>=8n;return a},a.bigInt2U32LE=function(t,e){let a=Array(e),i=BigInt(t);for(let t=0;t<e;t++)a[t]=Number(4294967295n&i),i>>=32n;return a},a.isOcamNum=function(t){return!!Array.isArray(t)&&3==t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&!!Array.isArray(t[2])}},82277,(t,e,a)=>{e.exports=function(t,e,a){let i,o,l,n,c,r,s,d,_,f,u,g,p,h,L,m,b,x,y=a||"int";if(t.modules[y])return y;t.modules[y]={};let F=2*e,w=8*e,B=t.addFunction(y+"_copy");B.addParam("px","i32"),B.addParam("pr","i32");let C=B.getCodeBuilder();for(let t=0;t<e;t++)B.addCode(C.i64_store(C.getLocal("pr"),8*t,C.i64_load(C.getLocal("px"),8*t)));let v=t.addFunction(y+"_zero");v.addParam("pr","i32");let A=v.getCodeBuilder();for(let t=0;t<e;t++)v.addCode(A.i64_store(A.getLocal("pr"),8*t,A.i64_const(0)));(i=t.addFunction(y+"_isZero")).addParam("px","i32"),i.setReturnType("i32"),o=i.getCodeBuilder(),i.addCode(function t(e){return 0==e?o.ret(o.i64_eqz(o.i64_load(o.getLocal("px")))):o.if(o.i64_eqz(o.i64_load(o.getLocal("px"),8*e)),t(e-1),o.ret(o.i32_const(0)))}(e-1)),i.addCode(o.ret(o.i32_const(0)));let I=t.addFunction(y+"_one");I.addParam("pr","i32");let E=I.getCodeBuilder();I.addCode(E.i64_store(E.getLocal("pr"),0,E.i64_const(1)));for(let t=1;t<e;t++)I.addCode(E.i64_store(E.getLocal("pr"),8*t,E.i64_const(0)));(l=t.addFunction(y+"_eq")).addParam("px","i32"),l.addParam("py","i32"),l.setReturnType("i32"),n=l.getCodeBuilder(),l.addCode(function t(e){return 0==e?n.ret(n.i64_eq(n.i64_load(n.getLocal("px")),n.i64_load(n.getLocal("py")))):n.if(n.i64_eq(n.i64_load(n.getLocal("px"),8*e),n.i64_load(n.getLocal("py"),8*e)),t(e-1),n.ret(n.i32_const(0)))}(e-1)),l.addCode(n.ret(n.i32_const(0))),(c=t.addFunction(y+"_gte")).addParam("px","i32"),c.addParam("py","i32"),c.setReturnType("i32"),r=c.getCodeBuilder(),c.addCode(function t(e){return 0==e?r.ret(r.i64_ge_u(r.i64_load(r.getLocal("px")),r.i64_load(r.getLocal("py")))):r.if(r.i64_lt_u(r.i64_load(r.getLocal("px"),8*e),r.i64_load(r.getLocal("py"),8*e)),r.ret(r.i32_const(0)),r.if(r.i64_gt_u(r.i64_load(r.getLocal("px"),8*e),r.i64_load(r.getLocal("py"),8*e)),r.ret(r.i32_const(1)),t(e-1)))}(e-1)),c.addCode(r.ret(r.i32_const(0)));let P=t.addFunction(y+"_add");P.addParam("x","i32"),P.addParam("y","i32"),P.addParam("r","i32"),P.setReturnType("i32"),P.addLocal("c","i64");let O=P.getCodeBuilder();P.addCode(O.setLocal("c",O.i64_add(O.i64_load32_u(O.getLocal("x")),O.i64_load32_u(O.getLocal("y"))))),P.addCode(O.i64_store32(O.getLocal("r"),O.getLocal("c")));for(let t=1;t<F;t++)P.addCode(O.setLocal("c",O.i64_add(O.i64_add(O.i64_load32_u(O.getLocal("x"),4*t),O.i64_load32_u(O.getLocal("y"),4*t)),O.i64_shr_u(O.getLocal("c"),O.i64_const(32))))),P.addCode(O.i64_store32(O.getLocal("r"),4*t,O.getLocal("c")));P.addCode(O.i32_wrap_i64(O.i64_shr_u(O.getLocal("c"),O.i64_const(32))));let S=t.addFunction(y+"_sub");S.addParam("x","i32"),S.addParam("y","i32"),S.addParam("r","i32"),S.setReturnType("i32"),S.addLocal("c","i64");let q=S.getCodeBuilder();S.addCode(q.setLocal("c",q.i64_sub(q.i64_load32_u(q.getLocal("x")),q.i64_load32_u(q.getLocal("y"))))),S.addCode(q.i64_store32(q.getLocal("r"),q.i64_and(q.getLocal("c"),q.i64_const("0xFFFFFFFF"))));for(let t=1;t<F;t++)S.addCode(q.setLocal("c",q.i64_add(q.i64_sub(q.i64_load32_u(q.getLocal("x"),4*t),q.i64_load32_u(q.getLocal("y"),4*t)),q.i64_shr_s(q.getLocal("c"),q.i64_const(32))))),S.addCode(q.i64_store32(q.getLocal("r"),4*t,q.i64_and(q.getLocal("c"),q.i64_const("0xFFFFFFFF"))));return S.addCode(q.i32_wrap_i64(q.i64_shr_s(q.getLocal("c"),q.i64_const(32)))),function(){let e=t.addFunction(y+"_mul");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64");for(let t=0;t<F;t++)e.addLocal("x"+t,"i64"),e.addLocal("y"+t,"i64");let a=e.getCodeBuilder(),i=[],o=[],l="c0",n="c1";for(let t=0;t<2*F-1;t++){for(let c=Math.max(0,t-F+1);c<=t&&c<F;c++){let r=t-c;e.addCode(a.setLocal(l,a.i64_add(a.i64_and(a.getLocal(l),a.i64_const(0xffffffff)),function(t,e){let l,n;return i[t]?l=a.getLocal("x"+t):(l=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),i[t]=!0),o[e]?n=a.getLocal("y"+e):(n=a.teeLocal("y"+e,a.i64_load32_u(a.getLocal("y"),4*e)),o[e]=!0),a.i64_mul(l,n)}(c,r)))),e.addCode(a.setLocal(n,a.i64_add(a.getLocal(n),a.i64_shr_u(a.getLocal(l),a.i64_const(32)))))}e.addCode(a.i64_store32(a.getLocal("r"),4*t,a.getLocal(l))),[l,n]=[n,l],e.addCode(a.setLocal(n,a.i64_shr_u(a.getLocal(l),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*F*2-4,a.getLocal(l)))}(),function(){let e=t.addFunction(y+"_square");e.addParam("x","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("c0_old","i64"),e.addLocal("c1_old","i64");for(let t=0;t<F;t++)e.addLocal("x"+t,"i64");let a=e.getCodeBuilder(),i=[];function o(t,e){let o,l;return i[t]?o=a.getLocal("x"+t):(o=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),i[t]=!0),i[e]?l=a.getLocal("x"+e):(l=a.teeLocal("x"+e,a.i64_load32_u(a.getLocal("x"),4*e)),i[e]=!0),a.i64_mul(o,l)}let l="c0_old",n="c1_old";for(let t=0;t<2*F-1;t++){e.addCode(a.setLocal("c0",a.i64_const(0)),a.setLocal("c1",a.i64_const(0)));for(let i=Math.max(0,t-F+1);i<t+1>>1&&i<F;i++){let l=t-i;e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),o(i,l)))),e.addCode(a.setLocal("c1",a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32)))))}e.addCode(a.setLocal("c0",a.i64_shl(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),a.i64_const(1)))),e.addCode(a.setLocal("c1",a.i64_add(a.i64_shl(a.getLocal("c1"),a.i64_const(1)),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32))))),t%2==0&&(e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),o(t>>1,t>>1)))),e.addCode(a.setLocal("c1",a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32)))))),t>0&&(e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),a.i64_and(a.getLocal(l),a.i64_const(0xffffffff))))),e.addCode(a.setLocal("c1",a.i64_add(a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32))),a.getLocal(n))))),e.addCode(a.i64_store32(a.getLocal("r"),4*t,a.getLocal("c0"))),e.addCode(a.setLocal(l,a.getLocal("c1")),a.setLocal(n,a.i64_shr_u(a.getLocal(l),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*F*2-4,a.getLocal(l)))}(),(s=t.addFunction(y+"_squareOld")).addParam("x","i32"),s.addParam("r","i32"),d=s.getCodeBuilder(),s.addCode(d.call(y+"_mul",d.getLocal("x"),d.getLocal("x"),d.getLocal("r"))),function(){let e,a,i=t.addFunction(y+"__mul1");i.addParam("px","i32"),i.addParam("y","i64"),i.addParam("pr","i32"),i.addLocal("c","i64");let o=i.getCodeBuilder();i.addCode(o.setLocal("c",o.i64_mul(o.i64_load32_u(o.getLocal("px"),0,0),o.getLocal("y")))),i.addCode(o.i64_store32(o.getLocal("pr"),0,0,o.getLocal("c")));for(let t=1;t<F;t++)i.addCode(o.setLocal("c",o.i64_add(o.i64_mul(o.i64_load32_u(o.getLocal("px"),4*t,0),o.getLocal("y")),o.i64_shr_u(o.getLocal("c"),o.i64_const(32))))),i.addCode(o.i64_store32(o.getLocal("pr"),4*t,0,o.getLocal("c")));(e=t.addFunction(y+"__add1")).addParam("x","i32"),e.addParam("y","i64"),e.addLocal("c","i64"),e.addLocal("px","i32"),a=e.getCodeBuilder(),e.addCode(a.setLocal("px",a.getLocal("x"))),e.addCode(a.setLocal("c",a.i64_add(a.i64_load32_u(a.getLocal("px"),0,0),a.getLocal("y")))),e.addCode(a.i64_store32(a.getLocal("px"),0,0,a.getLocal("c"))),e.addCode(a.setLocal("c",a.i64_shr_u(a.getLocal("c"),a.i64_const(32)))),e.addCode(a.block(a.loop(a.br_if(1,a.i64_eqz(a.getLocal("c"))),a.setLocal("px",a.i32_add(a.getLocal("px"),a.i32_const(4))),a.setLocal("c",a.i64_add(a.i64_load32_u(a.getLocal("px"),0,0),a.getLocal("c"))),a.i64_store32(a.getLocal("px"),0,0,a.getLocal("c")),a.setLocal("c",a.i64_shr_u(a.getLocal("c"),a.i64_const(32))),a.br(0))));let l=t.addFunction(y+"_div");l.addParam("x","i32"),l.addParam("y","i32"),l.addParam("c","i32"),l.addParam("r","i32"),l.addLocal("rr","i32"),l.addLocal("cc","i32"),l.addLocal("eX","i32"),l.addLocal("eY","i32"),l.addLocal("sy","i64"),l.addLocal("sx","i64"),l.addLocal("ec","i32");let n=l.getCodeBuilder(),c=n.i32_const(t.alloc(w)),r=n.i32_const(t.alloc(w)),s=n.i32_const(t.alloc(w)),d=n.getLocal("cc"),_=n.getLocal("rr"),f=t.alloc(2*w),u=n.i32_const(f),g=n.i32_const(f+w);l.addCode(n.if(n.getLocal("c"),n.setLocal("cc",n.getLocal("c")),n.setLocal("cc",r))),l.addCode(n.if(n.getLocal("r"),n.setLocal("rr",n.getLocal("r")),n.setLocal("rr",s))),l.addCode(n.call(y+"_copy",n.getLocal("x"),_)),l.addCode(n.call(y+"_copy",n.getLocal("y"),c)),l.addCode(n.call(y+"_zero",d)),l.addCode(n.call(y+"_zero",u)),l.addCode(n.setLocal("eX",n.i32_const(w-1))),l.addCode(n.setLocal("eY",n.i32_const(w-1))),l.addCode(n.block(n.loop(n.br_if(1,n.i32_or(n.i32_load8_u(n.i32_add(c,n.getLocal("eY")),0,0),n.i32_eq(n.getLocal("eY"),n.i32_const(3)))),n.setLocal("eY",n.i32_sub(n.getLocal("eY"),n.i32_const(1))),n.br(0)))),l.addCode(n.setLocal("sy",n.i64_add(n.i64_load32_u(n.i32_sub(n.i32_add(c,n.getLocal("eY")),n.i32_const(3)),0,0),n.i64_const(1)))),l.addCode(n.if(n.i64_eq(n.getLocal("sy"),n.i64_const(1)),n.drop(n.i64_div_u(n.i64_const(0),n.i64_const(0))))),l.addCode(n.block(n.loop(n.block(n.loop(n.br_if(1,n.i32_or(n.i32_load8_u(n.i32_add(_,n.getLocal("eX")),0,0),n.i32_eq(n.getLocal("eX"),n.i32_const(7)))),n.setLocal("eX",n.i32_sub(n.getLocal("eX"),n.i32_const(1))),n.br(0))),n.setLocal("sx",n.i64_load(n.i32_sub(n.i32_add(_,n.getLocal("eX")),n.i32_const(7)),0,0)),n.setLocal("sx",n.i64_div_u(n.getLocal("sx"),n.getLocal("sy"))),n.setLocal("ec",n.i32_sub(n.i32_sub(n.getLocal("eX"),n.getLocal("eY")),n.i32_const(4))),n.block(n.loop(n.br_if(1,n.i32_and(n.i64_eqz(n.i64_and(n.getLocal("sx"),n.i64_const("0xFFFFFFFF00000000"))),n.i32_ge_s(n.getLocal("ec"),n.i32_const(0)))),n.setLocal("sx",n.i64_shr_u(n.getLocal("sx"),n.i64_const(8))),n.setLocal("ec",n.i32_add(n.getLocal("ec"),n.i32_const(1))),n.br(0))),n.if(n.i64_eqz(n.getLocal("sx")),[...n.br_if(2,n.i32_eqz(n.call(y+"_gte",_,c))),...n.setLocal("sx",n.i64_const(1)),...n.setLocal("ec",n.i32_const(0))]),n.call(y+"__mul1",c,n.getLocal("sx"),g),n.drop(n.call(y+"_sub",_,n.i32_sub(g,n.getLocal("ec")),_)),n.call(y+"__add1",n.i32_add(d,n.getLocal("ec")),n.getLocal("sx")),n.br(0))))}(),(_=t.addFunction(y+"_inverseMod")).addParam("px","i32"),_.addParam("pm","i32"),_.addParam("pr","i32"),_.addLocal("t","i32"),_.addLocal("newt","i32"),_.addLocal("r","i32"),_.addLocal("qq","i32"),_.addLocal("qr","i32"),_.addLocal("newr","i32"),_.addLocal("swp","i32"),_.addLocal("x","i32"),_.addLocal("signt","i32"),_.addLocal("signnewt","i32"),_.addLocal("signx","i32"),u=(f=_.getCodeBuilder()).i32_const(t.alloc(w)),g=f.i32_const(t.alloc(w)),p=f.i32_const(t.alloc(w)),h=f.i32_const(t.alloc(w)),L=f.i32_const(t.alloc(w)),m=f.i32_const(t.alloc(w)),b=f.i32_const(t.alloc(2*w)),x=f.i32_const(t.alloc(w)),_.addCode(f.setLocal("t",u),f.call(y+"_zero",u),f.setLocal("signt",f.i32_const(0))),_.addCode(f.setLocal("r",g),f.call(y+"_copy",f.getLocal("pm"),g)),_.addCode(f.setLocal("newt",p),f.call(y+"_one",p),f.setLocal("signnewt",f.i32_const(0))),_.addCode(f.setLocal("newr",h),f.call(y+"_copy",f.getLocal("px"),h)),_.addCode(f.setLocal("qq",L)),_.addCode(f.setLocal("qr",m)),_.addCode(f.setLocal("x",x)),_.addCode(f.block(f.loop(f.br_if(1,f.call(y+"_isZero",f.getLocal("newr"))),f.call(y+"_div",f.getLocal("r"),f.getLocal("newr"),f.getLocal("qq"),f.getLocal("qr")),f.call(y+"_mul",f.getLocal("qq"),f.getLocal("newt"),b),f.if(f.getLocal("signt"),f.if(f.getLocal("signnewt"),f.if(f.call(y+"_gte",b,f.getLocal("t")),[...f.drop(f.call(y+"_sub",b,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(0))],[...f.drop(f.call(y+"_sub",f.getLocal("t"),b,f.getLocal("x"))),...f.setLocal("signx",f.i32_const(1))]),[...f.drop(f.call(y+"_add",b,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(1))]),f.if(f.getLocal("signnewt"),[...f.drop(f.call(y+"_add",b,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(0))],f.if(f.call(y+"_gte",f.getLocal("t"),b),[...f.drop(f.call(y+"_sub",f.getLocal("t"),b,f.getLocal("x"))),...f.setLocal("signx",f.i32_const(0))],[...f.drop(f.call(y+"_sub",b,f.getLocal("t"),f.getLocal("x"))),...f.setLocal("signx",f.i32_const(1))]))),f.setLocal("swp",f.getLocal("t")),f.setLocal("t",f.getLocal("newt")),f.setLocal("newt",f.getLocal("x")),f.setLocal("x",f.getLocal("swp")),f.setLocal("signt",f.getLocal("signnewt")),f.setLocal("signnewt",f.getLocal("signx")),f.setLocal("swp",f.getLocal("r")),f.setLocal("r",f.getLocal("newr")),f.setLocal("newr",f.getLocal("qr")),f.setLocal("qr",f.getLocal("swp")),f.br(0)))),_.addCode(f.if(f.getLocal("signt"),f.drop(f.call(y+"_sub",f.getLocal("pm"),f.getLocal("t"),f.getLocal("pr"))),f.call(y+"_copy",f.getLocal("t"),f.getLocal("pr")))),t.exportFunction(y+"_copy"),t.exportFunction(y+"_zero"),t.exportFunction(y+"_one"),t.exportFunction(y+"_isZero"),t.exportFunction(y+"_eq"),t.exportFunction(y+"_gte"),t.exportFunction(y+"_add"),t.exportFunction(y+"_sub"),t.exportFunction(y+"_mul"),t.exportFunction(y+"_square"),t.exportFunction(y+"_squareOld"),t.exportFunction(y+"_div"),t.exportFunction(y+"_inverseMod"),y}},16035,(t,e,a)=>{e.exports=function(t,e,a,i,o,l,n){let c=t.addFunction(e);c.addParam("base","i32"),c.addParam("scalar","i32"),c.addParam("scalarLength","i32"),c.addParam("r","i32"),c.addLocal("i","i32"),c.addLocal("b","i32");let r=c.getCodeBuilder(),s=r.i32_const(t.alloc(a));c.addCode(r.if(r.i32_eqz(r.getLocal("scalarLength")),[...r.call(n,r.getLocal("r")),...r.ret([])])),c.addCode(r.call(l,r.getLocal("base"),s)),c.addCode(r.call(n,r.getLocal("r"))),c.addCode(r.setLocal("i",r.getLocal("scalarLength"))),c.addCode(r.block(r.loop(r.setLocal("i",r.i32_sub(r.getLocal("i"),r.i32_const(1))),r.setLocal("b",r.i32_load8_u(r.i32_add(r.getLocal("scalar"),r.getLocal("i")))),...function(){let t=[];for(let e=0;e<8;e++)t.push(...r.call(o,r.getLocal("r"),r.getLocal("r")),...r.if(r.i32_ge_u(r.getLocal("b"),r.i32_const(128>>e)),[...r.setLocal("b",r.i32_sub(r.getLocal("b"),r.i32_const(128>>e))),...r.call(i,r.getLocal("r"),s,r.getLocal("r"))]));return t}(),r.br_if(1,r.i32_eqz(r.getLocal("i"))),r.br(0))))}},92564,(t,e,a)=>{e.exports=function(t,e){let a=8*t.modules[e].n64,i=t.addFunction(e+"_batchInverse");i.addParam("pIn","i32"),i.addParam("inStep","i32"),i.addParam("n","i32"),i.addParam("pOut","i32"),i.addParam("outStep","i32"),i.addLocal("itAux","i32"),i.addLocal("itIn","i32"),i.addLocal("itOut","i32"),i.addLocal("i","i32");let o=i.getCodeBuilder(),l=o.i32_const(t.alloc(a));i.addCode(o.setLocal("itAux",o.i32_load(o.i32_const(0))),o.i32_store(o.i32_const(0),o.i32_add(o.getLocal("itAux"),o.i32_mul(o.i32_add(o.getLocal("n"),o.i32_const(1)),o.i32_const(a))))),i.addCode(o.call(e+"_one",o.getLocal("itAux")),o.setLocal("itIn",o.getLocal("pIn")),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(a))),o.setLocal("i",o.i32_const(0)),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("i"),o.getLocal("n"))),o.if(o.call(e+"_isZero",o.getLocal("itIn")),o.call(e+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(a)),o.getLocal("itAux")),o.call(e+"_mul",o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(a)),o.getLocal("itAux"))),o.setLocal("itIn",o.i32_add(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_add(o.getLocal("itAux"),o.i32_const(a))),o.setLocal("i",o.i32_add(o.getLocal("i"),o.i32_const(1))),o.br(0))),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(a))),o.setLocal("itOut",o.i32_add(o.getLocal("pOut"),o.i32_mul(o.i32_sub(o.getLocal("n"),o.i32_const(1)),o.getLocal("outStep")))),o.call(e+"_inverse",o.getLocal("itAux"),o.getLocal("itAux")),o.block(o.loop(o.br_if(1,o.i32_eqz(o.getLocal("i"))),o.if(o.call(e+"_isZero",o.getLocal("itIn")),[...o.call(e+"_copy",o.getLocal("itAux"),o.i32_sub(o.getLocal("itAux"),o.i32_const(a))),...o.call(e+"_zero",o.getLocal("itOut"))],[...o.call(e+"_copy",o.i32_sub(o.getLocal("itAux"),o.i32_const(a)),l),...o.call(e+"_mul",o.getLocal("itAux"),o.getLocal("itIn"),o.i32_sub(o.getLocal("itAux"),o.i32_const(a))),...o.call(e+"_mul",o.getLocal("itAux"),l,o.getLocal("itOut"))]),o.setLocal("itIn",o.i32_sub(o.getLocal("itIn"),o.getLocal("inStep"))),o.setLocal("itOut",o.i32_sub(o.getLocal("itOut"),o.getLocal("outStep"))),o.setLocal("itAux",o.i32_sub(o.getLocal("itAux"),o.i32_const(a))),o.setLocal("i",o.i32_sub(o.getLocal("i"),o.i32_const(1))),o.br(0)))),i.addCode(o.i32_store(o.i32_const(0),o.getLocal("itAux")))}},40396,(t,e,a)=>{e.exports=function(t,e,a,i,o,l){void 0===l&&(l=i<o);let n=t.addFunction(e);n.addParam("pIn","i32"),n.addParam("n","i32"),n.addParam("pOut","i32"),n.addLocal("i","i32"),n.addLocal("itIn","i32"),n.addLocal("itOut","i32");let c=n.getCodeBuilder();l?n.addCode(c.setLocal("itIn",c.i32_add(c.getLocal("pIn"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(i)))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(o)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(a,c.getLocal("itIn"),c.getLocal("itOut")),c.setLocal("itIn",c.i32_sub(c.getLocal("itIn"),c.i32_const(i))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(o))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))):n.addCode(c.setLocal("itIn",c.getLocal("pIn")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(a,c.getLocal("itIn"),c.getLocal("itOut")),c.setLocal("itIn",c.i32_add(c.getLocal("itIn"),c.i32_const(i))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(o))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}},5228,(t,e,a)=>{e.exports=function(t,e,a,i,o,l){void 0===l&&(l=i<o);let n=t.addFunction(e);n.addParam("pIn1","i32"),n.addParam("pIn2","i32"),n.addParam("n","i32"),n.addParam("pOut","i32"),n.addLocal("i","i32"),n.addLocal("itIn1","i32"),n.addLocal("itIn2","i32"),n.addLocal("itOut","i32");let c=n.getCodeBuilder();l?n.addCode(c.setLocal("itIn1",c.i32_add(c.getLocal("pIn1"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(i)))),c.setLocal("itIn2",c.i32_add(c.getLocal("pIn2"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(i)))),c.setLocal("itOut",c.i32_add(c.getLocal("pOut"),c.i32_mul(c.i32_sub(c.getLocal("n"),c.i32_const(1)),c.i32_const(o)))),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(a,c.getLocal("itIn1"),c.getLocal("itIn2"),c.getLocal("itOut")),c.setLocal("itIn1",c.i32_sub(c.getLocal("itIn1"),c.i32_const(i))),c.setLocal("itIn2",c.i32_sub(c.getLocal("itIn2"),c.i32_const(i))),c.setLocal("itOut",c.i32_sub(c.getLocal("itOut"),c.i32_const(o))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0)))):n.addCode(c.setLocal("itIn1",c.getLocal("pIn1")),c.setLocal("itIn2",c.getLocal("pIn2")),c.setLocal("itOut",c.getLocal("pOut")),c.setLocal("i",c.i32_const(0)),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("i"),c.getLocal("n"))),c.call(a,c.getLocal("itIn1"),c.getLocal("itIn2"),c.getLocal("itOut")),c.setLocal("itIn1",c.i32_add(c.getLocal("itIn1"),c.i32_const(i))),c.setLocal("itIn2",c.i32_add(c.getLocal("itIn2"),c.i32_const(i))),c.setLocal("itOut",c.i32_add(c.getLocal("itOut"),c.i32_const(o))),c.setLocal("i",c.i32_add(c.getLocal("i"),c.i32_const(1))),c.br(0))))}},3926,(t,e,a)=>{function i(t,e){return t===e?0:t>e?1:-1}function o(t){return t%2n!==0n}function l(t){return t%2n===0n}function n(t){return t<0n?t.toString(2).length-1:t.toString(2).length}function c(t){return t<0n?-t:t}function r(t){return 1n===c(t)}function s(t,e){for(var a,o,l,n=0n,s=1n,d=e,_=c(t);0n!==_;)a=d/_,o=n,l=d,n=s,d=_,s=o-a*s,_=l-a*_;if(!r(d))throw Error(t.toString()+" and "+e.toString()+" are not co-prime");return(-1===i(n,0n)&&(n+=e),t<0n)?-n:n}function d(t,e,a){if(0n===a)throw Error("Cannot take modPow with modulus 0");var i,l=1n,n=t%a;for(e<0n&&(e=-(1n*e),n=s(n,a));e>0n;){if(0n===n)return 0n;o(e)&&(l=l*n%a),e/=2n,n=(i=n)*i%a}return l}function _(t,e){var a,i;return 0n!==e&&(!!r(e)||(0==(i=2n,(a=(a=e)>=0n?a:-a)===(i=i>=0n?i:-i)?0:a>i?1:-1)?l(t):t%e===0n))}function f(t,e){for(var a,i,o,n,c=t-1n,s=c,_=0;l(s);)s/=2n,_++;t:for(o=0;o<e.length;o++)if(!(t<e[o])&&!r(n=d(BigInt(e[o]),s,t))&&n!==c){for(i=_-1;0!=i&&!r(n=(a=n)*a%t);i--){;if(n===c)continue t}return!1}return!0}e.exports.bitLength=n,e.exports.isOdd=o,e.exports.isNegative=function(t){return t<0n},e.exports.abs=c,e.exports.isUnit=r,e.exports.compare=i,e.exports.modInv=s,e.exports.modPow=d,e.exports.isPrime=function(t){var e,a=!r(e=c(t))&&(2n===e||3n===e||5n===e||!(l(e)||_(e,3n)||_(e,5n))&&(e<49n||void 0));if(void 0!==a)return a;var i=c(t),o=n(i);if(o<=64)return f(i,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var s=Math.ceil(Math.log(2)*Number(o)),d=[],u=0;u<s;u++)d.push(BigInt(u+2));return f(i,d)},e.exports.square=function(t){return t*t}},68469,(t,e,a)=>{let i=t.r(82277),o=t.r(4122),l=t.r(16035),n=t.r(92564),c=t.r(40396),r=t.r(5228),{bitLength:s,modInv:d,modPow:_,isPrime:f,isOdd:u,square:g}=t.r(3926);e.exports=function(t,e,a,p){let h,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q=BigInt(e),H=Math.floor((s(Q-1n)-1)/64)+1,K=2*H,X=8*H,Y=a||"f1m";if(t.modules[Y])return Y;let tt=i(t,H,p),te=t.alloc(X,o.bigInt2BytesLE(Q,X)),ta=t.alloc(o.bigInt2BytesLE(g(1n<<BigInt(64*H))%Q,X)),ti=t.alloc(o.bigInt2BytesLE((1n<<BigInt(64*H))%Q,X)),to=t.alloc(o.bigInt2BytesLE(0n,X)),tl=Q-1n,tn=tl>>1n,tc=t.alloc(X,o.bigInt2BytesLE(tn,X)),tr=t.alloc(X,o.bigInt2BytesLE(tn+1n,X));t.modules[Y]={pq:te,pR2:ta,n64:H,q:Q,pOne:ti,pZero:to,pePlusOne:tr};let ts=2n;if(f(Q))for(;_(ts,tn,Q)!==tl;)ts+=1n;let td=0,t_=tl;for(;!u(t_)&&0n!==t_;)td++,t_>>=1n;let tf=t.alloc(X,o.bigInt2BytesLE(t_,X)),tu=_(ts,t_,Q),tg=t.alloc(o.bigInt2BytesLE((tu<<BigInt(64*H))%Q,X)),tp=t_+1n>>1n,th=t.alloc(X,o.bigInt2BytesLE(tp,X));if(t.exportFunction(tt+"_copy",Y+"_copy"),t.exportFunction(tt+"_zero",Y+"_zero"),t.exportFunction(tt+"_isZero",Y+"_isZero"),t.exportFunction(tt+"_eq",Y+"_eq"),(h=t.addFunction(Y+"_isOne")).addParam("x","i32"),h.setReturnType("i32"),L=h.getCodeBuilder(),h.addCode(L.ret(L.call(tt+"_eq",L.getLocal("x"),L.i32_const(ti)))),(m=t.addFunction(Y+"_add")).addParam("x","i32"),m.addParam("y","i32"),m.addParam("r","i32"),b=m.getCodeBuilder(),m.addCode(b.if(b.call(tt+"_add",b.getLocal("x"),b.getLocal("y"),b.getLocal("r")),b.drop(b.call(tt+"_sub",b.getLocal("r"),b.i32_const(te),b.getLocal("r"))),b.if(b.call(tt+"_gte",b.getLocal("r"),b.i32_const(te)),b.drop(b.call(tt+"_sub",b.getLocal("r"),b.i32_const(te),b.getLocal("r")))))),(x=t.addFunction(Y+"_sub")).addParam("x","i32"),x.addParam("y","i32"),x.addParam("r","i32"),y=x.getCodeBuilder(),x.addCode(y.if(y.call(tt+"_sub",y.getLocal("x"),y.getLocal("y"),y.getLocal("r")),y.drop(y.call(tt+"_add",y.getLocal("r"),y.i32_const(te),y.getLocal("r"))))),(F=t.addFunction(Y+"_neg")).addParam("x","i32"),F.addParam("r","i32"),w=F.getCodeBuilder(),F.addCode(w.call(Y+"_sub",w.i32_const(to),w.getLocal("x"),w.getLocal("r"))),function(){let e=t.alloc(K*K*8),a=t.addFunction(Y+"_mReduct");a.addParam("t","i32"),a.addParam("r","i32"),a.addLocal("np32","i64"),a.addLocal("c","i64"),a.addLocal("m","i64");let i=a.getCodeBuilder(),o=Number(4294967296n-d(Q,4294967296n));a.addCode(i.setLocal("np32",i.i64_const(o)));for(let t=0;t<K;t++){a.addCode(i.setLocal("c",i.i64_const(0))),a.addCode(i.setLocal("m",i.i64_and(i.i64_mul(i.i64_load32_u(i.getLocal("t"),4*t),i.getLocal("np32")),i.i64_const("0xFFFFFFFF"))));for(let e=0;e<K;e++)a.addCode(i.setLocal("c",i.i64_add(i.i64_add(i.i64_load32_u(i.getLocal("t"),(t+e)*4),i.i64_shr_u(i.getLocal("c"),i.i64_const(32))),i.i64_mul(i.i64_load32_u(i.i32_const(te),4*e),i.getLocal("m"))))),a.addCode(i.i64_store32(i.getLocal("t"),(t+e)*4,i.getLocal("c")));a.addCode(i.i64_store32(i.i32_const(e),4*t,i.i64_shr_u(i.getLocal("c"),i.i64_const(32))))}a.addCode(i.call(Y+"_add",i.i32_const(e),i.i32_add(i.getLocal("t"),i.i32_const(4*K)),i.getLocal("r")))}(),function(){let e=t.addFunction(Y+"_mul");e.addParam("x","i32"),e.addParam("y","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("np32","i64");for(let t=0;t<K;t++)e.addLocal("x"+t,"i64"),e.addLocal("y"+t,"i64"),e.addLocal("m"+t,"i64"),e.addLocal("q"+t,"i64");let a=e.getCodeBuilder(),i=Number(4294967296n-d(Q,4294967296n));e.addCode(a.setLocal("np32",a.i64_const(i)));let o=[],l=[],n=[];function c(t,e){let i,o;return n[t]?i=a.getLocal("q"+t):(i=a.teeLocal("q"+t,a.i64_load32_u(a.i32_const(0),te+4*t)),n[t]=!0),o=a.getLocal("m"+e),a.i64_mul(i,o)}let r="c0",s="c1";for(let t=0;t<2*K-1;t++){for(let i=Math.max(0,t-K+1);i<=t&&i<K;i++){let n=t-i;e.addCode(a.setLocal(r,a.i64_add(a.i64_and(a.getLocal(r),a.i64_const(0xffffffff)),function(t,e){let i,n;return o[t]?i=a.getLocal("x"+t):(i=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),o[t]=!0),l[e]?n=a.getLocal("y"+e):(n=a.teeLocal("y"+e,a.i64_load32_u(a.getLocal("y"),4*e)),l[e]=!0),a.i64_mul(i,n)}(i,n)))),e.addCode(a.setLocal(s,a.i64_add(a.getLocal(s),a.i64_shr_u(a.getLocal(r),a.i64_const(32)))))}for(let i=Math.max(1,t-K+1);i<=t&&i<K;i++){let o=t-i;e.addCode(a.setLocal(r,a.i64_add(a.i64_and(a.getLocal(r),a.i64_const(0xffffffff)),c(i,o)))),e.addCode(a.setLocal(s,a.i64_add(a.getLocal(s),a.i64_shr_u(a.getLocal(r),a.i64_const(32)))))}t<K&&(e.addCode(a.setLocal("m"+t,a.i64_and(a.i64_mul(a.i64_and(a.getLocal(r),a.i64_const(0xffffffff)),a.getLocal("np32")),a.i64_const("0xFFFFFFFF")))),e.addCode(a.setLocal(r,a.i64_add(a.i64_and(a.getLocal(r),a.i64_const(0xffffffff)),c(0,t)))),e.addCode(a.setLocal(s,a.i64_add(a.getLocal(s),a.i64_shr_u(a.getLocal(r),a.i64_const(32)))))),t>=K&&e.addCode(a.i64_store32(a.getLocal("r"),(t-K)*4,a.getLocal(r))),[r,s]=[s,r],e.addCode(a.setLocal(s,a.i64_shr_u(a.getLocal(r),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*K-4,a.getLocal(r))),e.addCode(a.if(a.i32_wrap_i64(a.getLocal(s)),a.drop(a.call(tt+"_sub",a.getLocal("r"),a.i32_const(te),a.getLocal("r"))),a.if(a.call(tt+"_gte",a.getLocal("r"),a.i32_const(te)),a.drop(a.call(tt+"_sub",a.getLocal("r"),a.i32_const(te),a.getLocal("r"))))))}(),function(){let e=t.addFunction(Y+"_square");e.addParam("x","i32"),e.addParam("r","i32"),e.addLocal("c0","i64"),e.addLocal("c1","i64"),e.addLocal("c0_old","i64"),e.addLocal("c1_old","i64"),e.addLocal("np32","i64");for(let t=0;t<K;t++)e.addLocal("x"+t,"i64"),e.addLocal("m"+t,"i64"),e.addLocal("q"+t,"i64");let a=e.getCodeBuilder(),i=Number(4294967296n-d(Q,4294967296n));e.addCode(a.setLocal("np32",a.i64_const(i)));let o=[],l=[];function n(t,e){let i,l;return o[t]?i=a.getLocal("x"+t):(i=a.teeLocal("x"+t,a.i64_load32_u(a.getLocal("x"),4*t)),o[t]=!0),o[e]?l=a.getLocal("x"+e):(l=a.teeLocal("x"+e,a.i64_load32_u(a.getLocal("x"),4*e)),o[e]=!0),a.i64_mul(i,l)}function c(t,e){let i,o;return l[t]?i=a.getLocal("q"+t):(i=a.teeLocal("q"+t,a.i64_load32_u(a.i32_const(0),te+4*t)),l[t]=!0),o=a.getLocal("m"+e),a.i64_mul(i,o)}let r="c0_old",s="c1_old";for(let t=0;t<2*K-1;t++){e.addCode(a.setLocal("c0",a.i64_const(0)),a.setLocal("c1",a.i64_const(0)));for(let i=Math.max(0,t-K+1);i<t+1>>1&&i<K;i++){let o=t-i;e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),n(i,o)))),e.addCode(a.setLocal("c1",a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32)))))}e.addCode(a.setLocal("c0",a.i64_shl(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),a.i64_const(1)))),e.addCode(a.setLocal("c1",a.i64_add(a.i64_shl(a.getLocal("c1"),a.i64_const(1)),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32))))),t%2==0&&(e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),n(t>>1,t>>1)))),e.addCode(a.setLocal("c1",a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32)))))),t>0&&(e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),a.i64_and(a.getLocal(r),a.i64_const(0xffffffff))))),e.addCode(a.setLocal("c1",a.i64_add(a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32))),a.getLocal(s)))));for(let i=Math.max(1,t-K+1);i<=t&&i<K;i++){let o=t-i;e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),c(i,o)))),e.addCode(a.setLocal("c1",a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32)))))}t<K&&(e.addCode(a.setLocal("m"+t,a.i64_and(a.i64_mul(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),a.getLocal("np32")),a.i64_const("0xFFFFFFFF")))),e.addCode(a.setLocal("c0",a.i64_add(a.i64_and(a.getLocal("c0"),a.i64_const(0xffffffff)),c(0,t)))),e.addCode(a.setLocal("c1",a.i64_add(a.getLocal("c1"),a.i64_shr_u(a.getLocal("c0"),a.i64_const(32)))))),t>=K&&e.addCode(a.i64_store32(a.getLocal("r"),(t-K)*4,a.getLocal("c0"))),e.addCode(a.setLocal(r,a.getLocal("c1")),a.setLocal(s,a.i64_shr_u(a.getLocal(r),a.i64_const(32))))}e.addCode(a.i64_store32(a.getLocal("r"),4*K-4,a.getLocal(r))),e.addCode(a.if(a.i32_wrap_i64(a.getLocal(s)),a.drop(a.call(tt+"_sub",a.getLocal("r"),a.i32_const(te),a.getLocal("r"))),a.if(a.call(tt+"_gte",a.getLocal("r"),a.i32_const(te)),a.drop(a.call(tt+"_sub",a.getLocal("r"),a.i32_const(te),a.getLocal("r"))))))}(),(B=t.addFunction(Y+"_squareOld")).addParam("x","i32"),B.addParam("r","i32"),C=B.getCodeBuilder(),B.addCode(C.call(Y+"_mul",C.getLocal("x"),C.getLocal("x"),C.getLocal("r"))),(v=t.addFunction(Y+"_toMontgomery")).addParam("x","i32"),v.addParam("r","i32"),A=v.getCodeBuilder(),v.addCode(A.call(Y+"_mul",A.getLocal("x"),A.i32_const(ta),A.getLocal("r"))),I=t.alloc(2*X),(E=t.addFunction(Y+"_fromMontgomery")).addParam("x","i32"),E.addParam("r","i32"),P=E.getCodeBuilder(),E.addCode(P.call(tt+"_copy",P.getLocal("x"),P.i32_const(I))),E.addCode(P.call(tt+"_zero",P.i32_const(I+X))),E.addCode(P.call(Y+"_mReduct",P.i32_const(I),P.getLocal("r"))),(O=t.addFunction(Y+"_isNegative")).addParam("x","i32"),O.setReturnType("i32"),q=(S=O.getCodeBuilder()).i32_const(t.alloc(X)),O.addCode(S.call(Y+"_fromMontgomery",S.getLocal("x"),q),S.call(tt+"_gte",q,S.i32_const(tr))),(z=t.addFunction(Y+"_sign")).addParam("x","i32"),z.setReturnType("i32"),T=(M=z.getCodeBuilder()).i32_const(t.alloc(X)),z.addCode(M.if(M.call(tt+"_isZero",M.getLocal("x")),M.ret(M.i32_const(0))),M.call(Y+"_fromMontgomery",M.getLocal("x"),T),M.if(M.call(tt+"_gte",T,M.i32_const(tr)),M.ret(M.i32_const(-1))),M.ret(M.i32_const(1))),(R=t.addFunction(Y+"_inverse")).addParam("x","i32"),R.addParam("r","i32"),U=R.getCodeBuilder(),R.addCode(U.call(Y+"_fromMontgomery",U.getLocal("x"),U.getLocal("r"))),R.addCode(U.call(tt+"_inverseMod",U.getLocal("r"),U.i32_const(te),U.getLocal("r"))),R.addCode(U.call(Y+"_toMontgomery",U.getLocal("r"),U.getLocal("r"))),(N=t.addFunction(Y+"_one")).addParam("pr","i32"),k=N.getCodeBuilder(),N.addCode(k.call(tt+"_copy",k.i32_const(ti),k.getLocal("pr"))),(j=t.addFunction(Y+"_load")).addParam("scalar","i32"),j.addParam("scalarLen","i32"),j.addParam("r","i32"),j.addLocal("p","i32"),j.addLocal("l","i32"),j.addLocal("i","i32"),j.addLocal("j","i32"),$=(G=j.getCodeBuilder()).i32_const(t.alloc(X)),D=t.alloc(X),W=G.i32_const(D),j.addCode(G.call(tt+"_zero",G.getLocal("r")),G.setLocal("i",G.i32_const(X)),G.setLocal("p",G.getLocal("scalar")),G.block(G.loop(G.br_if(1,G.i32_gt_u(G.getLocal("i"),G.getLocal("scalarLen"))),G.if(G.i32_eq(G.getLocal("i"),G.i32_const(X)),G.call(Y+"_one",$),G.call(Y+"_mul",$,G.i32_const(ta),$)),G.call(Y+"_mul",G.getLocal("p"),$,W),G.call(Y+"_add",G.getLocal("r"),W,G.getLocal("r")),G.setLocal("p",G.i32_add(G.getLocal("p"),G.i32_const(X))),G.setLocal("i",G.i32_add(G.getLocal("i"),G.i32_const(X))),G.br(0))),G.setLocal("l",G.i32_rem_u(G.getLocal("scalarLen"),G.i32_const(X))),G.if(G.i32_eqz(G.getLocal("l")),G.ret([])),G.call(tt+"_zero",W),G.setLocal("j",G.i32_const(0)),G.block(G.loop(G.br_if(1,G.i32_eq(G.getLocal("j"),G.getLocal("l"))),G.i32_store8(G.getLocal("j"),D,G.i32_load8_u(G.getLocal("p"))),G.setLocal("p",G.i32_add(G.getLocal("p"),G.i32_const(1))),G.setLocal("j",G.i32_add(G.getLocal("j"),G.i32_const(1))),G.br(0))),G.if(G.i32_eq(G.getLocal("i"),G.i32_const(X)),G.call(Y+"_one",$),G.call(Y+"_mul",$,G.i32_const(ta),$)),G.call(Y+"_mul",W,$,W),G.call(Y+"_add",G.getLocal("r"),W,G.getLocal("r"))),(Z=t.addFunction(Y+"_timesScalar")).addParam("x","i32"),Z.addParam("scalar","i32"),Z.addParam("scalarLen","i32"),Z.addParam("r","i32"),J=(V=Z.getCodeBuilder()).i32_const(t.alloc(X)),Z.addCode(V.call(Y+"_load",V.getLocal("scalar"),V.getLocal("scalarLen"),J),V.call(Y+"_toMontgomery",J,J),V.call(Y+"_mul",V.getLocal("x"),J,V.getLocal("r"))),n(t,Y),c(t,Y+"_batchToMontgomery",Y+"_toMontgomery",X,X),c(t,Y+"_batchFromMontgomery",Y+"_fromMontgomery",X,X),c(t,Y+"_batchNeg",Y+"_neg",X,X),r(t,Y+"_batchAdd",Y+"_add",X,X),r(t,Y+"_batchSub",Y+"_sub",X,X),r(t,Y+"_batchMul",Y+"_mul",X,X),t.exportFunction(Y+"_add"),t.exportFunction(Y+"_sub"),t.exportFunction(Y+"_neg"),t.exportFunction(Y+"_isNegative"),t.exportFunction(Y+"_isOne"),t.exportFunction(Y+"_sign"),t.exportFunction(Y+"_mReduct"),t.exportFunction(Y+"_mul"),t.exportFunction(Y+"_square"),t.exportFunction(Y+"_squareOld"),t.exportFunction(Y+"_fromMontgomery"),t.exportFunction(Y+"_toMontgomery"),t.exportFunction(Y+"_inverse"),t.exportFunction(Y+"_one"),t.exportFunction(Y+"_load"),t.exportFunction(Y+"_timesScalar"),l(t,Y+"_exp",X,Y+"_mul",Y+"_square",tt+"_copy",Y+"_one"),t.exportFunction(Y+"_exp"),t.exportFunction(Y+"_batchInverse"),f(Q)){let e,a,i,o,l,n,c,r,s,d,_,f;(e=t.addFunction(Y+"_sqrt")).addParam("n","i32"),e.addParam("r","i32"),e.addLocal("m","i32"),e.addLocal("i","i32"),e.addLocal("j","i32"),i=(a=e.getCodeBuilder()).i32_const(ti),o=a.i32_const(t.alloc(X)),l=a.i32_const(t.alloc(X)),n=a.i32_const(t.alloc(X)),c=a.i32_const(t.alloc(X)),r=a.i32_const(t.alloc(X)),e.addCode(a.if(a.call(Y+"_isZero",a.getLocal("n")),a.ret(a.call(Y+"_zero",a.getLocal("r")))),a.setLocal("m",a.i32_const(td)),a.call(Y+"_copy",a.i32_const(tg),o),a.call(Y+"_exp",a.getLocal("n"),a.i32_const(tf),a.i32_const(X),l),a.call(Y+"_exp",a.getLocal("n"),a.i32_const(th),a.i32_const(X),n),a.block(a.loop(a.br_if(1,a.call(Y+"_eq",l,i)),a.call(Y+"_square",l,c),a.setLocal("i",a.i32_const(1)),a.block(a.loop(a.br_if(1,a.call(Y+"_eq",c,i)),a.call(Y+"_square",c,c),a.setLocal("i",a.i32_add(a.getLocal("i"),a.i32_const(1))),a.br(0))),a.call(Y+"_copy",o,r),a.setLocal("j",a.i32_sub(a.i32_sub(a.getLocal("m"),a.getLocal("i")),a.i32_const(1))),a.block(a.loop(a.br_if(1,a.i32_eqz(a.getLocal("j"))),a.call(Y+"_square",r,r),a.setLocal("j",a.i32_sub(a.getLocal("j"),a.i32_const(1))),a.br(0))),a.setLocal("m",a.getLocal("i")),a.call(Y+"_square",r,o),a.call(Y+"_mul",l,o,l),a.call(Y+"_mul",n,r,n),a.br(0))),a.if(a.call(Y+"_isNegative",n),a.call(Y+"_neg",n,a.getLocal("r")),a.call(Y+"_copy",n,a.getLocal("r")))),(s=t.addFunction(Y+"_isSquare")).addParam("n","i32"),s.setReturnType("i32"),_=(d=s.getCodeBuilder()).i32_const(ti),f=d.i32_const(t.alloc(X)),s.addCode(d.if(d.call(Y+"_isZero",d.getLocal("n")),d.ret(d.i32_const(1))),d.call(Y+"_exp",d.getLocal("n"),d.i32_const(tc),d.i32_const(X),f),d.call(Y+"_eq",f,_)),t.exportFunction(Y+"_sqrt"),t.exportFunction(Y+"_isSquare")}return t.exportFunction(Y+"_batchToMontgomery"),t.exportFunction(Y+"_batchFromMontgomery"),Y}},13009,(t,e,a)=>{let i=t.r(68469),{bitLength:o}=t.r(3926);e.exports=function(t,e,a,l,n){let c,r,s,d,_,f,u,g,p,h=BigInt(e),L=Math.floor((o(h-1n)-1)/64)+1,m=a||"f1";if(t.modules[m])return m;t.modules[m]={n64:L};let b=n||"int",x=i(t,h,l,b),y=t.modules[x].pR2,F=t.modules[x].pq,w=t.modules[x].pePlusOne;return c=t.alloc(8*L),(r=t.addFunction(m+"_mul")).addParam("x","i32"),r.addParam("y","i32"),r.addParam("r","i32"),s=r.getCodeBuilder(),r.addCode(s.call(x+"_mul",s.getLocal("x"),s.getLocal("y"),s.i32_const(c))),r.addCode(s.call(x+"_mul",s.i32_const(c),s.i32_const(y),s.getLocal("r"))),(d=t.addFunction(m+"_square")).addParam("x","i32"),d.addParam("r","i32"),_=d.getCodeBuilder(),d.addCode(_.call(m+"_mul",_.getLocal("x"),_.getLocal("x"),_.getLocal("r"))),(f=t.addFunction(m+"_inverse")).addParam("x","i32"),f.addParam("r","i32"),u=f.getCodeBuilder(),f.addCode(u.call(b+"_inverseMod",u.getLocal("x"),u.i32_const(F),u.getLocal("r"))),(g=t.addFunction(m+"_isNegative")).addParam("x","i32"),g.setReturnType("i32"),p=g.getCodeBuilder(),g.addCode(p.call(b+"_gte",p.getLocal("x"),p.i32_const(w))),t.exportFunction(x+"_add",m+"_add"),t.exportFunction(x+"_sub",m+"_sub"),t.exportFunction(x+"_neg",m+"_neg"),t.exportFunction(m+"_mul"),t.exportFunction(m+"_square"),t.exportFunction(m+"_inverse"),t.exportFunction(m+"_isNegative"),t.exportFunction(x+"_copy",m+"_copy"),t.exportFunction(x+"_zero",m+"_zero"),t.exportFunction(x+"_one",m+"_one"),t.exportFunction(x+"_isZero",m+"_isZero"),t.exportFunction(x+"_eq",m+"_eq"),m}},69977,(t,e,a)=>{let i=t.r(16035),o=t.r(92564),l=t.r(4122);e.exports=function(t,e,a,n){let c,r,s,d,_,f,u,g,p,h,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q,H,K,X,Y,tt,te,ta,ti,to,tl,tn,tc,tr,ts,td,t_,tf,tu,tg,tp,th,tL,tm,tb,tx,ty,tF,tw,tB,tC,tv,tA,tI,tE,tP,tO,tS,tq,tz,tM,tT,tR,tU,tN,tk,tj,tG,t$,tD,tW,tZ,tV,tJ,tQ,tH,tK,tX,tY,t2,t3,t0,t1,t4,t6,t8,t7,t5,t9,et,ee,ea,ei,eo,el,en,ec,er,es,ed,e_,ef,eu,eg,ep,eh,eL,em,eb,ex,ey,eF,ew,eB,eC,ev,eA,eI,eE,eP,eO,eS;if(t.modules[a])return a;let eq=8*t.modules[n].n64,ez=t.modules[n].q;return t.modules[a]={n64:2*t.modules[n].n64},(c=t.addFunction(a+"_isZero")).addParam("x","i32"),c.setReturnType("i32"),s=(r=c.getCodeBuilder()).getLocal("x"),d=r.i32_add(r.getLocal("x"),r.i32_const(eq)),c.addCode(r.i32_and(r.call(n+"_isZero",s),r.call(n+"_isZero",d))),(_=t.addFunction(a+"_isOne")).addParam("x","i32"),_.setReturnType("i32"),u=(f=_.getCodeBuilder()).getLocal("x"),g=f.i32_add(f.getLocal("x"),f.i32_const(eq)),_.addCode(f.ret(f.i32_and(f.call(n+"_isOne",u),f.call(n+"_isZero",g)))),(p=t.addFunction(a+"_zero")).addParam("x","i32"),L=(h=p.getCodeBuilder()).getLocal("x"),m=h.i32_add(h.getLocal("x"),h.i32_const(eq)),p.addCode(h.call(n+"_zero",L),h.call(n+"_zero",m)),(b=t.addFunction(a+"_one")).addParam("x","i32"),y=(x=b.getCodeBuilder()).getLocal("x"),F=x.i32_add(x.getLocal("x"),x.i32_const(eq)),b.addCode(x.call(n+"_one",y),x.call(n+"_zero",F)),(w=t.addFunction(a+"_copy")).addParam("x","i32"),w.addParam("r","i32"),C=(B=w.getCodeBuilder()).getLocal("x"),v=B.i32_add(B.getLocal("x"),B.i32_const(eq)),A=B.getLocal("r"),I=B.i32_add(B.getLocal("r"),B.i32_const(eq)),w.addCode(B.call(n+"_copy",C,A),B.call(n+"_copy",v,I)),(E=t.addFunction(a+"_mul")).addParam("x","i32"),E.addParam("y","i32"),E.addParam("r","i32"),O=(P=E.getCodeBuilder()).getLocal("x"),S=P.i32_add(P.getLocal("x"),P.i32_const(eq)),q=P.getLocal("y"),z=P.i32_add(P.getLocal("y"),P.i32_const(eq)),M=P.getLocal("r"),T=P.i32_add(P.getLocal("r"),P.i32_const(eq)),R=P.i32_const(t.alloc(eq)),U=P.i32_const(t.alloc(eq)),N=P.i32_const(t.alloc(eq)),k=P.i32_const(t.alloc(eq)),E.addCode(P.call(n+"_mul",O,q,R),P.call(n+"_mul",S,z,U),P.call(n+"_add",O,S,N),P.call(n+"_add",q,z,k),P.call(n+"_mul",N,k,N),P.call(e,U,M),P.call(n+"_add",R,M,M),P.call(n+"_add",R,U,T),P.call(n+"_sub",N,T,T)),(j=t.addFunction(a+"_mul1")).addParam("x","i32"),j.addParam("y","i32"),j.addParam("r","i32"),$=(G=j.getCodeBuilder()).getLocal("x"),D=G.i32_add(G.getLocal("x"),G.i32_const(eq)),W=G.getLocal("y"),Z=G.getLocal("r"),V=G.i32_add(G.getLocal("r"),G.i32_const(eq)),j.addCode(G.call(n+"_mul",$,W,Z),G.call(n+"_mul",D,W,V)),(J=t.addFunction(a+"_square")).addParam("x","i32"),J.addParam("r","i32"),H=(Q=J.getCodeBuilder()).getLocal("x"),K=Q.i32_add(Q.getLocal("x"),Q.i32_const(eq)),X=Q.getLocal("r"),Y=Q.i32_add(Q.getLocal("r"),Q.i32_const(eq)),tt=Q.i32_const(t.alloc(eq)),te=Q.i32_const(t.alloc(eq)),ta=Q.i32_const(t.alloc(eq)),ti=Q.i32_const(t.alloc(eq)),J.addCode(Q.call(n+"_mul",H,K,tt),Q.call(n+"_add",H,K,te),Q.call(e,K,ta),Q.call(n+"_add",H,ta,ta),Q.call(e,tt,ti),Q.call(n+"_add",ti,tt,ti),Q.call(n+"_mul",te,ta,X),Q.call(n+"_sub",X,ti,X),Q.call(n+"_add",tt,tt,Y)),(to=t.addFunction(a+"_add")).addParam("x","i32"),to.addParam("y","i32"),to.addParam("r","i32"),tn=(tl=to.getCodeBuilder()).getLocal("x"),tc=tl.i32_add(tl.getLocal("x"),tl.i32_const(eq)),tr=tl.getLocal("y"),ts=tl.i32_add(tl.getLocal("y"),tl.i32_const(eq)),td=tl.getLocal("r"),t_=tl.i32_add(tl.getLocal("r"),tl.i32_const(eq)),to.addCode(tl.call(n+"_add",tn,tr,td),tl.call(n+"_add",tc,ts,t_)),(tf=t.addFunction(a+"_sub")).addParam("x","i32"),tf.addParam("y","i32"),tf.addParam("r","i32"),tg=(tu=tf.getCodeBuilder()).getLocal("x"),tp=tu.i32_add(tu.getLocal("x"),tu.i32_const(eq)),th=tu.getLocal("y"),tL=tu.i32_add(tu.getLocal("y"),tu.i32_const(eq)),tm=tu.getLocal("r"),tb=tu.i32_add(tu.getLocal("r"),tu.i32_const(eq)),tf.addCode(tu.call(n+"_sub",tg,th,tm),tu.call(n+"_sub",tp,tL,tb)),(tx=t.addFunction(a+"_neg")).addParam("x","i32"),tx.addParam("r","i32"),tF=(ty=tx.getCodeBuilder()).getLocal("x"),tw=ty.i32_add(ty.getLocal("x"),ty.i32_const(eq)),tB=ty.getLocal("r"),tC=ty.i32_add(ty.getLocal("r"),ty.i32_const(eq)),tx.addCode(ty.call(n+"_neg",tF,tB),ty.call(n+"_neg",tw,tC)),(tv=t.addFunction(a+"_conjugate")).addParam("x","i32"),tv.addParam("r","i32"),tI=(tA=tv.getCodeBuilder()).getLocal("x"),tE=tA.i32_add(tA.getLocal("x"),tA.i32_const(eq)),tP=tA.getLocal("r"),tO=tA.i32_add(tA.getLocal("r"),tA.i32_const(eq)),tv.addCode(tA.call(n+"_copy",tI,tP),tA.call(n+"_neg",tE,tO)),(tS=t.addFunction(a+"_toMontgomery")).addParam("x","i32"),tS.addParam("r","i32"),tz=(tq=tS.getCodeBuilder()).getLocal("x"),tM=tq.i32_add(tq.getLocal("x"),tq.i32_const(eq)),tT=tq.getLocal("r"),tR=tq.i32_add(tq.getLocal("r"),tq.i32_const(eq)),tS.addCode(tq.call(n+"_toMontgomery",tz,tT),tq.call(n+"_toMontgomery",tM,tR)),(tU=t.addFunction(a+"_fromMontgomery")).addParam("x","i32"),tU.addParam("r","i32"),tk=(tN=tU.getCodeBuilder()).getLocal("x"),tj=tN.i32_add(tN.getLocal("x"),tN.i32_const(eq)),tG=tN.getLocal("r"),t$=tN.i32_add(tN.getLocal("r"),tN.i32_const(eq)),tU.addCode(tN.call(n+"_fromMontgomery",tk,tG),tN.call(n+"_fromMontgomery",tj,t$)),(tD=t.addFunction(a+"_eq")).addParam("x","i32"),tD.addParam("y","i32"),tD.setReturnType("i32"),tZ=(tW=tD.getCodeBuilder()).getLocal("x"),tV=tW.i32_add(tW.getLocal("x"),tW.i32_const(eq)),tJ=tW.getLocal("y"),tQ=tW.i32_add(tW.getLocal("y"),tW.i32_const(eq)),tD.addCode(tW.i32_and(tW.call(n+"_eq",tZ,tJ),tW.call(n+"_eq",tV,tQ))),(tH=t.addFunction(a+"_inverse")).addParam("x","i32"),tH.addParam("r","i32"),tX=(tK=tH.getCodeBuilder()).getLocal("x"),tY=tK.i32_add(tK.getLocal("x"),tK.i32_const(eq)),t2=tK.getLocal("r"),t3=tK.i32_add(tK.getLocal("r"),tK.i32_const(eq)),t0=tK.i32_const(t.alloc(eq)),t1=tK.i32_const(t.alloc(eq)),t4=tK.i32_const(t.alloc(eq)),t6=tK.i32_const(t.alloc(eq)),tH.addCode(tK.call(n+"_square",tX,t0),tK.call(n+"_square",tY,t1),tK.call(e,t1,t4),tK.call(n+"_sub",t0,t4,t4),tK.call(n+"_inverse",t4,t6),tK.call(n+"_mul",tX,t6,t2),tK.call(n+"_mul",tY,t6,t3),tK.call(n+"_neg",t3,t3)),(t8=t.addFunction(a+"_timesScalar")).addParam("x","i32"),t8.addParam("scalar","i32"),t8.addParam("scalarLen","i32"),t8.addParam("r","i32"),t5=(t7=t8.getCodeBuilder()).getLocal("x"),t9=t7.i32_add(t7.getLocal("x"),t7.i32_const(eq)),et=t7.getLocal("r"),ee=t7.i32_add(t7.getLocal("r"),t7.i32_const(eq)),t8.addCode(t7.call(n+"_timesScalar",t5,t7.getLocal("scalar"),t7.getLocal("scalarLen"),et),t7.call(n+"_timesScalar",t9,t7.getLocal("scalar"),t7.getLocal("scalarLen"),ee)),(ea=t.addFunction(a+"_sign")).addParam("x","i32"),ea.addLocal("s","i32"),ea.setReturnType("i32"),eo=(ei=ea.getCodeBuilder()).getLocal("x"),el=ei.i32_add(ei.getLocal("x"),ei.i32_const(eq)),ea.addCode(ei.setLocal("s",ei.call(n+"_sign",el)),ei.if(ei.getLocal("s"),ei.ret(ei.getLocal("s"))),ei.ret(ei.call(n+"_sign",eo))),(en=t.addFunction(a+"_isNegative")).addParam("x","i32"),en.setReturnType("i32"),er=(ec=en.getCodeBuilder()).getLocal("x"),es=ec.i32_add(ec.getLocal("x"),ec.i32_const(eq)),en.addCode(ec.if(ec.call(n+"_isZero",es),ec.ret(ec.call(n+"_isNegative",er))),ec.ret(ec.call(n+"_isNegative",es))),t.exportFunction(a+"_isZero"),t.exportFunction(a+"_isOne"),t.exportFunction(a+"_zero"),t.exportFunction(a+"_one"),t.exportFunction(a+"_copy"),t.exportFunction(a+"_mul"),t.exportFunction(a+"_mul1"),t.exportFunction(a+"_square"),t.exportFunction(a+"_add"),t.exportFunction(a+"_sub"),t.exportFunction(a+"_neg"),t.exportFunction(a+"_sign"),t.exportFunction(a+"_conjugate"),t.exportFunction(a+"_fromMontgomery"),t.exportFunction(a+"_toMontgomery"),t.exportFunction(a+"_eq"),t.exportFunction(a+"_inverse"),o(t,a),i(t,a+"_exp",2*eq,a+"_mul",a+"_square",a+"_copy",a+"_one"),(ed=t.addFunction(a+"_sqrt")).addParam("a","i32"),ed.addParam("pr","i32"),ef=(e_=ed.getCodeBuilder()).i32_const(t.alloc(l.bigInt2BytesLE((BigInt(ez||0)-3n)/4n,eq))),eu=e_.i32_const(t.alloc(l.bigInt2BytesLE((BigInt(ez||0)-1n)/2n,eq))),eg=e_.getLocal("a"),ep=e_.i32_const(t.alloc(2*eq)),eh=e_.i32_const(t.alloc(2*eq)),eL=e_.i32_const(t.alloc(2*eq)),em=t.alloc(2*eq),eb=e_.i32_const(em),ex=e_.i32_const(em),ey=e_.i32_const(em+eq),eF=e_.i32_const(t.alloc(2*eq)),ew=e_.i32_const(t.alloc(2*eq)),ed.addCode(e_.call(a+"_one",eb),e_.call(a+"_neg",eb,eb),e_.call(a+"_exp",eg,ef,e_.i32_const(eq),ep),e_.call(a+"_square",ep,eh),e_.call(a+"_mul",eg,eh,eh),e_.call(a+"_conjugate",eh,eL),e_.call(a+"_mul",eL,eh,eL),e_.if(e_.call(a+"_eq",eL,eb),e_.unreachable()),e_.call(a+"_mul",ep,eg,eF),e_.if(e_.call(a+"_eq",eh,eb),[...e_.call(n+"_zero",ex),...e_.call(n+"_one",ey),...e_.call(a+"_mul",eb,eF,e_.getLocal("pr"))],[...e_.call(a+"_one",ew),...e_.call(a+"_add",ew,eh,ew),...e_.call(a+"_exp",ew,eu,e_.i32_const(eq),ew),...e_.call(a+"_mul",ew,eF,e_.getLocal("pr"))])),(eB=t.addFunction(a+"_isSquare")).addParam("a","i32"),eB.setReturnType("i32"),ev=(eC=eB.getCodeBuilder()).i32_const(t.alloc(l.bigInt2BytesLE((BigInt(ez||0)-3n)/4n,eq))),eA=eC.getLocal("a"),eI=eC.i32_const(t.alloc(2*eq)),eE=eC.i32_const(t.alloc(2*eq)),eP=eC.i32_const(t.alloc(2*eq)),eO=t.alloc(2*eq),eS=eC.i32_const(eO),eB.addCode(eC.call(a+"_one",eS),eC.call(a+"_neg",eS,eS),eC.call(a+"_exp",eA,ev,eC.i32_const(eq),eI),eC.call(a+"_square",eI,eE),eC.call(a+"_mul",eA,eE,eE),eC.call(a+"_conjugate",eE,eP),eC.call(a+"_mul",eP,eE,eP),eC.if(eC.call(a+"_eq",eP,eS),eC.ret(eC.i32_const(0))),eC.ret(eC.i32_const(1))),t.exportFunction(a+"_exp"),t.exportFunction(a+"_timesScalar"),t.exportFunction(a+"_batchInverse"),t.exportFunction(a+"_sqrt"),t.exportFunction(a+"_isSquare"),t.exportFunction(a+"_isNegative"),a}},60628,(t,e,a)=>{let i=t.r(16035),o=t.r(92564);e.exports=function(t,e,a,l){let n,c,r,s,d,_,f,u,g,p,h,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q,H,K,X,Y,tt,te,ta,ti,to,tl,tn,tc,tr,ts,td,t_,tf,tu,tg,tp,th,tL,tm,tb,tx,ty,tF,tw,tB,tC,tv,tA,tI,tE,tP,tO,tS,tq,tz,tM,tT,tR,tU,tN,tk,tj,tG,t$,tD,tW,tZ,tV,tJ,tQ,tH,tK,tX,tY,t2,t3,t0,t1,t4,t6,t8,t7,t5,t9,et,ee,ea,ei,eo,el,en,ec,er,es,ed,e_,ef,eu,eg,ep,eh,eL,em,eb,ex,ey,eF,ew,eB,eC,ev,eA,eI,eE,eP,eO,eS,eq,ez,eM,eT,eR,eU,eN,ek,ej,eG,e$,eD,eW;if(t.modules[a])return a;let eZ=8*t.modules[l].n64;return t.modules[a]={n64:3*t.modules[l].n64},(n=t.addFunction(a+"_isZero")).addParam("x","i32"),n.setReturnType("i32"),r=(c=n.getCodeBuilder()).getLocal("x"),s=c.i32_add(c.getLocal("x"),c.i32_const(eZ)),d=c.i32_add(c.getLocal("x"),c.i32_const(2*eZ)),n.addCode(c.i32_and(c.i32_and(c.call(l+"_isZero",r),c.call(l+"_isZero",s)),c.call(l+"_isZero",d))),(_=t.addFunction(a+"_isOne")).addParam("x","i32"),_.setReturnType("i32"),u=(f=_.getCodeBuilder()).getLocal("x"),g=f.i32_add(f.getLocal("x"),f.i32_const(eZ)),p=f.i32_add(f.getLocal("x"),f.i32_const(2*eZ)),_.addCode(f.ret(f.i32_and(f.i32_and(f.call(l+"_isOne",u),f.call(l+"_isZero",g)),f.call(l+"_isZero",p)))),(h=t.addFunction(a+"_zero")).addParam("x","i32"),m=(L=h.getCodeBuilder()).getLocal("x"),b=L.i32_add(L.getLocal("x"),L.i32_const(eZ)),x=L.i32_add(L.getLocal("x"),L.i32_const(2*eZ)),h.addCode(L.call(l+"_zero",m),L.call(l+"_zero",b),L.call(l+"_zero",x)),(y=t.addFunction(a+"_one")).addParam("x","i32"),w=(F=y.getCodeBuilder()).getLocal("x"),B=F.i32_add(F.getLocal("x"),F.i32_const(eZ)),C=F.i32_add(F.getLocal("x"),F.i32_const(2*eZ)),y.addCode(F.call(l+"_one",w),F.call(l+"_zero",B),F.call(l+"_zero",C)),(v=t.addFunction(a+"_copy")).addParam("x","i32"),v.addParam("r","i32"),I=(A=v.getCodeBuilder()).getLocal("x"),E=A.i32_add(A.getLocal("x"),A.i32_const(eZ)),P=A.i32_add(A.getLocal("x"),A.i32_const(2*eZ)),O=A.getLocal("r"),S=A.i32_add(A.getLocal("r"),A.i32_const(eZ)),q=A.i32_add(A.getLocal("r"),A.i32_const(2*eZ)),v.addCode(A.call(l+"_copy",I,O),A.call(l+"_copy",E,S),A.call(l+"_copy",P,q)),(z=t.addFunction(a+"_mul")).addParam("x","i32"),z.addParam("y","i32"),z.addParam("r","i32"),T=(M=z.getCodeBuilder()).getLocal("x"),R=M.i32_add(M.getLocal("x"),M.i32_const(eZ)),U=M.i32_add(M.getLocal("x"),M.i32_const(2*eZ)),N=M.getLocal("y"),k=M.i32_add(M.getLocal("y"),M.i32_const(eZ)),j=M.i32_add(M.getLocal("y"),M.i32_const(2*eZ)),G=M.getLocal("r"),$=M.i32_add(M.getLocal("r"),M.i32_const(eZ)),D=M.i32_add(M.getLocal("r"),M.i32_const(2*eZ)),W=M.i32_const(t.alloc(eZ)),Z=M.i32_const(t.alloc(eZ)),V=M.i32_const(t.alloc(eZ)),J=M.i32_const(t.alloc(eZ)),Q=M.i32_const(t.alloc(eZ)),H=M.i32_const(t.alloc(eZ)),K=M.i32_const(t.alloc(eZ)),X=M.i32_const(t.alloc(eZ)),Y=M.i32_const(t.alloc(eZ)),tt=M.i32_const(t.alloc(eZ)),te=M.i32_const(t.alloc(eZ)),ta=M.i32_const(t.alloc(eZ)),ti=M.i32_const(t.alloc(eZ)),z.addCode(M.call(l+"_mul",T,N,W),M.call(l+"_mul",R,k,Z),M.call(l+"_mul",U,j,V),M.call(l+"_add",T,R,J),M.call(l+"_add",N,k,Q),M.call(l+"_add",T,U,H),M.call(l+"_add",N,j,K),M.call(l+"_add",R,U,X),M.call(l+"_add",k,j,Y),M.call(l+"_add",W,Z,tt),M.call(l+"_add",W,V,te),M.call(l+"_add",Z,V,ta),M.call(l+"_mul",X,Y,G),M.call(l+"_sub",G,ta,G),M.call(e,G,G),M.call(l+"_add",W,G,G),M.call(l+"_mul",J,Q,$),M.call(l+"_sub",$,tt,$),M.call(e,V,ti),M.call(l+"_add",$,ti,$),M.call(l+"_mul",H,K,D),M.call(l+"_sub",D,te,D),M.call(l+"_add",D,Z,D)),(to=t.addFunction(a+"_square")).addParam("x","i32"),to.addParam("r","i32"),tn=(tl=to.getCodeBuilder()).getLocal("x"),tc=tl.i32_add(tl.getLocal("x"),tl.i32_const(eZ)),tr=tl.i32_add(tl.getLocal("x"),tl.i32_const(2*eZ)),ts=tl.getLocal("r"),td=tl.i32_add(tl.getLocal("r"),tl.i32_const(eZ)),t_=tl.i32_add(tl.getLocal("r"),tl.i32_const(2*eZ)),tf=tl.i32_const(t.alloc(eZ)),tu=tl.i32_const(t.alloc(eZ)),tg=tl.i32_const(t.alloc(eZ)),tp=tl.i32_const(t.alloc(eZ)),th=tl.i32_const(t.alloc(eZ)),tL=tl.i32_const(t.alloc(eZ)),tm=tl.i32_const(t.alloc(eZ)),to.addCode(tl.call(l+"_square",tn,tf),tl.call(l+"_mul",tn,tc,tu),tl.call(l+"_add",tu,tu,tg),tl.call(l+"_sub",tn,tc,tp),tl.call(l+"_add",tp,tr,tp),tl.call(l+"_square",tp,tp),tl.call(l+"_mul",tc,tr,th),tl.call(l+"_add",th,th,tL),tl.call(l+"_square",tr,tm),tl.call(e,tL,ts),tl.call(l+"_add",tf,ts,ts),tl.call(e,tm,td),tl.call(l+"_add",tg,td,td),tl.call(l+"_add",tf,tm,t_),tl.call(l+"_sub",tL,t_,t_),tl.call(l+"_add",tp,t_,t_),tl.call(l+"_add",tg,t_,t_)),(tb=t.addFunction(a+"_add")).addParam("x","i32"),tb.addParam("y","i32"),tb.addParam("r","i32"),ty=(tx=tb.getCodeBuilder()).getLocal("x"),tF=tx.i32_add(tx.getLocal("x"),tx.i32_const(eZ)),tw=tx.i32_add(tx.getLocal("x"),tx.i32_const(2*eZ)),tB=tx.getLocal("y"),tC=tx.i32_add(tx.getLocal("y"),tx.i32_const(eZ)),tv=tx.i32_add(tx.getLocal("y"),tx.i32_const(2*eZ)),tA=tx.getLocal("r"),tI=tx.i32_add(tx.getLocal("r"),tx.i32_const(eZ)),tE=tx.i32_add(tx.getLocal("r"),tx.i32_const(2*eZ)),tb.addCode(tx.call(l+"_add",ty,tB,tA),tx.call(l+"_add",tF,tC,tI),tx.call(l+"_add",tw,tv,tE)),(tP=t.addFunction(a+"_sub")).addParam("x","i32"),tP.addParam("y","i32"),tP.addParam("r","i32"),tS=(tO=tP.getCodeBuilder()).getLocal("x"),tq=tO.i32_add(tO.getLocal("x"),tO.i32_const(eZ)),tz=tO.i32_add(tO.getLocal("x"),tO.i32_const(2*eZ)),tM=tO.getLocal("y"),tT=tO.i32_add(tO.getLocal("y"),tO.i32_const(eZ)),tR=tO.i32_add(tO.getLocal("y"),tO.i32_const(2*eZ)),tU=tO.getLocal("r"),tN=tO.i32_add(tO.getLocal("r"),tO.i32_const(eZ)),tk=tO.i32_add(tO.getLocal("r"),tO.i32_const(2*eZ)),tP.addCode(tO.call(l+"_sub",tS,tM,tU),tO.call(l+"_sub",tq,tT,tN),tO.call(l+"_sub",tz,tR,tk)),(tj=t.addFunction(a+"_neg")).addParam("x","i32"),tj.addParam("r","i32"),t$=(tG=tj.getCodeBuilder()).getLocal("x"),tD=tG.i32_add(tG.getLocal("x"),tG.i32_const(eZ)),tW=tG.i32_add(tG.getLocal("x"),tG.i32_const(2*eZ)),tZ=tG.getLocal("r"),tV=tG.i32_add(tG.getLocal("r"),tG.i32_const(eZ)),tJ=tG.i32_add(tG.getLocal("r"),tG.i32_const(2*eZ)),tj.addCode(tG.call(l+"_neg",t$,tZ),tG.call(l+"_neg",tD,tV),tG.call(l+"_neg",tW,tJ)),(tQ=t.addFunction(a+"_sign")).addParam("x","i32"),tQ.addLocal("s","i32"),tQ.setReturnType("i32"),tK=(tH=tQ.getCodeBuilder()).getLocal("x"),tX=tH.i32_add(tH.getLocal("x"),tH.i32_const(eZ)),tY=tH.i32_add(tH.getLocal("x"),tH.i32_const(2*eZ)),tQ.addCode(tH.setLocal("s",tH.call(l+"_sign",tY)),tH.if(tH.getLocal("s"),tH.ret(tH.getLocal("s"))),tH.setLocal("s",tH.call(l+"_sign",tX)),tH.if(tH.getLocal("s"),tH.ret(tH.getLocal("s"))),tH.ret(tH.call(l+"_sign",tK))),(t2=t.addFunction(a+"_toMontgomery")).addParam("x","i32"),t2.addParam("r","i32"),t0=(t3=t2.getCodeBuilder()).getLocal("x"),t1=t3.i32_add(t3.getLocal("x"),t3.i32_const(eZ)),t4=t3.i32_add(t3.getLocal("x"),t3.i32_const(2*eZ)),t6=t3.getLocal("r"),t8=t3.i32_add(t3.getLocal("r"),t3.i32_const(eZ)),t7=t3.i32_add(t3.getLocal("r"),t3.i32_const(2*eZ)),t2.addCode(t3.call(l+"_toMontgomery",t0,t6),t3.call(l+"_toMontgomery",t1,t8),t3.call(l+"_toMontgomery",t4,t7)),(t5=t.addFunction(a+"_fromMontgomery")).addParam("x","i32"),t5.addParam("r","i32"),et=(t9=t5.getCodeBuilder()).getLocal("x"),ee=t9.i32_add(t9.getLocal("x"),t9.i32_const(eZ)),ea=t9.i32_add(t9.getLocal("x"),t9.i32_const(2*eZ)),ei=t9.getLocal("r"),eo=t9.i32_add(t9.getLocal("r"),t9.i32_const(eZ)),el=t9.i32_add(t9.getLocal("r"),t9.i32_const(2*eZ)),t5.addCode(t9.call(l+"_fromMontgomery",et,ei),t9.call(l+"_fromMontgomery",ee,eo),t9.call(l+"_fromMontgomery",ea,el)),(en=t.addFunction(a+"_eq")).addParam("x","i32"),en.addParam("y","i32"),en.setReturnType("i32"),er=(ec=en.getCodeBuilder()).getLocal("x"),es=ec.i32_add(ec.getLocal("x"),ec.i32_const(eZ)),ed=ec.i32_add(ec.getLocal("x"),ec.i32_const(2*eZ)),e_=ec.getLocal("y"),ef=ec.i32_add(ec.getLocal("y"),ec.i32_const(eZ)),eu=ec.i32_add(ec.getLocal("y"),ec.i32_const(2*eZ)),en.addCode(ec.i32_and(ec.i32_and(ec.call(l+"_eq",er,e_),ec.call(l+"_eq",es,ef)),ec.call(l+"_eq",ed,eu))),(eg=t.addFunction(a+"_inverse")).addParam("x","i32"),eg.addParam("r","i32"),eh=(ep=eg.getCodeBuilder()).getLocal("x"),eL=ep.i32_add(ep.getLocal("x"),ep.i32_const(eZ)),em=ep.i32_add(ep.getLocal("x"),ep.i32_const(2*eZ)),eb=ep.getLocal("r"),ex=ep.i32_add(ep.getLocal("r"),ep.i32_const(eZ)),ey=ep.i32_add(ep.getLocal("r"),ep.i32_const(2*eZ)),eF=ep.i32_const(t.alloc(eZ)),ew=ep.i32_const(t.alloc(eZ)),eB=ep.i32_const(t.alloc(eZ)),eC=ep.i32_const(t.alloc(eZ)),ev=ep.i32_const(t.alloc(eZ)),eA=ep.i32_const(t.alloc(eZ)),eI=ep.i32_const(t.alloc(eZ)),eE=ep.i32_const(t.alloc(eZ)),eP=ep.i32_const(t.alloc(eZ)),eO=ep.i32_const(t.alloc(eZ)),eS=ep.i32_const(t.alloc(eZ)),eg.addCode(ep.call(l+"_square",eh,eF),ep.call(l+"_square",eL,ew),ep.call(l+"_square",em,eB),ep.call(l+"_mul",eh,eL,eC),ep.call(l+"_mul",eh,em,ev),ep.call(l+"_mul",eL,em,eA),ep.call(e,eA,eI),ep.call(l+"_sub",eF,eI,eI),ep.call(e,eB,eE),ep.call(l+"_sub",eE,eC,eE),ep.call(l+"_sub",ew,ev,eP),ep.call(l+"_mul",em,eE,eO),ep.call(l+"_mul",eL,eP,eS),ep.call(l+"_add",eO,eS,eO),ep.call(e,eO,eO),ep.call(l+"_mul",eh,eI,eS),ep.call(l+"_add",eS,eO,eO),ep.call(l+"_inverse",eO,eO),ep.call(l+"_mul",eO,eI,eb),ep.call(l+"_mul",eO,eE,ex),ep.call(l+"_mul",eO,eP,ey)),(eq=t.addFunction(a+"_timesScalar")).addParam("x","i32"),eq.addParam("scalar","i32"),eq.addParam("scalarLen","i32"),eq.addParam("r","i32"),eM=(ez=eq.getCodeBuilder()).getLocal("x"),eT=ez.i32_add(ez.getLocal("x"),ez.i32_const(eZ)),eR=ez.i32_add(ez.getLocal("x"),ez.i32_const(2*eZ)),eU=ez.getLocal("r"),eN=ez.i32_add(ez.getLocal("r"),ez.i32_const(eZ)),ek=ez.i32_add(ez.getLocal("r"),ez.i32_const(2*eZ)),eq.addCode(ez.call(l+"_timesScalar",eM,ez.getLocal("scalar"),ez.getLocal("scalarLen"),eU),ez.call(l+"_timesScalar",eT,ez.getLocal("scalar"),ez.getLocal("scalarLen"),eN),ez.call(l+"_timesScalar",eR,ez.getLocal("scalar"),ez.getLocal("scalarLen"),ek)),(ej=t.addFunction(a+"_isNegative")).addParam("x","i32"),ej.setReturnType("i32"),e$=(eG=ej.getCodeBuilder()).getLocal("x"),eD=eG.i32_add(eG.getLocal("x"),eG.i32_const(eZ)),eW=eG.i32_add(eG.getLocal("x"),eG.i32_const(2*eZ)),ej.addCode(eG.if(eG.call(l+"_isZero",eW),eG.if(eG.call(l+"_isZero",eD),eG.ret(eG.call(l+"_isNegative",e$)),eG.ret(eG.call(l+"_isNegative",eD)))),eG.ret(eG.call(l+"_isNegative",eW))),t.exportFunction(a+"_isZero"),t.exportFunction(a+"_isOne"),t.exportFunction(a+"_zero"),t.exportFunction(a+"_one"),t.exportFunction(a+"_copy"),t.exportFunction(a+"_mul"),t.exportFunction(a+"_square"),t.exportFunction(a+"_add"),t.exportFunction(a+"_sub"),t.exportFunction(a+"_neg"),t.exportFunction(a+"_sign"),t.exportFunction(a+"_fromMontgomery"),t.exportFunction(a+"_toMontgomery"),t.exportFunction(a+"_eq"),t.exportFunction(a+"_inverse"),o(t,a),i(t,a+"_exp",3*eZ,a+"_mul",a+"_square",a+"_copy",a+"_one"),t.exportFunction(a+"_exp"),t.exportFunction(a+"_timesScalar"),t.exportFunction(a+"_batchInverse"),t.exportFunction(a+"_isNegative"),a}},76886,(t,e,a)=>{e.exports=function(t,e,a,i,o,l,n,c){let r=t.addFunction(e);r.addParam("base","i32"),r.addParam("scalar","i32"),r.addParam("scalarLength","i32"),r.addParam("r","i32"),r.addLocal("old0","i32"),r.addLocal("nbits","i32"),r.addLocal("i","i32"),r.addLocal("last","i32"),r.addLocal("cur","i32"),r.addLocal("carry","i32"),r.addLocal("p","i32");let s=r.getCodeBuilder(),d=s.i32_const(t.alloc(a));function _(t){return s.i32_and(s.i32_shr_u(s.i32_load(s.i32_add(s.getLocal("scalar"),s.i32_and(s.i32_shr_u(t,s.i32_const(3)),s.i32_const(0xfffffffc)))),s.i32_and(t,s.i32_const(31))),s.i32_const(1))}function f(t){return[...s.i32_store8(s.getLocal("p"),s.i32_const(t)),...s.setLocal("p",s.i32_add(s.getLocal("p"),s.i32_const(1)))]}r.addCode(s.if(s.i32_eqz(s.getLocal("scalarLength")),[...s.call(c,s.getLocal("r")),...s.ret([])]),s.setLocal("nbits",s.i32_shl(s.getLocal("scalarLength"),s.i32_const(3))),s.setLocal("old0",s.i32_load(s.i32_const(0))),s.setLocal("p",s.getLocal("old0")),s.i32_store(s.i32_const(0),s.i32_and(s.i32_add(s.i32_add(s.getLocal("old0"),s.i32_const(32)),s.getLocal("nbits")),s.i32_const(0xfffffff8))),s.setLocal("i",s.i32_const(1)),s.setLocal("last",_(s.i32_const(0))),s.setLocal("carry",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("nbits"))),s.setLocal("cur",_(s.getLocal("i"))),s.if(s.getLocal("last"),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...f(1)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...f(255)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...f(255)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...f(1)])),s.if(s.getLocal("cur"),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(1)),...f(0)],[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...f(0)]),s.if(s.getLocal("carry"),[...s.setLocal("last",s.i32_const(1)),...s.setLocal("carry",s.i32_const(0)),...f(0)],[...s.setLocal("last",s.i32_const(0)),...s.setLocal("carry",s.i32_const(0)),...f(0)]))),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0))),s.if(s.getLocal("last"),s.if(s.getLocal("carry"),[...f(255),...f(0),...f(1)],[...f(1)]),s.if(s.getLocal("carry"),[...f(0),...f(1)])),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.call(n,s.getLocal("base"),d),s.call(c,s.getLocal("r")),s.block(s.loop(s.call(o,s.getLocal("r"),s.getLocal("r")),s.setLocal("cur",s.i32_load8_u(s.getLocal("p"))),s.if(s.getLocal("cur"),s.if(s.i32_eq(s.getLocal("cur"),s.i32_const(1)),s.call(i,s.getLocal("r"),d,s.getLocal("r")),s.call(l,s.getLocal("r"),d,s.getLocal("r")))),s.br_if(1,s.i32_eq(s.getLocal("old0"),s.getLocal("p"))),s.setLocal("p",s.i32_sub(s.getLocal("p"),s.i32_const(1))),s.br(0))),s.i32_store(s.i32_const(0),s.getLocal("old0")))}},97172,(t,e,a)=>{e.exports=function(t,e,a,i,o){let l,n,c,r,s,d,_,f,u,g,p=8*t.modules[e].n64;(l=t.addFunction(a+"_getChunk")).addParam("pScalar","i32"),l.addParam("scalarSize","i32"),l.addParam("startBit","i32"),l.addParam("chunkSize","i32"),l.addLocal("bitsToEnd","i32"),l.addLocal("mask","i32"),l.setReturnType("i32"),n=l.getCodeBuilder(),l.addCode(n.setLocal("bitsToEnd",n.i32_sub(n.i32_mul(n.getLocal("scalarSize"),n.i32_const(8)),n.getLocal("startBit"))),n.if(n.i32_gt_s(n.getLocal("chunkSize"),n.getLocal("bitsToEnd")),n.setLocal("mask",n.i32_sub(n.i32_shl(n.i32_const(1),n.getLocal("bitsToEnd")),n.i32_const(1))),n.setLocal("mask",n.i32_sub(n.i32_shl(n.i32_const(1),n.getLocal("chunkSize")),n.i32_const(1)))),n.i32_and(n.i32_shr_u(n.i32_load(n.i32_add(n.getLocal("pScalar"),n.i32_shr_u(n.getLocal("startBit"),n.i32_const(3))),0,0),n.i32_and(n.getLocal("startBit"),n.i32_const(7))),n.getLocal("mask"))),(c=t.addFunction(a+"_reduceTable")).addParam("pTable","i32"),c.addParam("p","i32"),c.addLocal("half","i32"),c.addLocal("it1","i32"),c.addLocal("it2","i32"),c.addLocal("pAcc","i32"),r=c.getCodeBuilder(),c.addCode(r.if(r.i32_eq(r.getLocal("p"),r.i32_const(1)),r.ret([])),r.setLocal("half",r.i32_shl(r.i32_const(1),r.i32_sub(r.getLocal("p"),r.i32_const(1)))),r.setLocal("it1",r.getLocal("pTable")),r.setLocal("it2",r.i32_add(r.getLocal("pTable"),r.i32_mul(r.getLocal("half"),r.i32_const(p)))),r.setLocal("pAcc",r.i32_sub(r.getLocal("it2"),r.i32_const(p))),r.block(r.loop(r.br_if(1,r.i32_eq(r.getLocal("it1"),r.getLocal("pAcc"))),r.call(e+"_add",r.getLocal("it1"),r.getLocal("it2"),r.getLocal("it1")),r.call(e+"_add",r.getLocal("pAcc"),r.getLocal("it2"),r.getLocal("pAcc")),r.setLocal("it1",r.i32_add(r.getLocal("it1"),r.i32_const(p))),r.setLocal("it2",r.i32_add(r.getLocal("it2"),r.i32_const(p))),r.br(0))),r.call(a+"_reduceTable",r.getLocal("pTable"),r.i32_sub(r.getLocal("p"),r.i32_const(1))),r.setLocal("p",r.i32_sub(r.getLocal("p"),r.i32_const(1))),r.block(r.loop(r.br_if(1,r.i32_eqz(r.getLocal("p"))),r.call(e+"_double",r.getLocal("pAcc"),r.getLocal("pAcc")),r.setLocal("p",r.i32_sub(r.getLocal("p"),r.i32_const(1))),r.br(0))),r.call(e+"_add",r.getLocal("pTable"),r.getLocal("pAcc"),r.getLocal("pTable"))),(s=t.addFunction(a+"_chunk")).addParam("pBases","i32"),s.addParam("pScalars","i32"),s.addParam("scalarSize","i32"),s.addParam("n","i32"),s.addParam("startBit","i32"),s.addParam("chunkSize","i32"),s.addParam("pr","i32"),s.addLocal("nChunks","i32"),s.addLocal("itScalar","i32"),s.addLocal("endScalar","i32"),s.addLocal("itBase","i32"),s.addLocal("i","i32"),s.addLocal("j","i32"),s.addLocal("nTable","i32"),s.addLocal("pTable","i32"),s.addLocal("idx","i32"),s.addLocal("pIdxTable","i32"),d=s.getCodeBuilder(),s.addCode(d.if(d.i32_eqz(d.getLocal("n")),[...d.call(e+"_zero",d.getLocal("pr")),...d.ret([])]),d.setLocal("nTable",d.i32_shl(d.i32_const(1),d.getLocal("chunkSize"))),d.setLocal("pTable",d.i32_load(d.i32_const(0))),d.i32_store(d.i32_const(0),d.i32_add(d.getLocal("pTable"),d.i32_mul(d.getLocal("nTable"),d.i32_const(p)))),d.setLocal("j",d.i32_const(0)),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("j"),d.getLocal("nTable"))),d.call(e+"_zero",d.i32_add(d.getLocal("pTable"),d.i32_mul(d.getLocal("j"),d.i32_const(p)))),d.setLocal("j",d.i32_add(d.getLocal("j"),d.i32_const(1))),d.br(0))),d.setLocal("itBase",d.getLocal("pBases")),d.setLocal("itScalar",d.getLocal("pScalars")),d.setLocal("endScalar",d.i32_add(d.getLocal("pScalars"),d.i32_mul(d.getLocal("n"),d.getLocal("scalarSize")))),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("itScalar"),d.getLocal("endScalar"))),d.setLocal("idx",d.call(a+"_getChunk",d.getLocal("itScalar"),d.getLocal("scalarSize"),d.getLocal("startBit"),d.getLocal("chunkSize"))),d.if(d.getLocal("idx"),[...d.setLocal("pIdxTable",d.i32_add(d.getLocal("pTable"),d.i32_mul(d.i32_sub(d.getLocal("idx"),d.i32_const(1)),d.i32_const(p)))),...d.call(i,d.getLocal("pIdxTable"),d.getLocal("itBase"),d.getLocal("pIdxTable"))]),d.setLocal("itScalar",d.i32_add(d.getLocal("itScalar"),d.getLocal("scalarSize"))),d.setLocal("itBase",d.i32_add(d.getLocal("itBase"),d.i32_const(o))),d.br(0))),d.call(a+"_reduceTable",d.getLocal("pTable"),d.getLocal("chunkSize")),d.call(e+"_copy",d.getLocal("pTable"),d.getLocal("pr")),d.i32_store(d.i32_const(0),d.getLocal("pTable"))),(_=t.addFunction(a)).addParam("pBases","i32"),_.addParam("pScalars","i32"),_.addParam("scalarSize","i32"),_.addParam("n","i32"),_.addParam("pr","i32"),_.addLocal("chunkSize","i32"),_.addLocal("nChunks","i32"),_.addLocal("itScalar","i32"),_.addLocal("endScalar","i32"),_.addLocal("itBase","i32"),_.addLocal("itBit","i32"),_.addLocal("i","i32"),_.addLocal("j","i32"),_.addLocal("nTable","i32"),_.addLocal("pTable","i32"),_.addLocal("idx","i32"),_.addLocal("pIdxTable","i32"),u=(f=_.getCodeBuilder()).i32_const(t.alloc(p)),g=t.alloc([17,17,17,17,17,17,17,17,17,17,16,16,15,14,13,13,12,11,10,9,8,7,7,6,5,4,3,2,1,1,1,1]),_.addCode(f.call(e+"_zero",f.getLocal("pr")),f.if(f.i32_eqz(f.getLocal("n")),f.ret([])),f.setLocal("chunkSize",f.i32_load8_u(f.i32_clz(f.getLocal("n")),g)),f.setLocal("nChunks",f.i32_add(f.i32_div_u(f.i32_sub(f.i32_shl(f.getLocal("scalarSize"),f.i32_const(3)),f.i32_const(1)),f.getLocal("chunkSize")),f.i32_const(1))),f.setLocal("itBit",f.i32_mul(f.i32_sub(f.getLocal("nChunks"),f.i32_const(1)),f.getLocal("chunkSize"))),f.block(f.loop(f.br_if(1,f.i32_lt_s(f.getLocal("itBit"),f.i32_const(0))),f.if(f.i32_eqz(f.call(e+"_isZero",f.getLocal("pr"))),[...f.setLocal("j",f.i32_const(0)),...f.block(f.loop(f.br_if(1,f.i32_eq(f.getLocal("j"),f.getLocal("chunkSize"))),f.call(e+"_double",f.getLocal("pr"),f.getLocal("pr")),f.setLocal("j",f.i32_add(f.getLocal("j"),f.i32_const(1))),f.br(0)))]),f.call(a+"_chunk",f.getLocal("pBases"),f.getLocal("pScalars"),f.getLocal("scalarSize"),f.getLocal("n"),f.getLocal("itBit"),f.getLocal("chunkSize"),u),f.call(e+"_add",f.getLocal("pr"),u,f.getLocal("pr")),f.setLocal("itBit",f.i32_sub(f.getLocal("itBit"),f.getLocal("chunkSize"))),f.br(0)))),t.exportFunction(a),t.exportFunction(a+"_chunk")}},3196,(t,e,a)=>{let i=t.r(76886),o=t.r(40396),l=t.r(97172);e.exports=function(t,e,a,n){let c,r,s,d,_,f,u,g,p,h,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q,H,K,X,Y,tt,te,ta,ti,to,tl,tn,tc,tr,ts,td,t_,tf,tu,tg,tp,th,tL,tm,tb,tx,ty,tF,tw,tB,tC,tv,tA,tI,tE,tP,tO,tS,tq,tz,tM,tT,tR,tU,tN,tk,tj,tG,t$,tD,tW,tZ,tV,tJ,tQ,tH,tK,tX,tY,t2,t3,t0,t1,t4,t6,t8,t7,t5,t9,et,ee,ea,ei,eo,el,en,ec,er,es,ed,e_,ef,eu,eg,ep,eh,eL,em,eb,ex,ey,eF,ew,eB,eC,ev,eA,eI,eE,eP,eO,eS,eq,ez,eM,eT,eR,eU,eN,ek,ej,eG,e$,eD,eW,eZ,eV,eJ,eQ,eH,eK,eX,eY,e2,e3,e0,e1,e4,e6,e8,e7,e5,e9,at,ae,aa,ai,ao,al,an,ac,ar,as,ad,a_,af,au,ag,ap,ah,aL,am,ab,ax,ay,aF,aw,aB,aC,av,aA,aI,aE,aP,aO,aS,aq,az,aM,aT,aR,aU,aN,ak,aj,aG,a$,aD,aW,aZ,aV=t.modules[a].n64,aJ=8*aV;if(t.modules[e])return e;t.modules[e]={n64:3*aV},(c=t.addFunction(e+"_isZeroAffine")).addParam("p1","i32"),c.setReturnType("i32"),r=c.getCodeBuilder(),c.addCode(r.i32_and(r.call(a+"_isZero",r.getLocal("p1")),r.call(a+"_isZero",r.i32_add(r.getLocal("p1"),r.i32_const(aJ))))),(s=t.addFunction(e+"_isZero")).addParam("p1","i32"),s.setReturnType("i32"),d=s.getCodeBuilder(),s.addCode(d.call(a+"_isZero",d.i32_add(d.getLocal("p1"),d.i32_const(2*aJ)))),(_=t.addFunction(e+"_zeroAffine")).addParam("pr","i32"),f=_.getCodeBuilder(),_.addCode(f.call(a+"_zero",f.getLocal("pr"))),_.addCode(f.call(a+"_zero",f.i32_add(f.getLocal("pr"),f.i32_const(aJ)))),(u=t.addFunction(e+"_zero")).addParam("pr","i32"),g=u.getCodeBuilder(),u.addCode(g.call(a+"_zero",g.getLocal("pr"))),u.addCode(g.call(a+"_one",g.i32_add(g.getLocal("pr"),g.i32_const(aJ)))),u.addCode(g.call(a+"_zero",g.i32_add(g.getLocal("pr"),g.i32_const(2*aJ))));let aQ=t.addFunction(e+"_copyAffine");aQ.addParam("ps","i32"),aQ.addParam("pd","i32");let aH=aQ.getCodeBuilder();for(let t=0;t<2*aV;t++)aQ.addCode(aH.i64_store(aH.getLocal("pd"),8*t,aH.i64_load(aH.getLocal("ps"),8*t)));let aK=t.addFunction(e+"_copy");aK.addParam("ps","i32"),aK.addParam("pd","i32");let aX=aK.getCodeBuilder();for(let t=0;t<3*aV;t++)aK.addCode(aX.i64_store(aX.getLocal("pd"),8*t,aX.i64_load(aX.getLocal("ps"),8*t)));(p=t.addFunction(e+"_toJacobian")).addParam("p1","i32"),p.addParam("pr","i32"),L=(h=p.getCodeBuilder()).getLocal("p1"),m=h.i32_add(h.getLocal("p1"),h.i32_const(aJ)),b=h.getLocal("pr"),x=h.i32_add(h.getLocal("pr"),h.i32_const(aJ)),y=h.i32_add(h.getLocal("pr"),h.i32_const(2*aJ)),p.addCode(h.if(h.call(e+"_isZeroAffine",h.getLocal("p1")),h.call(e+"_zero",h.getLocal("pr")),[...h.call(a+"_one",y),...h.call(a+"_copy",m,x),...h.call(a+"_copy",L,b)])),(F=t.addFunction(e+"_eqAffine")).addParam("p1","i32"),F.addParam("p2","i32"),F.setReturnType("i32"),F.addLocal("z1","i32"),w=F.getCodeBuilder(),F.addCode(w.ret(w.i32_and(w.call(a+"_eq",w.getLocal("p1"),w.getLocal("p2")),w.call(a+"_eq",w.i32_add(w.getLocal("p1"),w.i32_const(aJ)),w.i32_add(w.getLocal("p2"),w.i32_const(aJ)))))),(B=t.addFunction(e+"_eqMixed")).addParam("p1","i32"),B.addParam("p2","i32"),B.setReturnType("i32"),B.addLocal("z1","i32"),v=(C=B.getCodeBuilder()).getLocal("p1"),A=C.i32_add(C.getLocal("p1"),C.i32_const(aJ)),B.addCode(C.setLocal("z1",C.i32_add(C.getLocal("p1"),C.i32_const(2*aJ)))),I=C.getLocal("z1"),E=C.getLocal("p2"),P=C.i32_add(C.getLocal("p2"),C.i32_const(aJ)),O=C.i32_const(t.alloc(aJ)),S=C.i32_const(t.alloc(aJ)),q=C.i32_const(t.alloc(aJ)),z=C.i32_const(t.alloc(aJ)),B.addCode(C.if(C.call(e+"_isZero",C.getLocal("p1")),C.ret(C.call(e+"_isZeroAffine",C.getLocal("p2")))),C.if(C.call(e+"_isZeroAffine",C.getLocal("p2")),C.ret(C.i32_const(0))),C.if(C.call(a+"_isOne",I),C.ret(C.call(e+"_eqAffine",C.getLocal("p1"),C.getLocal("p2")))),C.call(a+"_square",I,O),C.call(a+"_mul",E,O,S),C.call(a+"_mul",I,O,q),C.call(a+"_mul",P,q,z),C.if(C.call(a+"_eq",v,S),C.if(C.call(a+"_eq",A,z),C.ret(C.i32_const(1)))),C.ret(C.i32_const(0))),(M=t.addFunction(e+"_eq")).addParam("p1","i32"),M.addParam("p2","i32"),M.setReturnType("i32"),M.addLocal("z1","i32"),M.addLocal("z2","i32"),R=(T=M.getCodeBuilder()).getLocal("p1"),U=T.i32_add(T.getLocal("p1"),T.i32_const(aJ)),M.addCode(T.setLocal("z1",T.i32_add(T.getLocal("p1"),T.i32_const(2*aJ)))),N=T.getLocal("z1"),k=T.getLocal("p2"),j=T.i32_add(T.getLocal("p2"),T.i32_const(aJ)),M.addCode(T.setLocal("z2",T.i32_add(T.getLocal("p2"),T.i32_const(2*aJ)))),G=T.getLocal("z2"),$=T.i32_const(t.alloc(aJ)),D=T.i32_const(t.alloc(aJ)),W=T.i32_const(t.alloc(aJ)),Z=T.i32_const(t.alloc(aJ)),V=T.i32_const(t.alloc(aJ)),J=T.i32_const(t.alloc(aJ)),Q=T.i32_const(t.alloc(aJ)),H=T.i32_const(t.alloc(aJ)),M.addCode(T.if(T.call(e+"_isZero",T.getLocal("p1")),T.ret(T.call(e+"_isZero",T.getLocal("p2")))),T.if(T.call(e+"_isZero",T.getLocal("p2")),T.ret(T.i32_const(0))),T.if(T.call(a+"_isOne",N),T.ret(T.call(e+"_eqMixed",T.getLocal("p2"),T.getLocal("p1")))),T.if(T.call(a+"_isOne",G),T.ret(T.call(e+"_eqMixed",T.getLocal("p1"),T.getLocal("p2")))),T.call(a+"_square",N,$),T.call(a+"_square",G,D),T.call(a+"_mul",R,D,W),T.call(a+"_mul",k,$,Z),T.call(a+"_mul",N,$,V),T.call(a+"_mul",G,D,J),T.call(a+"_mul",U,J,Q),T.call(a+"_mul",j,V,H),T.if(T.call(a+"_eq",W,Z),T.if(T.call(a+"_eq",Q,H),T.ret(T.i32_const(1)))),T.ret(T.i32_const(0))),(K=t.addFunction(e+"_doubleAffine")).addParam("p1","i32"),K.addParam("pr","i32"),Y=(X=K.getCodeBuilder()).getLocal("p1"),tt=X.i32_add(X.getLocal("p1"),X.i32_const(aJ)),te=X.getLocal("pr"),ta=X.i32_add(X.getLocal("pr"),X.i32_const(aJ)),ti=X.i32_add(X.getLocal("pr"),X.i32_const(2*aJ)),to=X.i32_const(t.alloc(aJ)),tl=X.i32_const(t.alloc(aJ)),tn=X.i32_const(t.alloc(aJ)),tc=X.i32_const(t.alloc(aJ)),tr=X.i32_const(t.alloc(aJ)),ts=X.i32_const(t.alloc(aJ)),K.addCode(X.if(X.call(e+"_isZeroAffine",X.getLocal("p1")),[...X.call(e+"_toJacobian",X.getLocal("p1"),X.getLocal("pr")),...X.ret([])]),X.call(a+"_square",Y,to),X.call(a+"_square",tt,tl),X.call(a+"_square",tl,tn),X.call(a+"_add",Y,tl,tc),X.call(a+"_square",tc,tc),X.call(a+"_sub",tc,to,tc),X.call(a+"_sub",tc,tn,tc),X.call(a+"_add",tc,tc,tc),X.call(a+"_add",to,to,tr),X.call(a+"_add",tr,to,tr),X.call(a+"_add",tt,tt,ti),X.call(a+"_square",tr,te),X.call(a+"_sub",te,tc,te),X.call(a+"_sub",te,tc,te),X.call(a+"_add",tn,tn,ts),X.call(a+"_add",ts,ts,ts),X.call(a+"_add",ts,ts,ts),X.call(a+"_sub",tc,te,ta),X.call(a+"_mul",ta,tr,ta),X.call(a+"_sub",ta,ts,ta)),(td=t.addFunction(e+"_double")).addParam("p1","i32"),td.addParam("pr","i32"),tf=(t_=td.getCodeBuilder()).getLocal("p1"),tu=t_.i32_add(t_.getLocal("p1"),t_.i32_const(aJ)),tg=t_.i32_add(t_.getLocal("p1"),t_.i32_const(2*aJ)),tp=t_.getLocal("pr"),th=t_.i32_add(t_.getLocal("pr"),t_.i32_const(aJ)),tL=t_.i32_add(t_.getLocal("pr"),t_.i32_const(2*aJ)),tm=t_.i32_const(t.alloc(aJ)),tb=t_.i32_const(t.alloc(aJ)),tx=t_.i32_const(t.alloc(aJ)),ty=t_.i32_const(t.alloc(aJ)),tF=t_.i32_const(t.alloc(aJ)),tw=t_.i32_const(t.alloc(aJ)),tB=t_.i32_const(t.alloc(aJ)),tC=t_.i32_const(t.alloc(aJ)),td.addCode(t_.if(t_.call(e+"_isZero",t_.getLocal("p1")),[...t_.call(e+"_copy",t_.getLocal("p1"),t_.getLocal("pr")),...t_.ret([])]),t_.if(t_.call(a+"_isOne",tg),[...t_.ret(t_.call(e+"_doubleAffine",t_.getLocal("p1"),t_.getLocal("pr"))),...t_.ret([])]),t_.call(a+"_square",tf,tm),t_.call(a+"_square",tu,tb),t_.call(a+"_square",tb,tx),t_.call(a+"_add",tf,tb,ty),t_.call(a+"_square",ty,ty),t_.call(a+"_sub",ty,tm,ty),t_.call(a+"_sub",ty,tx,ty),t_.call(a+"_add",ty,ty,ty),t_.call(a+"_add",tm,tm,tF),t_.call(a+"_add",tF,tm,tF),t_.call(a+"_square",tF,tw),t_.call(a+"_mul",tu,tg,tB),t_.call(a+"_add",ty,ty,tp),t_.call(a+"_sub",tw,tp,tp),t_.call(a+"_add",tx,tx,tC),t_.call(a+"_add",tC,tC,tC),t_.call(a+"_add",tC,tC,tC),t_.call(a+"_sub",ty,tp,th),t_.call(a+"_mul",th,tF,th),t_.call(a+"_sub",th,tC,th),t_.call(a+"_add",tB,tB,tL)),(tv=t.addFunction(e+"_addAffine")).addParam("p1","i32"),tv.addParam("p2","i32"),tv.addParam("pr","i32"),tv.addLocal("z1","i32"),tI=(tA=tv.getCodeBuilder()).getLocal("p1"),tE=tA.i32_add(tA.getLocal("p1"),tA.i32_const(aJ)),tv.addCode(tA.setLocal("z1",tA.i32_add(tA.getLocal("p1"),tA.i32_const(2*aJ)))),tP=tA.getLocal("p2"),tO=tA.i32_add(tA.getLocal("p2"),tA.i32_const(aJ)),tS=tA.getLocal("pr"),tq=tA.i32_add(tA.getLocal("pr"),tA.i32_const(aJ)),tz=tA.i32_add(tA.getLocal("pr"),tA.i32_const(2*aJ)),tM=tA.i32_const(t.alloc(aJ)),tT=tA.i32_const(t.alloc(aJ)),tR=tA.i32_const(t.alloc(aJ)),tU=tA.i32_const(t.alloc(aJ)),tN=tA.i32_const(t.alloc(aJ)),tk=tA.i32_const(t.alloc(aJ)),tj=tA.i32_const(t.alloc(aJ)),tG=tA.i32_const(t.alloc(aJ)),t$=tA.i32_const(t.alloc(aJ)),tD=tA.i32_const(t.alloc(aJ)),tv.addCode(tA.if(tA.call(e+"_isZeroAffine",tA.getLocal("p1")),[...tA.call(e+"_copyAffine",tA.getLocal("p2"),tA.getLocal("pr")),...tA.call(a+"_one",tA.i32_add(tA.getLocal("pr"),tA.i32_const(2*aJ))),...tA.ret([])]),tA.if(tA.call(e+"_isZeroAffine",tA.getLocal("p2")),[...tA.call(e+"_copyAffine",tA.getLocal("p1"),tA.getLocal("pr")),...tA.call(a+"_one",tA.i32_add(tA.getLocal("pr"),tA.i32_const(2*aJ))),...tA.ret([])]),tA.if(tA.call(a+"_eq",tI,tP),tA.if(tA.call(a+"_eq",tE,tO),[...tA.call(e+"_doubleAffine",tA.getLocal("p2"),tA.getLocal("pr")),...tA.ret([])])),tA.call(a+"_sub",tP,tI,tM),tA.call(a+"_sub",tO,tE,tR),tA.call(a+"_square",tM,tT),tA.call(a+"_add",tT,tT,tU),tA.call(a+"_add",tU,tU,tU),tA.call(a+"_mul",tM,tU,tN),tA.call(a+"_add",tR,tR,tk),tA.call(a+"_mul",tI,tU,tG),tA.call(a+"_square",tk,tj),tA.call(a+"_add",tG,tG,t$),tA.call(a+"_sub",tj,tN,tS),tA.call(a+"_sub",tS,t$,tS),tA.call(a+"_mul",tE,tN,tD),tA.call(a+"_add",tD,tD,tD),tA.call(a+"_sub",tG,tS,tq),tA.call(a+"_mul",tq,tk,tq),tA.call(a+"_sub",tq,tD,tq),tA.call(a+"_add",tM,tM,tz)),(tW=t.addFunction(e+"_addMixed")).addParam("p1","i32"),tW.addParam("p2","i32"),tW.addParam("pr","i32"),tW.addLocal("z1","i32"),tV=(tZ=tW.getCodeBuilder()).getLocal("p1"),tJ=tZ.i32_add(tZ.getLocal("p1"),tZ.i32_const(aJ)),tW.addCode(tZ.setLocal("z1",tZ.i32_add(tZ.getLocal("p1"),tZ.i32_const(2*aJ)))),tQ=tZ.getLocal("z1"),tH=tZ.getLocal("p2"),tK=tZ.i32_add(tZ.getLocal("p2"),tZ.i32_const(aJ)),tX=tZ.getLocal("pr"),tY=tZ.i32_add(tZ.getLocal("pr"),tZ.i32_const(aJ)),t2=tZ.i32_add(tZ.getLocal("pr"),tZ.i32_const(2*aJ)),t3=tZ.i32_const(t.alloc(aJ)),t0=tZ.i32_const(t.alloc(aJ)),t1=tZ.i32_const(t.alloc(aJ)),t4=tZ.i32_const(t.alloc(aJ)),t6=tZ.i32_const(t.alloc(aJ)),t8=tZ.i32_const(t.alloc(aJ)),t7=tZ.i32_const(t.alloc(aJ)),t5=tZ.i32_const(t.alloc(aJ)),t9=tZ.i32_const(t.alloc(aJ)),et=tZ.i32_const(t.alloc(aJ)),ee=tZ.i32_const(t.alloc(aJ)),ea=tZ.i32_const(t.alloc(aJ)),ei=tZ.i32_const(t.alloc(aJ)),eo=tZ.i32_const(t.alloc(aJ)),tW.addCode(tZ.if(tZ.call(e+"_isZero",tZ.getLocal("p1")),[...tZ.call(e+"_copyAffine",tZ.getLocal("p2"),tZ.getLocal("pr")),...tZ.call(a+"_one",tZ.i32_add(tZ.getLocal("pr"),tZ.i32_const(2*aJ))),...tZ.ret([])]),tZ.if(tZ.call(e+"_isZeroAffine",tZ.getLocal("p2")),[...tZ.call(e+"_copy",tZ.getLocal("p1"),tZ.getLocal("pr")),...tZ.ret([])]),tZ.if(tZ.call(a+"_isOne",tQ),[...tZ.call(e+"_addAffine",tV,tH,tX),...tZ.ret([])]),tZ.call(a+"_square",tQ,t3),tZ.call(a+"_mul",tH,t3,t0),tZ.call(a+"_mul",tQ,t3,t1),tZ.call(a+"_mul",tK,t1,t4),tZ.if(tZ.call(a+"_eq",tV,t0),tZ.if(tZ.call(a+"_eq",tJ,t4),[...tZ.call(e+"_doubleAffine",tZ.getLocal("p2"),tZ.getLocal("pr")),...tZ.ret([])])),tZ.call(a+"_sub",t0,tV,t6),tZ.call(a+"_sub",t4,tJ,t7),tZ.call(a+"_square",t6,t8),tZ.call(a+"_add",t8,t8,t5),tZ.call(a+"_add",t5,t5,t5),tZ.call(a+"_mul",t6,t5,t9),tZ.call(a+"_add",t7,t7,et),tZ.call(a+"_mul",tV,t5,ea),tZ.call(a+"_square",et,ee),tZ.call(a+"_add",ea,ea,ei),tZ.call(a+"_sub",ee,t9,tX),tZ.call(a+"_sub",tX,ei,tX),tZ.call(a+"_mul",tJ,t9,eo),tZ.call(a+"_add",eo,eo,eo),tZ.call(a+"_sub",ea,tX,tY),tZ.call(a+"_mul",tY,et,tY),tZ.call(a+"_sub",tY,eo,tY),tZ.call(a+"_add",tQ,t6,t2),tZ.call(a+"_square",t2,t2),tZ.call(a+"_sub",t2,t3,t2),tZ.call(a+"_sub",t2,t8,t2)),(el=t.addFunction(e+"_add")).addParam("p1","i32"),el.addParam("p2","i32"),el.addParam("pr","i32"),el.addLocal("z1","i32"),el.addLocal("z2","i32"),ec=(en=el.getCodeBuilder()).getLocal("p1"),er=en.i32_add(en.getLocal("p1"),en.i32_const(aJ)),el.addCode(en.setLocal("z1",en.i32_add(en.getLocal("p1"),en.i32_const(2*aJ)))),es=en.getLocal("z1"),ed=en.getLocal("p2"),e_=en.i32_add(en.getLocal("p2"),en.i32_const(aJ)),el.addCode(en.setLocal("z2",en.i32_add(en.getLocal("p2"),en.i32_const(2*aJ)))),ef=en.getLocal("z2"),eu=en.getLocal("pr"),eg=en.i32_add(en.getLocal("pr"),en.i32_const(aJ)),ep=en.i32_add(en.getLocal("pr"),en.i32_const(2*aJ)),eh=en.i32_const(t.alloc(aJ)),eL=en.i32_const(t.alloc(aJ)),em=en.i32_const(t.alloc(aJ)),eb=en.i32_const(t.alloc(aJ)),ex=en.i32_const(t.alloc(aJ)),ey=en.i32_const(t.alloc(aJ)),eF=en.i32_const(t.alloc(aJ)),ew=en.i32_const(t.alloc(aJ)),eB=en.i32_const(t.alloc(aJ)),eC=en.i32_const(t.alloc(aJ)),ev=en.i32_const(t.alloc(aJ)),eA=en.i32_const(t.alloc(aJ)),eI=en.i32_const(t.alloc(aJ)),eE=en.i32_const(t.alloc(aJ)),eP=en.i32_const(t.alloc(aJ)),eO=en.i32_const(t.alloc(aJ)),eS=en.i32_const(t.alloc(aJ)),el.addCode(en.if(en.call(e+"_isZero",en.getLocal("p1")),[...en.call(e+"_copy",en.getLocal("p2"),en.getLocal("pr")),...en.ret([])]),en.if(en.call(e+"_isZero",en.getLocal("p2")),[...en.call(e+"_copy",en.getLocal("p1"),en.getLocal("pr")),...en.ret([])]),en.if(en.call(a+"_isOne",es),[...en.call(e+"_addMixed",ed,ec,eu),...en.ret([])]),en.if(en.call(a+"_isOne",ef),[...en.call(e+"_addMixed",ec,ed,eu),...en.ret([])]),en.call(a+"_square",es,eh),en.call(a+"_square",ef,eL),en.call(a+"_mul",ec,eL,em),en.call(a+"_mul",ed,eh,eb),en.call(a+"_mul",es,eh,ex),en.call(a+"_mul",ef,eL,ey),en.call(a+"_mul",er,ey,eF),en.call(a+"_mul",e_,ex,ew),en.if(en.call(a+"_eq",em,eb),en.if(en.call(a+"_eq",eF,ew),[...en.call(e+"_double",en.getLocal("p1"),en.getLocal("pr")),...en.ret([])])),en.call(a+"_sub",eb,em,eB),en.call(a+"_sub",ew,eF,eC),en.call(a+"_add",eB,eB,ev),en.call(a+"_square",ev,ev),en.call(a+"_mul",eB,ev,eA),en.call(a+"_add",eC,eC,eI),en.call(a+"_mul",em,ev,eP),en.call(a+"_square",eI,eE),en.call(a+"_add",eP,eP,eO),en.call(a+"_sub",eE,eA,eu),en.call(a+"_sub",eu,eO,eu),en.call(a+"_mul",eF,eA,eS),en.call(a+"_add",eS,eS,eS),en.call(a+"_sub",eP,eu,eg),en.call(a+"_mul",eg,eI,eg),en.call(a+"_sub",eg,eS,eg),en.call(a+"_add",es,ef,ep),en.call(a+"_square",ep,ep),en.call(a+"_sub",ep,eh,ep),en.call(a+"_sub",ep,eL,ep),en.call(a+"_mul",ep,eB,ep)),(eq=t.addFunction(e+"_negAffine")).addParam("p1","i32"),eq.addParam("pr","i32"),eM=(ez=eq.getCodeBuilder()).getLocal("p1"),eT=ez.i32_add(ez.getLocal("p1"),ez.i32_const(aJ)),eR=ez.getLocal("pr"),eU=ez.i32_add(ez.getLocal("pr"),ez.i32_const(aJ)),eq.addCode(ez.call(a+"_copy",eM,eR),ez.call(a+"_neg",eT,eU)),(eN=t.addFunction(e+"_neg")).addParam("p1","i32"),eN.addParam("pr","i32"),ej=(ek=eN.getCodeBuilder()).getLocal("p1"),eG=ek.i32_add(ek.getLocal("p1"),ek.i32_const(aJ)),e$=ek.i32_add(ek.getLocal("p1"),ek.i32_const(2*aJ)),eD=ek.getLocal("pr"),eW=ek.i32_add(ek.getLocal("pr"),ek.i32_const(aJ)),eZ=ek.i32_add(ek.getLocal("pr"),ek.i32_const(2*aJ)),eN.addCode(ek.call(a+"_copy",ej,eD),ek.call(a+"_neg",eG,eW),ek.call(a+"_copy",e$,eZ)),(eV=t.addFunction(e+"_subAffine")).addParam("p1","i32"),eV.addParam("p2","i32"),eV.addParam("pr","i32"),eQ=(eJ=eV.getCodeBuilder()).i32_const(t.alloc(3*aJ)),eV.addCode(eJ.call(e+"_negAffine",eJ.getLocal("p2"),eQ),eJ.call(e+"_addAffine",eJ.getLocal("p1"),eQ,eJ.getLocal("pr"))),(eH=t.addFunction(e+"_subMixed")).addParam("p1","i32"),eH.addParam("p2","i32"),eH.addParam("pr","i32"),eX=(eK=eH.getCodeBuilder()).i32_const(t.alloc(3*aJ)),eH.addCode(eK.call(e+"_negAffine",eK.getLocal("p2"),eX),eK.call(e+"_addMixed",eK.getLocal("p1"),eX,eK.getLocal("pr"))),(eY=t.addFunction(e+"_sub")).addParam("p1","i32"),eY.addParam("p2","i32"),eY.addParam("pr","i32"),e3=(e2=eY.getCodeBuilder()).i32_const(t.alloc(3*aJ)),eY.addCode(e2.call(e+"_neg",e2.getLocal("p2"),e3),e2.call(e+"_add",e2.getLocal("p1"),e3,e2.getLocal("pr")));let aY=t.addFunction(e+"_fromMontgomeryAffine");aY.addParam("p1","i32"),aY.addParam("pr","i32");let a2=aY.getCodeBuilder();aY.addCode(a2.call(a+"_fromMontgomery",a2.getLocal("p1"),a2.getLocal("pr")));for(let t=1;t<2;t++)aY.addCode(a2.call(a+"_fromMontgomery",a2.i32_add(a2.getLocal("p1"),a2.i32_const(t*aJ)),a2.i32_add(a2.getLocal("pr"),a2.i32_const(t*aJ))));let a3=t.addFunction(e+"_fromMontgomery");a3.addParam("p1","i32"),a3.addParam("pr","i32");let a0=a3.getCodeBuilder();a3.addCode(a0.call(a+"_fromMontgomery",a0.getLocal("p1"),a0.getLocal("pr")));for(let t=1;t<3;t++)a3.addCode(a0.call(a+"_fromMontgomery",a0.i32_add(a0.getLocal("p1"),a0.i32_const(t*aJ)),a0.i32_add(a0.getLocal("pr"),a0.i32_const(t*aJ))));let a1=t.addFunction(e+"_toMontgomeryAffine");a1.addParam("p1","i32"),a1.addParam("pr","i32");let a4=a1.getCodeBuilder();a1.addCode(a4.call(a+"_toMontgomery",a4.getLocal("p1"),a4.getLocal("pr")));for(let t=1;t<2;t++)a1.addCode(a4.call(a+"_toMontgomery",a4.i32_add(a4.getLocal("p1"),a4.i32_const(t*aJ)),a4.i32_add(a4.getLocal("pr"),a4.i32_const(t*aJ))));let a6=t.addFunction(e+"_toMontgomery");a6.addParam("p1","i32"),a6.addParam("pr","i32");let a8=a6.getCodeBuilder();a6.addCode(a8.call(a+"_toMontgomery",a8.getLocal("p1"),a8.getLocal("pr")));for(let t=1;t<3;t++)a6.addCode(a8.call(a+"_toMontgomery",a8.i32_add(a8.getLocal("p1"),a8.i32_const(t*aJ)),a8.i32_add(a8.getLocal("pr"),a8.i32_const(t*aJ))));return(e0=t.addFunction(e+"_toAffine")).addParam("p1","i32"),e0.addParam("pr","i32"),e4=(e1=e0.getCodeBuilder()).getLocal("p1"),e6=e1.i32_add(e1.getLocal("p1"),e1.i32_const(aJ)),e8=e1.i32_add(e1.getLocal("p1"),e1.i32_const(2*aJ)),e7=e1.getLocal("pr"),e5=e1.i32_add(e1.getLocal("pr"),e1.i32_const(aJ)),e9=e1.i32_const(t.alloc(aJ)),at=e1.i32_const(t.alloc(aJ)),ae=e1.i32_const(t.alloc(aJ)),e0.addCode(e1.if(e1.call(e+"_isZero",e1.getLocal("p1")),[...e1.call(a+"_zero",e7),...e1.call(a+"_zero",e5)],[...e1.call(a+"_inverse",e8,e9),...e1.call(a+"_square",e9,at),...e1.call(a+"_mul",e9,at,ae),...e1.call(a+"_mul",e4,at,e7),...e1.call(a+"_mul",e6,ae,e5)])),(aa=t.addFunction(e+"_inCurveAffine")).addParam("pIn","i32"),aa.setReturnType("i32"),ao=(ai=aa.getCodeBuilder()).getLocal("pIn"),al=ai.i32_add(ai.getLocal("pIn"),ai.i32_const(aJ)),an=ai.i32_const(t.alloc(aJ)),ac=ai.i32_const(t.alloc(aJ)),aa.addCode(ai.call(a+"_square",al,an),ai.call(a+"_square",ao,ac),ai.call(a+"_mul",ao,ac,ac),ai.call(a+"_add",ac,ai.i32_const(n),ac),ai.ret(ai.call(a+"_eq",an,ac))),(ar=t.addFunction(e+"_inCurve")).addParam("pIn","i32"),ar.setReturnType("i32"),ad=(as=ar.getCodeBuilder()).i32_const(t.alloc(2*aJ)),ar.addCode(as.call(e+"_toAffine",as.getLocal("pIn"),ad),as.ret(as.call(e+"_inCurveAffine",ad))),(a_=t.addFunction(e+"_batchToAffine")).addParam("pIn","i32"),a_.addParam("n","i32"),a_.addParam("pOut","i32"),a_.addLocal("pAux","i32"),a_.addLocal("itIn","i32"),a_.addLocal("itAux","i32"),a_.addLocal("itOut","i32"),a_.addLocal("i","i32"),au=(af=a_.getCodeBuilder()).i32_const(t.alloc(aJ)),a_.addCode(af.setLocal("pAux",af.i32_load(af.i32_const(0))),af.i32_store(af.i32_const(0),af.i32_add(af.getLocal("pAux"),af.i32_mul(af.getLocal("n"),af.i32_const(aJ)))),af.call(a+"_batchInverse",af.i32_add(af.getLocal("pIn"),af.i32_const(2*aJ)),af.i32_const(3*aJ),af.getLocal("n"),af.getLocal("pAux"),af.i32_const(aJ)),af.setLocal("itIn",af.getLocal("pIn")),af.setLocal("itAux",af.getLocal("pAux")),af.setLocal("itOut",af.getLocal("pOut")),af.setLocal("i",af.i32_const(0)),af.block(af.loop(af.br_if(1,af.i32_eq(af.getLocal("i"),af.getLocal("n"))),af.if(af.call(a+"_isZero",af.getLocal("itAux")),[...af.call(a+"_zero",af.getLocal("itOut")),...af.call(a+"_zero",af.i32_add(af.getLocal("itOut"),af.i32_const(aJ)))],[...af.call(a+"_mul",af.getLocal("itAux"),af.i32_add(af.getLocal("itIn"),af.i32_const(aJ)),au),...af.call(a+"_square",af.getLocal("itAux"),af.getLocal("itAux")),...af.call(a+"_mul",af.getLocal("itAux"),af.getLocal("itIn"),af.getLocal("itOut")),...af.call(a+"_mul",af.getLocal("itAux"),au,af.i32_add(af.getLocal("itOut"),af.i32_const(aJ)))]),af.setLocal("itIn",af.i32_add(af.getLocal("itIn"),af.i32_const(3*aJ))),af.setLocal("itOut",af.i32_add(af.getLocal("itOut"),af.i32_const(2*aJ))),af.setLocal("itAux",af.i32_add(af.getLocal("itAux"),af.i32_const(aJ))),af.setLocal("i",af.i32_add(af.getLocal("i"),af.i32_const(1))),af.br(0))),af.i32_store(af.i32_const(0),af.getLocal("pAux"))),(ag=t.addFunction(e+"_normalize")).addParam("p1","i32"),ag.addParam("pr","i32"),ah=(ap=ag.getCodeBuilder()).getLocal("p1"),aL=ap.i32_add(ap.getLocal("p1"),ap.i32_const(aJ)),am=ap.i32_add(ap.getLocal("p1"),ap.i32_const(2*aJ)),ab=ap.getLocal("pr"),ax=ap.i32_add(ap.getLocal("pr"),ap.i32_const(aJ)),ay=ap.i32_add(ap.getLocal("pr"),ap.i32_const(2*aJ)),aF=ap.i32_const(t.alloc(aJ)),aw=ap.i32_const(t.alloc(aJ)),aB=ap.i32_const(t.alloc(aJ)),ag.addCode(ap.if(ap.call(e+"_isZero",ap.getLocal("p1")),ap.call(e+"_zero",ap.getLocal("pr")),[...ap.call(a+"_inverse",am,aF),...ap.call(a+"_square",aF,aw),...ap.call(a+"_mul",aF,aw,aB),...ap.call(a+"_mul",ah,aw,ab),...ap.call(a+"_mul",aL,aB,ax),...ap.call(a+"_one",ay)])),(aC=t.addFunction(e+"__reverseBytes")).addParam("pIn","i32"),aC.addParam("n","i32"),aC.addParam("pOut","i32"),aC.addLocal("itOut","i32"),aC.addLocal("itIn","i32"),av=aC.getCodeBuilder(),aC.addCode(av.setLocal("itOut",av.i32_sub(av.i32_add(av.getLocal("pOut"),av.getLocal("n")),av.i32_const(1))),av.setLocal("itIn",av.getLocal("pIn")),av.block(av.loop(av.br_if(1,av.i32_lt_s(av.getLocal("itOut"),av.getLocal("pOut"))),av.i32_store8(av.getLocal("itOut"),av.i32_load8_u(av.getLocal("itIn"))),av.setLocal("itOut",av.i32_sub(av.getLocal("itOut"),av.i32_const(1))),av.setLocal("itIn",av.i32_add(av.getLocal("itIn"),av.i32_const(1))),av.br(0)))),(aA=t.addFunction(e+"_LEMtoU")).addParam("pIn","i32"),aA.addParam("pOut","i32"),aI=aA.getCodeBuilder(),aE=t.alloc(2*aJ),aP=aI.i32_const(aE),aO=aI.i32_const(aE),aS=aI.i32_const(aE+aJ),aA.addCode(aI.if(aI.call(e+"_isZeroAffine",aI.getLocal("pIn")),[...aI.call(e+"_zeroAffine",aI.getLocal("pOut")),...aI.ret([])]),aI.call(e+"_fromMontgomeryAffine",aI.getLocal("pIn"),aP),aI.call(e+"__reverseBytes",aO,aI.i32_const(aJ),aI.getLocal("pOut")),aI.call(e+"__reverseBytes",aS,aI.i32_const(aJ),aI.i32_add(aI.getLocal("pOut"),aI.i32_const(aJ)))),(aq=t.addFunction(e+"_LEMtoC")).addParam("pIn","i32"),aq.addParam("pOut","i32"),aM=(az=aq.getCodeBuilder()).i32_const(t.alloc(aJ)),aq.addCode(az.if(az.call(e+"_isZeroAffine",az.getLocal("pIn")),[...az.call(a+"_zero",az.getLocal("pOut")),...az.i32_store8(az.getLocal("pOut"),az.i32_const(64)),...az.ret([])]),az.call(a+"_fromMontgomery",az.getLocal("pIn"),aM),az.call(e+"__reverseBytes",aM,az.i32_const(aJ),az.getLocal("pOut")),az.if(az.i32_eq(az.call(a+"_sign",az.i32_add(az.getLocal("pIn"),az.i32_const(aJ))),az.i32_const(-1)),az.i32_store8(az.getLocal("pOut"),az.i32_or(az.i32_load8_u(az.getLocal("pOut")),az.i32_const(128))))),(aT=t.addFunction(e+"_UtoLEM")).addParam("pIn","i32"),aT.addParam("pOut","i32"),aR=aT.getCodeBuilder(),aU=t.alloc(2*aJ),aN=aR.i32_const(aU),ak=aR.i32_const(aU),aj=aR.i32_const(aU+aJ),aT.addCode(aR.if(aR.i32_and(aR.i32_load8_u(aR.getLocal("pIn")),aR.i32_const(64)),[...aR.call(e+"_zeroAffine",aR.getLocal("pOut")),...aR.ret([])]),aR.call(e+"__reverseBytes",aR.getLocal("pIn"),aR.i32_const(aJ),ak),aR.call(e+"__reverseBytes",aR.i32_add(aR.getLocal("pIn"),aR.i32_const(aJ)),aR.i32_const(aJ),aj),aR.call(e+"_toMontgomeryAffine",aN,aR.getLocal("pOut"))),(aG=t.addFunction(e+"_CtoLEM")).addParam("pIn","i32"),aG.addParam("pOut","i32"),aG.addLocal("firstByte","i32"),aG.addLocal("greatest","i32"),a$=aG.getCodeBuilder(),aD=t.alloc(2*aJ),aW=a$.i32_const(aD),aZ=a$.i32_const(aD+aJ),aG.addCode(a$.setLocal("firstByte",a$.i32_load8_u(a$.getLocal("pIn"))),a$.if(a$.i32_and(a$.getLocal("firstByte"),a$.i32_const(64)),[...a$.call(e+"_zeroAffine",a$.getLocal("pOut")),...a$.ret([])]),a$.setLocal("greatest",a$.i32_and(a$.getLocal("firstByte"),a$.i32_const(128))),a$.call(a+"_copy",a$.getLocal("pIn"),aZ),a$.i32_store8(aZ,a$.i32_and(a$.getLocal("firstByte"),a$.i32_const(63))),a$.call(e+"__reverseBytes",aZ,a$.i32_const(aJ),aW),a$.call(a+"_toMontgomery",aW,a$.getLocal("pOut")),a$.call(a+"_square",a$.getLocal("pOut"),aZ),a$.call(a+"_mul",a$.getLocal("pOut"),aZ,aZ),a$.call(a+"_add",aZ,a$.i32_const(n),aZ),a$.call(a+"_sqrt",aZ,aZ),a$.call(a+"_neg",aZ,aW),a$.if(a$.i32_eq(a$.call(a+"_sign",aZ),a$.i32_const(-1)),a$.if(a$.getLocal("greatest"),a$.call(a+"_copy",aZ,a$.i32_add(a$.getLocal("pOut"),a$.i32_const(aJ))),a$.call(a+"_neg",aZ,a$.i32_add(a$.getLocal("pOut"),a$.i32_const(aJ)))),a$.if(a$.getLocal("greatest"),a$.call(a+"_neg",aZ,a$.i32_add(a$.getLocal("pOut"),a$.i32_const(aJ))),a$.call(a+"_copy",aZ,a$.i32_add(a$.getLocal("pOut"),a$.i32_const(aJ)))))),o(t,e+"_batchLEMtoU",e+"_LEMtoU",2*aJ,2*aJ),o(t,e+"_batchLEMtoC",e+"_LEMtoC",2*aJ,aJ),o(t,e+"_batchUtoLEM",e+"_UtoLEM",2*aJ,2*aJ),o(t,e+"_batchCtoLEM",e+"_CtoLEM",aJ,2*aJ,!0),o(t,e+"_batchToJacobian",e+"_toJacobian",2*aJ,3*aJ,!0),l(t,e,e+"_multiexp",e+"_add",3*aJ),l(t,e,e+"_multiexpAffine",e+"_addMixed",2*aJ),i(t,e+"_timesScalar",3*aJ,e+"_add",e+"_double",e+"_sub",e+"_copy",e+"_zero"),i(t,e+"_timesScalarAffine",2*aJ,e+"_addMixed",e+"_double",e+"_subMixed",e+"_copyAffine",e+"_zero"),t.exportFunction(e+"_isZero"),t.exportFunction(e+"_isZeroAffine"),t.exportFunction(e+"_eq"),t.exportFunction(e+"_eqMixed"),t.exportFunction(e+"_eqAffine"),t.exportFunction(e+"_copy"),t.exportFunction(e+"_copyAffine"),t.exportFunction(e+"_zero"),t.exportFunction(e+"_zeroAffine"),t.exportFunction(e+"_double"),t.exportFunction(e+"_doubleAffine"),t.exportFunction(e+"_add"),t.exportFunction(e+"_addMixed"),t.exportFunction(e+"_addAffine"),t.exportFunction(e+"_neg"),t.exportFunction(e+"_negAffine"),t.exportFunction(e+"_sub"),t.exportFunction(e+"_subMixed"),t.exportFunction(e+"_subAffine"),t.exportFunction(e+"_fromMontgomery"),t.exportFunction(e+"_fromMontgomeryAffine"),t.exportFunction(e+"_toMontgomery"),t.exportFunction(e+"_toMontgomeryAffine"),t.exportFunction(e+"_timesScalar"),t.exportFunction(e+"_timesScalarAffine"),t.exportFunction(e+"_normalize"),t.exportFunction(e+"_LEMtoU"),t.exportFunction(e+"_LEMtoC"),t.exportFunction(e+"_UtoLEM"),t.exportFunction(e+"_CtoLEM"),t.exportFunction(e+"_batchLEMtoU"),t.exportFunction(e+"_batchLEMtoC"),t.exportFunction(e+"_batchUtoLEM"),t.exportFunction(e+"_batchCtoLEM"),t.exportFunction(e+"_toAffine"),t.exportFunction(e+"_toJacobian"),t.exportFunction(e+"_batchToAffine"),t.exportFunction(e+"_batchToJacobian"),t.exportFunction(e+"_inCurve"),t.exportFunction(e+"_inCurveAffine"),e}},29191,(t,e,a)=>{let{isOdd:i,modInv:o,modPow:l}=t.r(3926),n=t.r(4122);e.exports=function(t,e,a,c,r){let s,d,_,f,u,g,p,h,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q,H,K,X,Y,tt=8*t.modules[c].n64,te=8*t.modules[a].n64,ta=t.modules[c].q,ti=ta-1n,to=0;for(;!i(ti);)to++,ti>>=1n;let tl=2n;for(;1n===l(tl,ta>>1n,ta);)tl+=1n;let tn=Array(to+1);tn[to]=l(tl,ti,ta);let tc=to-1;for(;tc>=0;)tn[tc]=l(tn[tc+1],2n,ta),tc--;let tr=[],ts=(1n<<BigInt(8*tt))%ta;for(let t=0;t<tn.length;t++){let e=tn[t]*ts%ta;tr.push(...n.bigInt2BytesLE(e,tt))}let td=t.alloc(tr),t_=Array(to+1);t_[0]=1n;for(let t=1;t<=to;t++)t_[t]=2n*t_[t-1];let tf=[];for(let t=0;t<=to;t++){let e=o(t_[t],ta)*ts%ta;tf.push(...n.bigInt2BytesLE(e,tt))}let tu=t.alloc(tf),tg=l(tl,2n,ta),tp=[],th=[];for(let t=0;t<=to;t++){let e=l(tg,2n**BigInt(t),ta),a=o(ta+1n-e,ta);tp.push(...n.bigInt2BytesLE(e*ts%ta,tt)),th.push(...n.bigInt2BytesLE(a*ts%ta,tt))}let tL=t.alloc(tp),tm=t.alloc(th),tb=Array(256);for(let t=0;t<256;t++)tb[t]=function(t){let e=0;for(let a=0;a<8;a++)t&1<<a&&(e|=128>>a);return e}(t);let tx=t.alloc(tb);(s=t.addFunction(e+"__rev")).addParam("x","i32"),s.addParam("bits","i32"),s.setReturnType("i32"),d=s.getCodeBuilder(),s.addCode(d.i32_rotl(d.i32_add(d.i32_add(d.i32_shl(d.i32_load8_u(d.i32_and(d.getLocal("x"),d.i32_const(255)),tx,0),d.i32_const(24)),d.i32_shl(d.i32_load8_u(d.i32_and(d.i32_shr_u(d.getLocal("x"),d.i32_const(8)),d.i32_const(255)),tx,0),d.i32_const(16))),d.i32_add(d.i32_shl(d.i32_load8_u(d.i32_and(d.i32_shr_u(d.getLocal("x"),d.i32_const(16)),d.i32_const(255)),tx,0),d.i32_const(8)),d.i32_load8_u(d.i32_and(d.i32_shr_u(d.getLocal("x"),d.i32_const(24)),d.i32_const(255)),tx,0))),d.getLocal("bits"))),(_=t.addFunction(e+"__reversePermutation")).addParam("px","i32"),_.addParam("bits","i32"),_.addLocal("n","i32"),_.addLocal("i","i32"),_.addLocal("ri","i32"),_.addLocal("idx1","i32"),_.addLocal("idx2","i32"),u=(f=_.getCodeBuilder()).i32_const(t.alloc(te)),_.addCode(f.setLocal("n",f.i32_shl(f.i32_const(1),f.getLocal("bits"))),f.setLocal("i",f.i32_const(0)),f.block(f.loop(f.br_if(1,f.i32_eq(f.getLocal("i"),f.getLocal("n"))),f.setLocal("idx1",f.i32_add(f.getLocal("px"),f.i32_mul(f.getLocal("i"),f.i32_const(te)))),f.setLocal("ri",f.call(e+"__rev",f.getLocal("i"),f.getLocal("bits"))),f.setLocal("idx2",f.i32_add(f.getLocal("px"),f.i32_mul(f.getLocal("ri"),f.i32_const(te)))),f.if(f.i32_lt_u(f.getLocal("i"),f.getLocal("ri")),[...f.call(a+"_copy",f.getLocal("idx1"),u),...f.call(a+"_copy",f.getLocal("idx2"),f.getLocal("idx1")),...f.call(a+"_copy",u,f.getLocal("idx2"))]),f.setLocal("i",f.i32_add(f.getLocal("i"),f.i32_const(1))),f.br(0)))),(g=t.addFunction(e+"__fftFinal")).addParam("px","i32"),g.addParam("bits","i32"),g.addParam("reverse","i32"),g.addParam("mulFactor","i32"),g.addLocal("n","i32"),g.addLocal("ndiv2","i32"),g.addLocal("pInv2","i32"),g.addLocal("i","i32"),g.addLocal("mask","i32"),g.addLocal("idx1","i32"),g.addLocal("idx2","i32"),h=(p=g.getCodeBuilder()).i32_const(t.alloc(te)),g.addCode(p.if(p.i32_and(p.i32_eqz(p.getLocal("reverse")),p.call(c+"_isOne",p.getLocal("mulFactor"))),p.ret([])),p.setLocal("n",p.i32_shl(p.i32_const(1),p.getLocal("bits"))),p.setLocal("mask",p.i32_sub(p.getLocal("n"),p.i32_const(1))),p.setLocal("i",p.i32_const(1)),p.setLocal("ndiv2",p.i32_shr_u(p.getLocal("n"),p.i32_const(1))),p.block(p.loop(p.br_if(1,p.i32_ge_u(p.getLocal("i"),p.getLocal("ndiv2"))),p.setLocal("idx1",p.i32_add(p.getLocal("px"),p.i32_mul(p.getLocal("i"),p.i32_const(te)))),p.setLocal("idx2",p.i32_add(p.getLocal("px"),p.i32_mul(p.i32_sub(p.getLocal("n"),p.getLocal("i")),p.i32_const(te)))),p.if(p.getLocal("reverse"),p.if(p.call(c+"_isOne",p.getLocal("mulFactor")),[...p.call(a+"_copy",p.getLocal("idx1"),h),...p.call(a+"_copy",p.getLocal("idx2"),p.getLocal("idx1")),...p.call(a+"_copy",h,p.getLocal("idx2"))],[...p.call(a+"_copy",p.getLocal("idx1"),h),...p.call(r,p.getLocal("idx2"),p.getLocal("mulFactor"),p.getLocal("idx1")),...p.call(r,h,p.getLocal("mulFactor"),p.getLocal("idx2"))]),p.if(p.call(c+"_isOne",p.getLocal("mulFactor")),[],[...p.call(r,p.getLocal("idx1"),p.getLocal("mulFactor"),p.getLocal("idx1")),...p.call(r,p.getLocal("idx2"),p.getLocal("mulFactor"),p.getLocal("idx2"))])),p.setLocal("i",p.i32_add(p.getLocal("i"),p.i32_const(1))),p.br(0))),p.if(p.call(c+"_isOne",p.getLocal("mulFactor")),[],[...p.call(r,p.getLocal("px"),p.getLocal("mulFactor"),p.getLocal("px")),...p.setLocal("idx2",p.i32_add(p.getLocal("px"),p.i32_mul(p.getLocal("ndiv2"),p.i32_const(te)))),...p.call(r,p.getLocal("idx2"),p.getLocal("mulFactor"),p.getLocal("idx2"))])),(L=t.addFunction(e+"_rawfft")).addParam("px","i32"),L.addParam("bits","i32"),L.addParam("reverse","i32"),L.addParam("mulFactor","i32"),L.addLocal("s","i32"),L.addLocal("k","i32"),L.addLocal("j","i32"),L.addLocal("m","i32"),L.addLocal("mdiv2","i32"),L.addLocal("n","i32"),L.addLocal("pwm","i32"),L.addLocal("idx1","i32"),L.addLocal("idx2","i32"),b=(m=L.getCodeBuilder()).i32_const(t.alloc(tt)),x=m.i32_const(t.alloc(te)),y=m.i32_const(t.alloc(te)),L.addCode(m.call(e+"__reversePermutation",m.getLocal("px"),m.getLocal("bits")),m.setLocal("n",m.i32_shl(m.i32_const(1),m.getLocal("bits"))),m.setLocal("s",m.i32_const(1)),m.block(m.loop(m.br_if(1,m.i32_gt_u(m.getLocal("s"),m.getLocal("bits"))),m.setLocal("m",m.i32_shl(m.i32_const(1),m.getLocal("s"))),m.setLocal("pwm",m.i32_add(m.i32_const(td),m.i32_mul(m.getLocal("s"),m.i32_const(tt)))),m.setLocal("k",m.i32_const(0)),m.block(m.loop(m.br_if(1,m.i32_ge_u(m.getLocal("k"),m.getLocal("n"))),m.call(c+"_one",b),m.setLocal("mdiv2",m.i32_shr_u(m.getLocal("m"),m.i32_const(1))),m.setLocal("j",m.i32_const(0)),m.block(m.loop(m.br_if(1,m.i32_ge_u(m.getLocal("j"),m.getLocal("mdiv2"))),m.setLocal("idx1",m.i32_add(m.getLocal("px"),m.i32_mul(m.i32_add(m.getLocal("k"),m.getLocal("j")),m.i32_const(te)))),m.setLocal("idx2",m.i32_add(m.getLocal("idx1"),m.i32_mul(m.getLocal("mdiv2"),m.i32_const(te)))),m.call(r,m.getLocal("idx2"),b,x),m.call(a+"_copy",m.getLocal("idx1"),y),m.call(a+"_add",y,x,m.getLocal("idx1")),m.call(a+"_sub",y,x,m.getLocal("idx2")),m.call(c+"_mul",b,m.getLocal("pwm"),b),m.setLocal("j",m.i32_add(m.getLocal("j"),m.i32_const(1))),m.br(0))),m.setLocal("k",m.i32_add(m.getLocal("k"),m.getLocal("m"))),m.br(0))),m.setLocal("s",m.i32_add(m.getLocal("s"),m.i32_const(1))),m.br(0))),m.call(e+"__fftFinal",m.getLocal("px"),m.getLocal("bits"),m.getLocal("reverse"),m.getLocal("mulFactor"))),(F=t.addFunction(e+"__log2")).addParam("n","i32"),F.setReturnType("i32"),F.addLocal("bits","i32"),F.addLocal("aux","i32"),w=F.getCodeBuilder(),F.addCode(w.setLocal("aux",w.i32_shr_u(w.getLocal("n"),w.i32_const(1)))),F.addCode(w.setLocal("bits",w.i32_const(0))),F.addCode(w.block(w.loop(w.br_if(1,w.i32_eqz(w.getLocal("aux"))),w.setLocal("aux",w.i32_shr_u(w.getLocal("aux"),w.i32_const(1))),w.setLocal("bits",w.i32_add(w.getLocal("bits"),w.i32_const(1))),w.br(0)))),F.addCode(w.if(w.i32_ne(w.getLocal("n"),w.i32_shl(w.i32_const(1),w.getLocal("bits"))),w.unreachable())),F.addCode(w.if(w.i32_gt_u(w.getLocal("bits"),w.i32_const(to)),w.unreachable())),F.addCode(w.getLocal("bits")),(B=t.addFunction(e+"_fft")).addParam("px","i32"),B.addParam("n","i32"),B.addLocal("bits","i32"),v=(C=B.getCodeBuilder()).i32_const(t.alloc(tt)),B.addCode(C.setLocal("bits",C.call(e+"__log2",C.getLocal("n"))),C.call(c+"_one",v),C.call(e+"_rawfft",C.getLocal("px"),C.getLocal("bits"),C.i32_const(0),v)),(A=t.addFunction(e+"_ifft")).addParam("px","i32"),A.addParam("n","i32"),A.addLocal("bits","i32"),A.addLocal("pInv2","i32"),I=A.getCodeBuilder(),A.addCode(I.setLocal("bits",I.call(e+"__log2",I.getLocal("n"))),I.setLocal("pInv2",I.i32_add(I.i32_const(tu),I.i32_mul(I.getLocal("bits"),I.i32_const(tt)))),I.call(e+"_rawfft",I.getLocal("px"),I.getLocal("bits"),I.i32_const(1),I.getLocal("pInv2"))),(E=t.addFunction(e+"_fftJoin")).addParam("pBuff1","i32"),E.addParam("pBuff2","i32"),E.addParam("n","i32"),E.addParam("first","i32"),E.addParam("inc","i32"),E.addLocal("idx1","i32"),E.addLocal("idx2","i32"),E.addLocal("i","i32"),O=(P=E.getCodeBuilder()).i32_const(t.alloc(tt)),S=P.i32_const(t.alloc(te)),q=P.i32_const(t.alloc(te)),E.addCode(P.call(c+"_copy",P.getLocal("first"),O),P.setLocal("i",P.i32_const(0)),P.block(P.loop(P.br_if(1,P.i32_eq(P.getLocal("i"),P.getLocal("n"))),P.setLocal("idx1",P.i32_add(P.getLocal("pBuff1"),P.i32_mul(P.getLocal("i"),P.i32_const(te)))),P.setLocal("idx2",P.i32_add(P.getLocal("pBuff2"),P.i32_mul(P.getLocal("i"),P.i32_const(te)))),P.call(r,P.getLocal("idx2"),O,S),P.call(a+"_copy",P.getLocal("idx1"),q),P.call(a+"_add",q,S,P.getLocal("idx1")),P.call(a+"_sub",q,S,P.getLocal("idx2")),P.call(c+"_mul",O,P.getLocal("inc"),O),P.setLocal("i",P.i32_add(P.getLocal("i"),P.i32_const(1))),P.br(0)))),(z=t.addFunction(e+"_fftJoinExt")).addParam("pBuff1","i32"),z.addParam("pBuff2","i32"),z.addParam("n","i32"),z.addParam("first","i32"),z.addParam("inc","i32"),z.addParam("totalBits","i32"),z.addLocal("idx1","i32"),z.addLocal("idx2","i32"),z.addLocal("i","i32"),z.addLocal("pShiftToM","i32"),T=(M=z.getCodeBuilder()).i32_const(t.alloc(tt)),R=M.i32_const(t.alloc(te)),z.addCode(M.setLocal("pShiftToM",M.i32_add(M.i32_const(tL),M.i32_mul(M.getLocal("totalBits"),M.i32_const(tt)))),M.call(c+"_copy",M.getLocal("first"),T),M.setLocal("i",M.i32_const(0)),M.block(M.loop(M.br_if(1,M.i32_eq(M.getLocal("i"),M.getLocal("n"))),M.setLocal("idx1",M.i32_add(M.getLocal("pBuff1"),M.i32_mul(M.getLocal("i"),M.i32_const(te)))),M.setLocal("idx2",M.i32_add(M.getLocal("pBuff2"),M.i32_mul(M.getLocal("i"),M.i32_const(te)))),M.call(a+"_add",M.getLocal("idx1"),M.getLocal("idx2"),R),M.call(r,M.getLocal("idx2"),M.getLocal("pShiftToM"),M.getLocal("idx2")),M.call(a+"_add",M.getLocal("idx1"),M.getLocal("idx2"),M.getLocal("idx2")),M.call(r,M.getLocal("idx2"),T,M.getLocal("idx2")),M.call(a+"_copy",R,M.getLocal("idx1")),M.call(c+"_mul",T,M.getLocal("inc"),T),M.setLocal("i",M.i32_add(M.getLocal("i"),M.i32_const(1))),M.br(0)))),(U=t.addFunction(e+"_fftJoinExtInv")).addParam("pBuff1","i32"),U.addParam("pBuff2","i32"),U.addParam("n","i32"),U.addParam("first","i32"),U.addParam("inc","i32"),U.addParam("totalBits","i32"),U.addLocal("idx1","i32"),U.addLocal("idx2","i32"),U.addLocal("i","i32"),U.addLocal("pShiftToM","i32"),U.addLocal("pSConst","i32"),k=(N=U.getCodeBuilder()).i32_const(t.alloc(tt)),j=N.i32_const(t.alloc(te)),U.addCode(N.setLocal("pShiftToM",N.i32_add(N.i32_const(tL),N.i32_mul(N.getLocal("totalBits"),N.i32_const(tt)))),N.setLocal("pSConst",N.i32_add(N.i32_const(tm),N.i32_mul(N.getLocal("totalBits"),N.i32_const(tt)))),N.call(c+"_copy",N.getLocal("first"),k),N.setLocal("i",N.i32_const(0)),N.block(N.loop(N.br_if(1,N.i32_eq(N.getLocal("i"),N.getLocal("n"))),N.setLocal("idx1",N.i32_add(N.getLocal("pBuff1"),N.i32_mul(N.getLocal("i"),N.i32_const(te)))),N.setLocal("idx2",N.i32_add(N.getLocal("pBuff2"),N.i32_mul(N.getLocal("i"),N.i32_const(te)))),N.call(r,N.getLocal("idx2"),k,j),N.call(a+"_sub",N.getLocal("idx1"),j,N.getLocal("idx2")),N.call(r,N.getLocal("idx2"),N.getLocal("pSConst"),N.getLocal("idx2")),N.call(r,N.getLocal("idx1"),N.getLocal("pShiftToM"),N.getLocal("idx1")),N.call(a+"_sub",j,N.getLocal("idx1"),N.getLocal("idx1")),N.call(r,N.getLocal("idx1"),N.getLocal("pSConst"),N.getLocal("idx1")),N.call(c+"_mul",k,N.getLocal("inc"),k),N.setLocal("i",N.i32_add(N.getLocal("i"),N.i32_const(1))),N.br(0)))),(G=t.addFunction(e+"_fftMix")).addParam("pBuff","i32"),G.addParam("n","i32"),G.addParam("exp","i32"),G.addLocal("nGroups","i32"),G.addLocal("nPerGroup","i32"),G.addLocal("nPerGroupDiv2","i32"),G.addLocal("pairOffset","i32"),G.addLocal("idx1","i32"),G.addLocal("idx2","i32"),G.addLocal("i","i32"),G.addLocal("j","i32"),G.addLocal("pwm","i32"),D=($=G.getCodeBuilder()).i32_const(t.alloc(tt)),W=$.i32_const(t.alloc(te)),Z=$.i32_const(t.alloc(te)),G.addCode($.setLocal("nPerGroup",$.i32_shl($.i32_const(1),$.getLocal("exp"))),$.setLocal("nPerGroupDiv2",$.i32_shr_u($.getLocal("nPerGroup"),$.i32_const(1))),$.setLocal("nGroups",$.i32_shr_u($.getLocal("n"),$.getLocal("exp"))),$.setLocal("pairOffset",$.i32_mul($.getLocal("nPerGroupDiv2"),$.i32_const(te))),$.setLocal("pwm",$.i32_add($.i32_const(td),$.i32_mul($.getLocal("exp"),$.i32_const(tt)))),$.setLocal("i",$.i32_const(0)),$.block($.loop($.br_if(1,$.i32_eq($.getLocal("i"),$.getLocal("nGroups"))),$.call(c+"_one",D),$.setLocal("j",$.i32_const(0)),$.block($.loop($.br_if(1,$.i32_eq($.getLocal("j"),$.getLocal("nPerGroupDiv2"))),$.setLocal("idx1",$.i32_add($.getLocal("pBuff"),$.i32_mul($.i32_add($.i32_mul($.getLocal("i"),$.getLocal("nPerGroup")),$.getLocal("j")),$.i32_const(te)))),$.setLocal("idx2",$.i32_add($.getLocal("idx1"),$.getLocal("pairOffset"))),$.call(r,$.getLocal("idx2"),D,W),$.call(a+"_copy",$.getLocal("idx1"),Z),$.call(a+"_add",Z,W,$.getLocal("idx1")),$.call(a+"_sub",Z,W,$.getLocal("idx2")),$.call(c+"_mul",D,$.getLocal("pwm"),D),$.setLocal("j",$.i32_add($.getLocal("j"),$.i32_const(1))),$.br(0))),$.setLocal("i",$.i32_add($.getLocal("i"),$.i32_const(1))),$.br(0)))),(V=t.addFunction(e+"_fftFinal")).addParam("pBuff","i32"),V.addParam("n","i32"),V.addParam("factor","i32"),V.addLocal("idx1","i32"),V.addLocal("idx2","i32"),V.addLocal("i","i32"),V.addLocal("ndiv2","i32"),Q=(J=V.getCodeBuilder()).i32_const(t.alloc(te)),V.addCode(J.setLocal("ndiv2",J.i32_shr_u(J.getLocal("n"),J.i32_const(1))),J.if(J.i32_and(J.getLocal("n"),J.i32_const(1)),J.call(r,J.i32_add(J.getLocal("pBuff"),J.i32_mul(J.getLocal("ndiv2"),J.i32_const(te))),J.getLocal("factor"),J.i32_add(J.getLocal("pBuff"),J.i32_mul(J.getLocal("ndiv2"),J.i32_const(te))))),J.setLocal("i",J.i32_const(0)),J.block(J.loop(J.br_if(1,J.i32_ge_u(J.getLocal("i"),J.getLocal("ndiv2"))),J.setLocal("idx1",J.i32_add(J.getLocal("pBuff"),J.i32_mul(J.getLocal("i"),J.i32_const(te)))),J.setLocal("idx2",J.i32_add(J.getLocal("pBuff"),J.i32_mul(J.i32_sub(J.i32_sub(J.getLocal("n"),J.i32_const(1)),J.getLocal("i")),J.i32_const(te)))),J.call(r,J.getLocal("idx2"),J.getLocal("factor"),Q),J.call(r,J.getLocal("idx1"),J.getLocal("factor"),J.getLocal("idx2")),J.call(a+"_copy",Q,J.getLocal("idx1")),J.setLocal("i",J.i32_add(J.getLocal("i"),J.i32_const(1))),J.br(0)))),(H=t.addFunction(e+"_prepareLagrangeEvaluation")).addParam("pBuff1","i32"),H.addParam("pBuff2","i32"),H.addParam("n","i32"),H.addParam("first","i32"),H.addParam("inc","i32"),H.addParam("totalBits","i32"),H.addLocal("idx1","i32"),H.addLocal("idx2","i32"),H.addLocal("i","i32"),H.addLocal("pShiftToM","i32"),H.addLocal("pSConst","i32"),X=(K=H.getCodeBuilder()).i32_const(t.alloc(tt)),Y=K.i32_const(t.alloc(te)),H.addCode(K.setLocal("pShiftToM",K.i32_add(K.i32_const(tL),K.i32_mul(K.getLocal("totalBits"),K.i32_const(tt)))),K.setLocal("pSConst",K.i32_add(K.i32_const(tm),K.i32_mul(K.getLocal("totalBits"),K.i32_const(tt)))),K.call(c+"_copy",K.getLocal("first"),X),K.setLocal("i",K.i32_const(0)),K.block(K.loop(K.br_if(1,K.i32_eq(K.getLocal("i"),K.getLocal("n"))),K.setLocal("idx1",K.i32_add(K.getLocal("pBuff1"),K.i32_mul(K.getLocal("i"),K.i32_const(te)))),K.setLocal("idx2",K.i32_add(K.getLocal("pBuff2"),K.i32_mul(K.getLocal("i"),K.i32_const(te)))),K.call(r,K.getLocal("idx1"),K.getLocal("pShiftToM"),Y),K.call(a+"_sub",K.getLocal("idx2"),Y,Y),K.call(a+"_sub",K.getLocal("idx1"),K.getLocal("idx2"),K.getLocal("idx2")),K.call(r,Y,K.getLocal("pSConst"),K.getLocal("idx1")),K.call(r,K.getLocal("idx2"),X,K.getLocal("idx2")),K.call(c+"_mul",X,K.getLocal("inc"),X),K.setLocal("i",K.i32_add(K.getLocal("i"),K.i32_const(1))),K.br(0)))),t.exportFunction(e+"_fft"),t.exportFunction(e+"_ifft"),t.exportFunction(e+"_rawfft"),t.exportFunction(e+"_fftJoin"),t.exportFunction(e+"_fftJoinExt"),t.exportFunction(e+"_fftJoinExtInv"),t.exportFunction(e+"_fftMix"),t.exportFunction(e+"_fftFinal"),t.exportFunction(e+"_prepareLagrangeEvaluation")}},99728,(t,e,a)=>{e.exports=function(t,e,a){let i,o,l,n,c,r=8*t.modules[a].n64;return(i=t.addFunction(e+"_zero")).addParam("px","i32"),i.addParam("n","i32"),i.addLocal("lastp","i32"),i.addLocal("p","i32"),o=i.getCodeBuilder(),i.addCode(o.setLocal("p",o.getLocal("px")),o.setLocal("lastp",o.i32_add(o.getLocal("px"),o.i32_mul(o.getLocal("n"),o.i32_const(r)))),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("p"),o.getLocal("lastp"))),o.call(a+"_zero",o.getLocal("p")),o.setLocal("p",o.i32_add(o.getLocal("p"),o.i32_const(r))),o.br(0)))),(l=t.addFunction(e+"_constructLC")).addParam("ppolynomials","i32"),l.addParam("psignals","i32"),l.addParam("nSignals","i32"),l.addParam("pres","i32"),l.addLocal("i","i32"),l.addLocal("j","i32"),l.addLocal("pp","i32"),l.addLocal("ps","i32"),l.addLocal("pd","i32"),l.addLocal("ncoefs","i32"),c=(n=l.getCodeBuilder()).i32_const(t.alloc(r)),l.addCode(n.setLocal("i",n.i32_const(0)),n.setLocal("pp",n.getLocal("ppolynomials")),n.setLocal("ps",n.getLocal("psignals")),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("i"),n.getLocal("nSignals"))),n.setLocal("ncoefs",n.i32_load(n.getLocal("pp"))),n.setLocal("pp",n.i32_add(n.getLocal("pp"),n.i32_const(4))),n.setLocal("j",n.i32_const(0)),n.block(n.loop(n.br_if(1,n.i32_eq(n.getLocal("j"),n.getLocal("ncoefs"))),n.setLocal("pd",n.i32_add(n.getLocal("pres"),n.i32_mul(n.i32_load(n.getLocal("pp")),n.i32_const(r)))),n.setLocal("pp",n.i32_add(n.getLocal("pp"),n.i32_const(4))),n.call(a+"_mul",n.getLocal("ps"),n.getLocal("pp"),c),n.call(a+"_add",c,n.getLocal("pd"),n.getLocal("pd")),n.setLocal("pp",n.i32_add(n.getLocal("pp"),n.i32_const(r))),n.setLocal("j",n.i32_add(n.getLocal("j"),n.i32_const(1))),n.br(0))),n.setLocal("ps",n.i32_add(n.getLocal("ps"),n.i32_const(r))),n.setLocal("i",n.i32_add(n.getLocal("i"),n.i32_const(1))),n.br(0)))),t.exportFunction(e+"_zero"),t.exportFunction(e+"_constructLC"),e}},52702,(t,e,a)=>{e.exports=function(t,e,a){let i,o,l,n,c,r,s,d,_=8*t.modules[a].n64;return(i=t.addFunction(e+"_buildABC")).addParam("pCoefs","i32"),i.addParam("nCoefs","i32"),i.addParam("pWitness","i32"),i.addParam("pA","i32"),i.addParam("pB","i32"),i.addParam("pC","i32"),i.addParam("offsetOut","i32"),i.addParam("nOut","i32"),i.addParam("offsetWitness","i32"),i.addParam("nWitness","i32"),i.addLocal("it","i32"),i.addLocal("ita","i32"),i.addLocal("itb","i32"),i.addLocal("last","i32"),i.addLocal("m","i32"),i.addLocal("c","i32"),i.addLocal("s","i32"),i.addLocal("pOut","i32"),l=(o=i.getCodeBuilder()).i32_const(t.alloc(_)),i.addCode(o.setLocal("ita",o.getLocal("pA")),o.setLocal("itb",o.getLocal("pB")),o.setLocal("last",o.i32_add(o.getLocal("pA"),o.i32_mul(o.getLocal("nOut"),o.i32_const(_)))),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("ita"),o.getLocal("last"))),o.call(a+"_zero",o.getLocal("ita")),o.call(a+"_zero",o.getLocal("itb")),o.setLocal("ita",o.i32_add(o.getLocal("ita"),o.i32_const(_))),o.setLocal("itb",o.i32_add(o.getLocal("itb"),o.i32_const(_))),o.br(0))),o.setLocal("it",o.getLocal("pCoefs")),o.setLocal("last",o.i32_add(o.getLocal("pCoefs"),o.i32_mul(o.getLocal("nCoefs"),o.i32_const(_+12)))),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("it"),o.getLocal("last"))),o.setLocal("s",o.i32_load(o.getLocal("it"),8)),o.if(o.i32_or(o.i32_lt_u(o.getLocal("s"),o.getLocal("offsetWitness")),o.i32_ge_u(o.getLocal("s"),o.i32_add(o.getLocal("offsetWitness"),o.getLocal("nWitness")))),[...o.setLocal("it",o.i32_add(o.getLocal("it"),o.i32_const(_+12))),...o.br(1)]),o.setLocal("m",o.i32_load(o.getLocal("it"))),o.if(o.i32_eq(o.getLocal("m"),o.i32_const(0)),o.setLocal("pOut",o.getLocal("pA")),o.if(o.i32_eq(o.getLocal("m"),o.i32_const(1)),o.setLocal("pOut",o.getLocal("pB")),[...o.setLocal("it",o.i32_add(o.getLocal("it"),o.i32_const(_+12))),...o.br(1)])),o.setLocal("c",o.i32_load(o.getLocal("it"),4)),o.if(o.i32_or(o.i32_lt_u(o.getLocal("c"),o.getLocal("offsetOut")),o.i32_ge_u(o.getLocal("c"),o.i32_add(o.getLocal("offsetOut"),o.getLocal("nOut")))),[...o.setLocal("it",o.i32_add(o.getLocal("it"),o.i32_const(_+12))),...o.br(1)]),o.setLocal("pOut",o.i32_add(o.getLocal("pOut"),o.i32_mul(o.i32_sub(o.getLocal("c"),o.getLocal("offsetOut")),o.i32_const(_)))),o.call(a+"_mul",o.i32_add(o.getLocal("pWitness"),o.i32_mul(o.i32_sub(o.getLocal("s"),o.getLocal("offsetWitness")),o.i32_const(_))),o.i32_add(o.getLocal("it"),o.i32_const(12)),l),o.call(a+"_add",o.getLocal("pOut"),l,o.getLocal("pOut")),o.setLocal("it",o.i32_add(o.getLocal("it"),o.i32_const(_+12))),o.br(0))),o.setLocal("ita",o.getLocal("pA")),o.setLocal("itb",o.getLocal("pB")),o.setLocal("it",o.getLocal("pC")),o.setLocal("last",o.i32_add(o.getLocal("pA"),o.i32_mul(o.getLocal("nOut"),o.i32_const(_)))),o.block(o.loop(o.br_if(1,o.i32_eq(o.getLocal("ita"),o.getLocal("last"))),o.call(a+"_mul",o.getLocal("ita"),o.getLocal("itb"),o.getLocal("it")),o.setLocal("ita",o.i32_add(o.getLocal("ita"),o.i32_const(_))),o.setLocal("itb",o.i32_add(o.getLocal("itb"),o.i32_const(_))),o.setLocal("it",o.i32_add(o.getLocal("it"),o.i32_const(_))),o.br(0)))),(n=t.addFunction(e+"_joinABC")).addParam("pA","i32"),n.addParam("pB","i32"),n.addParam("pC","i32"),n.addParam("n","i32"),n.addParam("pP","i32"),n.addLocal("ita","i32"),n.addLocal("itb","i32"),n.addLocal("itc","i32"),n.addLocal("itp","i32"),n.addLocal("last","i32"),r=(c=n.getCodeBuilder()).i32_const(t.alloc(_)),n.addCode(c.setLocal("ita",c.getLocal("pA")),c.setLocal("itb",c.getLocal("pB")),c.setLocal("itc",c.getLocal("pC")),c.setLocal("itp",c.getLocal("pP")),c.setLocal("last",c.i32_add(c.getLocal("pA"),c.i32_mul(c.getLocal("n"),c.i32_const(_)))),c.block(c.loop(c.br_if(1,c.i32_eq(c.getLocal("ita"),c.getLocal("last"))),c.call(a+"_mul",c.getLocal("ita"),c.getLocal("itb"),r),c.call(a+"_sub",r,c.getLocal("itc"),c.getLocal("itp")),c.setLocal("ita",c.i32_add(c.getLocal("ita"),c.i32_const(_))),c.setLocal("itb",c.i32_add(c.getLocal("itb"),c.i32_const(_))),c.setLocal("itc",c.i32_add(c.getLocal("itc"),c.i32_const(_))),c.setLocal("itp",c.i32_add(c.getLocal("itp"),c.i32_const(_))),c.br(0)))),(s=t.addFunction(e+"_batchAdd")).addParam("pa","i32"),s.addParam("pb","i32"),s.addParam("n","i32"),s.addParam("pr","i32"),s.addLocal("ita","i32"),s.addLocal("itb","i32"),s.addLocal("itr","i32"),s.addLocal("last","i32"),d=s.getCodeBuilder(),s.addCode(d.setLocal("ita",d.getLocal("pa")),d.setLocal("itb",d.getLocal("pb")),d.setLocal("itr",d.getLocal("pr")),d.setLocal("last",d.i32_add(d.getLocal("pa"),d.i32_mul(d.getLocal("n"),d.i32_const(_)))),d.block(d.loop(d.br_if(1,d.i32_eq(d.getLocal("ita"),d.getLocal("last"))),d.call(a+"_add",d.getLocal("ita"),d.getLocal("itb"),d.getLocal("itr")),d.setLocal("ita",d.i32_add(d.getLocal("ita"),d.i32_const(_))),d.setLocal("itb",d.i32_add(d.getLocal("itb"),d.i32_const(_))),d.setLocal("itr",d.i32_add(d.getLocal("itr"),d.i32_const(_))),d.br(0)))),t.exportFunction(e+"_buildABC"),t.exportFunction(e+"_joinABC"),t.exportFunction(e+"_batchAdd"),e}},78405,(t,e,a)=>{e.exports=function(t,e,a,i,o,l,n,c){let r=t.addFunction(e);r.addParam("pIn","i32"),r.addParam("n","i32"),r.addParam("pFirst","i32"),r.addParam("pInc","i32"),r.addParam("pOut","i32"),r.addLocal("pOldFree","i32"),r.addLocal("i","i32"),r.addLocal("pFrom","i32"),r.addLocal("pTo","i32");let s=r.getCodeBuilder(),d=s.i32_const(t.alloc(n));r.addCode(s.setLocal("pFrom",s.getLocal("pIn")),s.setLocal("pTo",s.getLocal("pOut"))),r.addCode(s.call(i+"_copy",s.getLocal("pFirst"),d)),r.addCode(s.setLocal("i",s.i32_const(0)),s.block(s.loop(s.br_if(1,s.i32_eq(s.getLocal("i"),s.getLocal("n"))),s.call(c,s.getLocal("pFrom"),d,s.getLocal("pTo")),s.setLocal("pFrom",s.i32_add(s.getLocal("pFrom"),s.i32_const(o))),s.setLocal("pTo",s.i32_add(s.getLocal("pTo"),s.i32_const(l))),s.call(i+"_mul",d,s.getLocal("pInc"),d),s.setLocal("i",s.i32_add(s.getLocal("i"),s.i32_const(1))),s.br(0)))),t.exportFunction(e)}},54961,(t,e,a)=>{let i=t.r(4122),o=t.r(68469),l=t.r(13009),n=t.r(69977),c=t.r(60628),r=t.r(3196),s=t.r(29191),d=t.r(99728),_=t.r(52702),f=t.r(78405),{bitLength:u,modInv:g,isOdd:p,isNegative:h}=t.r(3926);e.exports=function(t,e){let a,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q,H,K,X,Y,tt,te,ta,ti,to,tl,tn,tc,tr,ts,td,t_,tf,tu,tg,tp,th,tL,tm,tb,tx,ty,tF,tw,tB,tC,tv,tA,tI,tE,tP,tO,tS,tq,tz,tM,tT,tR,tU,tN,tk,tj,tG,t$,tD,tW,tZ,tV,tJ,tQ,tH,tK,tX,tY,t2,t3,t0,t1,t4,t6,t8,t7,t5,t9,et,ee,ea,ei,eo,el,en,ec,er,es,ed,e_,ef,eu,eg,ep,eh,eL,em,eb,ex,ey,eF,ew,eB,eC,ev,eA,eI,eE,eP,eO,eS,eq,ez,eM,eT,eR,eU,eN,ek,ej,eG,e$,eD,eW,eZ,eV,eJ,eQ,eH,eK,eX,eY,e2,e3,e0,e1,e4,e6,e8,e7,e5,e9,at,ae,aa,ai,ao,al,an,ac,ar,as,ad,a_,af,au,ag,ap,ah,aL,am,ab,ax,ay,aF,aw,aB,aC,av=e||"bn128";if(t.modules[av])return av;let aA=Math.floor((u(0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n-1n)-1)/64)+1,aI=8*aA,aE=2*aI,aP=12*aI,aO=t.alloc(i.bigInt2BytesLE(0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n,aI)),aS=o(t,0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n,"f1m");l(t,0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n,"fr","frm");let aq=t.alloc(i.bigInt2BytesLE(aN(3n),aI)),az=r(t,"g1m","f1m",aq);s(t,"frm","frm","frm","frm_mul"),d(t,"pol","frm"),_(t,"qap","frm");let aM=n(t,"f1m_neg","f2m","f1m"),aT=t.alloc([...i.bigInt2BytesLE(aN(0x2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5n),aI),...i.bigInt2BytesLE(aN(0x9713b03af0fed4cd2cafadeed8fdf4a74fa084e52d1852e4a2bd0685c315d2n),aI)]),aR=r(t,"g2m","f2m",aT);function aU(e,a){let i=t.addFunction(e);i.addParam("pG","i32"),i.addParam("pFr","i32"),i.addParam("pr","i32");let o=i.getCodeBuilder(),l=o.i32_const(t.alloc(aI));i.addCode(o.call("frm_fromMontgomery",o.getLocal("pFr"),l),o.call(a,o.getLocal("pG"),l,o.i32_const(aI),o.getLocal("pr"))),t.exportFunction(e)}function aN(t){return BigInt(t)*(1n<<BigInt(8*aI))%0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n}aU("g1m_timesFr","g1m_timesScalar"),s(t,"g1m","g1m","frm","g1m_timesFr"),aU("g2m_timesFr","g2m_timesScalar"),s(t,"g2m","g2m","frm","g2m_timesFr"),aU("g1m_timesFrAffine","g1m_timesScalarAffine"),aU("g2m_timesFrAffine","g2m_timesScalarAffine"),f(t,"frm_batchApplyKey","fmr","frm",aI,aI,aI,"frm_mul"),f(t,"g1m_batchApplyKey","g1m","frm",3*aI,3*aI,aI,"g1m_timesFr"),f(t,"g1m_batchApplyKeyMixed","g1m","frm",2*aI,3*aI,aI,"g1m_timesFrAffine"),f(t,"g2m_batchApplyKey","g2m","frm",2*aI*3,3*aI*2,aI,"g2m_timesFr"),f(t,"g2m_batchApplyKeyMixed","g2m","frm",2*aI*2,3*aI*2,aI,"g2m_timesFrAffine");let ak=t.alloc([...i.bigInt2BytesLE(aN(1n),aI),...i.bigInt2BytesLE(aN(2n),aI),...i.bigInt2BytesLE(aN(1n),aI)]),aj=t.alloc([...i.bigInt2BytesLE(aN(0n),aI),...i.bigInt2BytesLE(aN(1n),aI),...i.bigInt2BytesLE(aN(0n),aI)]),aG=[[0x1800deef121f1e76426a00665e5c4479674322d4f75edadd46debd5cd992f6edn,0x198e9393920d483a7260bfb731fb5d25f1aa493335a9e71297e485b7aef312c2n],[0x12c85ea5db8c6deb4aab71808dcb408fe3d1e7690c43d37b4ce6cc0166fa7daan,0x90689d0585ff075ec9e99ad690c3395bc4b313370b38ef355acdadcd122975bn],[1n,0n]],a$=t.alloc([...i.bigInt2BytesLE(aN(aG[0][0]),aI),...i.bigInt2BytesLE(aN(aG[0][1]),aI),...i.bigInt2BytesLE(aN(aG[1][0]),aI),...i.bigInt2BytesLE(aN(aG[1][1]),aI),...i.bigInt2BytesLE(aN(aG[2][0]),aI),...i.bigInt2BytesLE(aN(aG[2][1]),aI)]),aD=[[0n,0n],[1n,0n],[0n,0n]],aW=t.alloc([...i.bigInt2BytesLE(aN(aD[0][0]),aI),...i.bigInt2BytesLE(aN(aD[0][1]),aI),...i.bigInt2BytesLE(aN(aD[1][0]),aI),...i.bigInt2BytesLE(aN(aD[1][1]),aI),...i.bigInt2BytesLE(aN(aD[2][0]),aI),...i.bigInt2BytesLE(aN(aD[2][1]),aI)]),aZ=t.alloc([...i.bigInt2BytesLE(aN(1),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI),...i.bigInt2BytesLE(aN(0),aI)]),aV=t.alloc([...i.bigInt2BytesLE(aN(9),aI),...i.bigInt2BytesLE(aN(1),aI)]),aJ=t.alloc([...i.bigInt2BytesLE(aN(g(2n,0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n)),aI),...i.bigInt2BytesLE(0n,aI)]),aQ=t.alloc([...i.bigInt2BytesLE(aN(0x2b149d40ceb8aaae81be18991be06ac3b5b4c5e559dbefa33267e6dc24a138e5n),aI),...i.bigInt2BytesLE(aN(0x9713b03af0fed4cd2cafadeed8fdf4a74fa084e52d1852e4a2bd0685c315d2n),aI)]);(a=t.addFunction(av+"_mulNR6")).addParam("x","i32"),a.addParam("pr","i32"),L=a.getCodeBuilder(),a.addCode(L.call(aM+"_mul",L.i32_const(aV),L.getLocal("x"),L.getLocal("pr")));let aH=c(t,av+"_mulNR6","f6m","f2m");(m=t.addFunction(av+"_mulNR12")).addParam("x","i32"),m.addParam("pr","i32"),b=m.getCodeBuilder(),m.addCode(b.call(aM+"_mul",b.i32_const(aV),b.i32_add(b.getLocal("x"),b.i32_const(4*aI)),b.getLocal("pr")),b.call(aM+"_copy",b.getLocal("x"),b.i32_add(b.getLocal("pr"),b.i32_const(2*aI))),b.call(aM+"_copy",b.i32_add(b.getLocal("x"),b.i32_const(2*aI)),b.i32_add(b.getLocal("pr"),b.i32_const(4*aI))));let aK=n(t,av+"_mulNR12","ftm",aH),aX=function(t){let e=0x19d797039be763ba8n,a=[];for(;e>0n;)p(e)?a.push(1):a.push(0),e>>=1n;return a}(0x19d797039be763ba8n),aY=t.alloc(aX),a2=3*aE,a3=aX.length-1,a0=aX.reduce((t,e)=>t+ +(0!=e),0),a1=6*aI,a4=3*aI*2+(a0+a3+1)*a2;t.modules[av]={n64:aA,pG1gen:ak,pG1zero:aj,pG1b:aq,pG2gen:a$,pG2zero:aW,pG2b:aT,pq:t.modules.f1m.pq,pr:aO,pOneT:aZ,prePSize:a1,preQSize:a4,r:0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001n.toString(),q:0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n.toString()};let a6=t.alloc(a1),a8=t.alloc(a4);(x=t.addFunction(av+"_prepAddStep")).addParam("pQ","i32"),x.addParam("pR","i32"),x.addParam("pCoef","i32"),F=(y=x.getCodeBuilder()).getLocal("pQ"),w=y.i32_add(y.getLocal("pQ"),y.i32_const(aE)),B=y.getLocal("pR"),C=y.i32_add(y.getLocal("pR"),y.i32_const(aE)),v=y.i32_add(y.getLocal("pR"),y.i32_const(2*aE)),A=y.getLocal("pCoef"),I=y.i32_add(y.getLocal("pCoef"),y.i32_const(aE)),E=y.i32_add(y.getLocal("pCoef"),y.i32_const(2*aE)),P=y.i32_const(t.alloc(aE)),O=y.i32_const(t.alloc(aE)),S=y.i32_const(t.alloc(aE)),q=y.i32_const(t.alloc(aE)),z=y.i32_const(t.alloc(aE)),M=y.i32_const(t.alloc(aE)),T=y.i32_const(t.alloc(aE)),x.addCode(y.call(aM+"_mul",F,v,I),y.call(aM+"_sub",B,I,I),y.call(aM+"_mul",w,v,P),y.call(aM+"_sub",C,P,P),y.call(aM+"_square",I,O),y.call(aM+"_square",P,S),y.call(aM+"_mul",I,O,q),y.call(aM+"_mul",B,O,z),y.call(aM+"_add",z,z,T),y.call(aM+"_mul",v,S,M),y.call(aM+"_add",q,M,M),y.call(aM+"_sub",M,T,M),y.call(aM+"_mul",I,M,B),y.call(aM+"_mul",q,C,C),y.call(aM+"_sub",z,M,T),y.call(aM+"_mul",P,T,T),y.call(aM+"_sub",T,C,C),y.call(aM+"_mul",v,q,v),y.call(aM+"_mul",I,w,T),y.call(aM+"_mul",P,F,A),y.call(aM+"_sub",A,T,A),y.call(aM+"_mul",A,y.i32_const(aV),A),y.call(aM+"_neg",P,E)),(R=t.addFunction(av+"_prepDblStep")).addParam("pR","i32"),R.addParam("pCoef","i32"),N=(U=R.getCodeBuilder()).getLocal("pR"),k=U.i32_add(U.getLocal("pR"),U.i32_const(aE)),j=U.i32_add(U.getLocal("pR"),U.i32_const(2*aE)),G=U.getLocal("pCoef"),$=U.i32_add(U.getLocal("pCoef"),U.i32_const(aE)),D=U.i32_add(U.getLocal("pCoef"),U.i32_const(2*aE)),W=U.i32_const(t.alloc(aE)),Z=U.i32_const(t.alloc(aE)),V=U.i32_const(t.alloc(aE)),J=U.i32_const(t.alloc(aE)),Q=U.i32_const(t.alloc(aE)),H=U.i32_const(t.alloc(aE)),K=U.i32_const(t.alloc(aE)),X=U.i32_const(t.alloc(aE)),Y=U.i32_const(t.alloc(aE)),tt=U.i32_const(t.alloc(aE)),te=U.i32_const(t.alloc(aE)),ta=U.i32_const(t.alloc(aE)),R.addCode(U.call(aM+"_mul",k,U.i32_const(aJ),W),U.call(aM+"_mul",N,W,W),U.call(aM+"_square",k,Z),U.call(aM+"_square",j,V),U.call(aM+"_add",V,V,J),U.call(aM+"_add",J,V,J),U.call(aM+"_mul",U.i32_const(aQ),J,Q),U.call(aM+"_add",Q,Q,H),U.call(aM+"_add",Q,H,H),U.call(aM+"_add",Z,H,K),U.call(aM+"_mul",K,U.i32_const(aJ),K),U.call(aM+"_add",Z,V,ta),U.call(aM+"_add",k,j,X),U.call(aM+"_square",X,X),U.call(aM+"_sub",X,ta,X),U.call(aM+"_sub",Q,Z,Y),U.call(aM+"_square",N,tt),U.call(aM+"_square",Q,te),U.call(aM+"_sub",Z,H,ta),U.call(aM+"_mul",W,ta,N),U.call(aM+"_add",te,te,ta),U.call(aM+"_add",te,ta,ta),U.call(aM+"_square",K,k),U.call(aM+"_sub",k,ta,k),U.call(aM+"_mul",Z,X,j),U.call(aM+"_mul",U.i32_const(aV),Y,G),U.call(aM+"_neg",X,$),U.call(aM+"_add",tt,tt,D),U.call(aM+"_add",tt,D,D)),(ti=t.addFunction(av+"_prepareG1")).addParam("pP","i32"),ti.addParam("ppreP","i32"),to=ti.getCodeBuilder(),ti.addCode(to.call(az+"_normalize",to.getLocal("pP"),to.getLocal("ppreP"))),(tl=t.addFunction(av+"_mulByQ")).addParam("p1","i32"),tl.addParam("pr","i32"),tc=(tn=tl.getCodeBuilder()).getLocal("p1"),tr=tn.i32_add(tn.getLocal("p1"),tn.i32_const(aE)),ts=tn.i32_add(tn.getLocal("p1"),tn.i32_const(2*aE)),td=tn.getLocal("pr"),t_=tn.i32_add(tn.getLocal("pr"),tn.i32_const(aE)),tf=tn.i32_add(tn.getLocal("pr"),tn.i32_const(2*aE)),tu=tn.i32_const(t.alloc([...i.bigInt2BytesLE(aN("21575463638280843010398324269430826099269044274347216827212613867836435027261"),aI),...i.bigInt2BytesLE(aN("10307601595873709700152284273816112264069230130616436755625194854815875713954"),aI)])),tg=tn.i32_const(t.alloc([...i.bigInt2BytesLE(aN("2821565182194536844548159561693502659359617185244120367078079554186484126554"),aI),...i.bigInt2BytesLE(aN("3505843767911556378687030309984248845540243509899259641013678093033130930403"),aI)])),tl.addCode(tn.call(aM+"_conjugate",tc,td),tn.call(aM+"_mul",tu,td,td),tn.call(aM+"_conjugate",tr,t_),tn.call(aM+"_mul",tg,t_,t_),tn.call(aM+"_conjugate",ts,tf)),(tp=t.addFunction(av+"_prepareG2")).addParam("pQ","i32"),tp.addParam("ppreQ","i32"),tp.addLocal("pCoef","i32"),tp.addLocal("i","i32"),tL=(th=tp.getCodeBuilder()).getLocal("pQ"),tm=t.alloc(3*aE),tb=th.i32_const(tm),tx=th.i32_const(tm),ty=th.i32_const(tm+aE),tF=th.i32_const(tm+2*aE),tw=th.i32_add(th.getLocal("ppreQ"),th.i32_const(0)),tB=th.i32_add(th.getLocal("ppreQ"),th.i32_const(aE)),tC=t.alloc(3*aE),tv=th.i32_const(tC),tA=t.alloc(3*aE),tI=th.i32_const(tA),tE=th.i32_const(tA+aE),tp.addCode(th.call(aR+"_normalize",tL,tw),th.call(aM+"_copy",tw,tx),th.call(aM+"_copy",tB,ty),th.call(aM+"_one",tF)),tp.addCode(th.setLocal("pCoef",th.i32_add(th.getLocal("ppreQ"),th.i32_const(3*aE))),th.setLocal("i",th.i32_const(aX.length-2)),th.block(th.loop(th.call(av+"_prepDblStep",tb,th.getLocal("pCoef")),th.setLocal("pCoef",th.i32_add(th.getLocal("pCoef"),th.i32_const(a2))),th.if(th.i32_load8_s(th.getLocal("i"),aY),[...th.call(av+"_prepAddStep",tw,tb,th.getLocal("pCoef")),...th.setLocal("pCoef",th.i32_add(th.getLocal("pCoef"),th.i32_const(a2)))]),th.br_if(1,th.i32_eqz(th.getLocal("i"))),th.setLocal("i",th.i32_sub(th.getLocal("i"),th.i32_const(1))),th.br(0)))),tp.addCode(th.call(av+"_mulByQ",tw,tv),th.call(av+"_mulByQ",tv,tI)),tp.addCode(th.call(aM+"_neg",tE,tE),th.call(av+"_prepAddStep",tv,tb,th.getLocal("pCoef")),th.setLocal("pCoef",th.i32_add(th.getLocal("pCoef"),th.i32_const(a2))),th.call(av+"_prepAddStep",tI,tb,th.getLocal("pCoef")),th.setLocal("pCoef",th.i32_add(th.getLocal("pCoef"),th.i32_const(a2)))),(tP=t.addFunction(av+"__mulBy024")).addParam("pEll0","i32"),tP.addParam("pEllVW","i32"),tP.addParam("pEllVV","i32"),tP.addParam("pR","i32"),tS=(tO=tP.getCodeBuilder()).getLocal("pEll0"),tq=tO.getLocal("pEllVV"),tz=tO.getLocal("pEllVW"),tM=tO.getLocal("pR"),tT=tO.i32_add(tO.getLocal("pR"),tO.i32_const(2*aI)),tR=tO.i32_add(tO.getLocal("pR"),tO.i32_const(4*aI)),tU=tO.i32_add(tO.getLocal("pR"),tO.i32_const(6*aI)),tN=tO.i32_add(tO.getLocal("pR"),tO.i32_const(8*aI)),tk=tO.i32_add(tO.getLocal("pR"),tO.i32_const(10*aI)),tj=tO.i32_const(t.alloc(aE)),tG=tO.i32_const(t.alloc(aE)),t$=tO.i32_const(t.alloc(aE)),tD=tO.i32_const(t.alloc(aE)),tW=tO.i32_const(t.alloc(aE)),tZ=tO.i32_const(t.alloc(aE)),tV=tO.i32_const(t.alloc(aE)),tJ=tO.i32_const(t.alloc(aE)),tQ=tO.i32_const(t.alloc(aE)),tH=tO.i32_const(t.alloc(aE)),tK=tO.i32_const(t.alloc(aE)),tP.addCode(tO.call(aM+"_mul",tM,tS,tV),tO.call(aM+"_mul",tR,tq,tJ),tO.call(aM+"_mul",tN,tz,tQ),tO.call(aM+"_add",tM,tN,t$),tO.call(aM+"_add",tM,tR,tG),tO.call(aM+"_add",tT,tU,tD),tO.call(aM+"_add",tD,tk,tD),tO.call(aM+"_mul",tT,tq,tH),tO.call(aM+"_add",tH,tQ,tW),tO.call(aM+"_mul",tO.i32_const(aV),tW,tZ),tO.call(aM+"_add",tZ,tV,tM),tO.call(aM+"_mul",tk,tz,tW),tO.call(aM+"_add",tH,tW,tH),tO.call(aM+"_add",tW,tJ,tW),tO.call(aM+"_mul",tO.i32_const(aV),tW,tZ),tO.call(aM+"_mul",tT,tS,tW),tO.call(aM+"_add",tH,tW,tH),tO.call(aM+"_add",tZ,tW,tT),tO.call(aM+"_add",tS,tq,tj),tO.call(aM+"_mul",tG,tj,tW),tO.call(aM+"_add",tV,tJ,tK),tO.call(aM+"_sub",tW,tK,tW),tO.call(aM+"_mul",tU,tz,tZ),tO.call(aM+"_add",tH,tZ,tH),tO.call(aM+"_add",tR,tN,tj),tO.call(aM+"_add",tW,tZ,tR),tO.call(aM+"_add",tq,tz,tG),tO.call(aM+"_mul",tG,tj,tW),tO.call(aM+"_add",tJ,tQ,tK),tO.call(aM+"_sub",tW,tK,tW),tO.call(aM+"_mul",tO.i32_const(aV),tW,tZ),tO.call(aM+"_mul",tU,tS,tW),tO.call(aM+"_add",tH,tW,tH),tO.call(aM+"_add",tZ,tW,tU),tO.call(aM+"_mul",tk,tq,tW),tO.call(aM+"_add",tH,tW,tH),tO.call(aM+"_mul",tO.i32_const(aV),tW,tZ),tO.call(aM+"_add",tS,tz,tj),tO.call(aM+"_mul",t$,tj,tW),tO.call(aM+"_add",tV,tQ,tK),tO.call(aM+"_sub",tW,tK,tW),tO.call(aM+"_add",tZ,tW,tN),tO.call(aM+"_add",tS,tq,tj),tO.call(aM+"_add",tj,tz,tj),tO.call(aM+"_mul",tD,tj,tW),tO.call(aM+"_sub",tW,tH,tk)),(tX=t.addFunction(av+"__mulBy024Old")).addParam("pEll0","i32"),tX.addParam("pEllVW","i32"),tX.addParam("pEllVV","i32"),tX.addParam("pR","i32"),t2=(tY=tX.getCodeBuilder()).getLocal("pEll0"),t3=tY.getLocal("pEllVV"),t0=tY.getLocal("pEllVW"),t1=tY.getLocal("pR"),t4=t.alloc(aP),t6=tY.i32_const(t4),t8=tY.i32_const(t4),t7=tY.i32_const(t4+aE),t5=tY.i32_const(t4+2*aE),t9=tY.i32_const(t4+3*aE),et=tY.i32_const(t4+4*aE),ee=tY.i32_const(t4+5*aE),tX.addCode(tY.call(aM+"_copy",t2,t8),tY.call(aM+"_zero",t7),tY.call(aM+"_copy",t3,t5),tY.call(aM+"_zero",t9),tY.call(aM+"_copy",t0,et),tY.call(aM+"_zero",ee),tY.call(aK+"_mul",t6,t1,t1)),(ea=t.addFunction(av+"_millerLoop")).addParam("ppreP","i32"),ea.addParam("ppreQ","i32"),ea.addParam("r","i32"),ea.addLocal("pCoef","i32"),ea.addLocal("i","i32"),eo=(ei=ea.getCodeBuilder()).getLocal("ppreP"),el=ei.i32_add(ei.getLocal("ppreP"),ei.i32_const(aI)),en=ei.getLocal("pCoef"),ec=ei.i32_add(ei.getLocal("pCoef"),ei.i32_const(aE)),er=ei.i32_add(ei.getLocal("pCoef"),ei.i32_const(2*aE)),es=t.alloc(aE),ed=ei.i32_const(es),e_=t.alloc(aE),ef=ei.i32_const(e_),eu=ei.getLocal("r"),ea.addCode(ei.call(aK+"_one",eu),ei.setLocal("pCoef",ei.i32_add(ei.getLocal("ppreQ"),ei.i32_const(3*aE))),ei.setLocal("i",ei.i32_const(aX.length-2)),ei.block(ei.loop(ei.call(aK+"_square",eu,eu),ei.call(aM+"_mul1",ec,el,ed),ei.call(aM+"_mul1",er,eo,ef),ei.call(av+"__mulBy024",en,ed,ef,eu),ei.setLocal("pCoef",ei.i32_add(ei.getLocal("pCoef"),ei.i32_const(a2))),ei.if(ei.i32_load8_s(ei.getLocal("i"),aY),[...ei.call(aM+"_mul1",ec,el,ed),...ei.call(aM+"_mul1",er,eo,ef),...ei.call(av+"__mulBy024",en,ed,ef,eu),...ei.setLocal("pCoef",ei.i32_add(ei.getLocal("pCoef"),ei.i32_const(a2)))]),ei.br_if(1,ei.i32_eqz(ei.getLocal("i"))),ei.setLocal("i",ei.i32_sub(ei.getLocal("i"),ei.i32_const(1))),ei.br(0)))),ea.addCode(ei.call(aM+"_mul1",ec,el,ed),ei.call(aM+"_mul1",er,eo,ef),ei.call(av+"__mulBy024",en,ed,ef,eu),ei.setLocal("pCoef",ei.i32_add(ei.getLocal("pCoef"),ei.i32_const(a2))),ei.call(aM+"_mul1",ec,el,ed),ei.call(aM+"_mul1",er,eo,ef),ei.call(av+"__mulBy024",en,ed,ef,eu),ei.setLocal("pCoef",ei.i32_add(ei.getLocal("pCoef"),ei.i32_const(a2))));for(let e=0;e<10;e++)!function(e){let a=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x1284b71c2865a7dfe8b99fdd76e68b605c521e08292f2176d60b35dadcc9e470n,0x246996f3b4fae7e6a6327cfe12150b8e747992778eeec7e5ca5cf05f80f362acn],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd49n,0n],[0x19dc81cfcc82e4bbefe9608cd0acaa90894cb38dbe55d24ae86f7d391ed4a67fn,0xabf8b60be77d7306cbeee33576139d7f03a5e397d439ec7694aa2bf4c0c101n],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x757cab3a41d3cdc072fc0af59c61f302cfa95859526b0d41264475e420ac20fn,0xca6b035381e35b618e9b79ba4e2606ca20b7dfd71573c93e85845e34c4a5b9cn],[0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd46n,0n],[0x1ddf9756b8cbf849cf96a5d90a9accfd3b2f4c893f42a9166615563bfbb318d7n,0xbfab77f2c36b843121dc8b86f6c4ccf2307d819d98302a771c39bb757899a9bn],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0x1687cca314aebb6dc866e529b0d4adcd0e34b703aa1bf84253b10eddb9a856c8n,0x2fb855bcd54a22b6b18456d34c0b44c0187dc4add09d90a0c58be1eae3bc3c46n],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177ffffffn,0n],[0x290c83bf3d14634db120850727bb392d6a86d50bd34b19b929bc44b896723b38n,0x23bd9e3da9136a739f668e1adc9ef7f0f575ec93f71a8df953c846338c32a1abn]]],o=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x2fb347984f7911f74c0bec3cf559b143b78cc310c2c3330c99e39557176f553dn,0x16c9e55061ebae204ba4cc8bd75a079432ae2a1d0b7c9dce1665d51c640fcba2n],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x856e078b755ef0abaff1c77959f25ac805ffd3d5d6942d37b746ee87bdcfb6dn,0x4f1de41b3d1766fa9f30e6dec26094f0fdf31bf98ff2631380cab2baaa586den],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0x28be74d4bb943f51699582b87809d9caf71614d4b0b71f3a62e913ee1dada9e4n,0x14a88ae0cb747b99c2b86abcbe01477a54f40eb4c3f6068dedae0bcec9c7aac7n]],[[1n,0n],[0x5b54f5e64eea80180f3c0b75a181e84d33365f7be94ec72848a1f55921ea762n,0x2c145edbe7fd8aee9f3a80b03b0b1c923685d2ea1bdec763c13b4711cd2b8126n],[0x59e26bcea0d48bacd4f263f1acdb5c4f5763473177fffffen,0n],[0xbc58c6611c08dab19bee0f7b5b2444ee633094575b06bcb0e1a92bc3ccbf066n,0x23d5e999e1910a12feb0f6ef0cd21d04a44a9e08737f96e55fe3ed9d730c239fn],[0x30644e72e131a0295e6dd9e7e0acccb0c28f069fbb966e3de4bd44e5607cfd48n,0n],[0x1ee972ae6a826a7d1d9da40771b6f589de1afb54342c724fa97bda050992657fn,0x10de546ff8d4ab51d2b513cdbb25772454326430418536d15721e37e70c255c9n]]],l=t.addFunction(av+"__frobeniusMap"+e);l.addParam("x","i32"),l.addParam("r","i32");let n=l.getCodeBuilder();for(let c=0;c<6;c++){let r=0==c?n.getLocal("x"):n.i32_add(n.getLocal("x"),n.i32_const(c*aE)),s=n.i32_add(n.getLocal("x"),n.i32_const(c*aE+aI)),d=0==c?n.getLocal("r"):n.i32_add(n.getLocal("r"),n.i32_const(c*aE)),_=n.i32_add(n.getLocal("r"),n.i32_const(c*aE+aI)),f=function(t,e){let a=BigInt(t[0]),i=BigInt(t[1]),o=BigInt(e[0]),l=BigInt(e[1]),n=[(a*o-i*l)%0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n,(a*l+i*o)%0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n];return h(n[0])&&(n[0]=n[0]+0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47n),n}(a[Math.floor(c/3)][e%12],o[c%3][e%6]),u=t.alloc([...i.bigInt2BytesLE(aN(f[0]),32),...i.bigInt2BytesLE(aN(f[1]),32)]);e%2==1?l.addCode(n.call(aS+"_copy",r,d),n.call(aS+"_neg",s,_),n.call(aM+"_mul",d,n.i32_const(u),d)):l.addCode(n.call(aM+"_mul",r,n.i32_const(u),d))}}(e),t.exportFunction(av+"__frobeniusMap"+e);(eg=t.addFunction(av+"_finalExponentiationOld")).addParam("x","i32"),eg.addParam("r","i32"),ep=t.alloc(i.bigInt2BytesLE(0x2f4b6dc97020fddadf107d20bc842d43bf6369b1ff6a1c71015f3f7be2e1e30a73bb94fec0daf15466b2383a5d3ec3d15ad524d8f70c54efee1bd8c3b21377e563a09a1b705887e72eceaddea3790364a61f676baaf977870e88d5c6c8fef0781361e443ae77f5b63a2a2264487f2940a8b1ddb3d15062cd0fb2015dfc6668449aed3cc48a82d0d602d268c7daab6a41294c0cc4ebe5664568dfc50e1648a45a4a1e3a5195846a3ed011a337a02088ec80e0ebae8755cfe107acf3aafb40494e406f804216bb10cf430b0f37856b42db8dc5514724ee93dfb10826f0dd4a0364b9580291d2cd65664814fde37ca80bb4ea44eacc5e641bbadf423f9a2cbf813b8d145da90029baee7ddadda71c7f3811c4105262945bba1668c3be69a3c230974d83561841d766f9c9d570bb7fbe04c7e8a6c3c760c0de81def35692da361102b6b9b2b918837fa97896e84abb40a4efb7e54523a486964b64ca86f120n,352)),eh=eg.getCodeBuilder(),eg.addCode(eh.call(aK+"_exp",eh.getLocal("x"),eh.i32_const(ep),eh.i32_const(352),eh.getLocal("r"))),(eL=t.addFunction(av+"__finalExponentiationFirstChunk")).addParam("x","i32"),eL.addParam("r","i32"),eb=(em=eL.getCodeBuilder()).getLocal("x"),ex=em.i32_add(eb,em.i32_const(6*aI)),ey=em.getLocal("r"),eF=t.alloc(aP),ew=em.i32_const(eF),eB=em.i32_const(eF+6*aI),eC=em.i32_const(t.alloc(aP)),ev=em.i32_const(t.alloc(aP)),eA=em.i32_const(t.alloc(aP)),eL.addCode(em.call(aH+"_copy",eb,ew),em.call(aH+"_neg",ex,eB),em.call(aK+"_inverse",eb,eC),em.call(aK+"_mul",ew,eC,ev),em.call(av+"__frobeniusMap2",ev,eA),em.call(aK+"_mul",ev,eA,ey)),(eI=t.addFunction(av+"__cyclotomicSquare")).addParam("x","i32"),eI.addParam("r","i32"),eP=(eE=eI.getCodeBuilder()).getLocal("x"),eO=eE.i32_add(eE.getLocal("x"),eE.i32_const(aE)),eS=eE.i32_add(eE.getLocal("x"),eE.i32_const(2*aE)),eq=eE.i32_add(eE.getLocal("x"),eE.i32_const(3*aE)),ez=eE.i32_add(eE.getLocal("x"),eE.i32_const(4*aE)),eM=eE.i32_add(eE.getLocal("x"),eE.i32_const(5*aE)),eT=eE.getLocal("r"),eR=eE.i32_add(eE.getLocal("r"),eE.i32_const(aE)),eU=eE.i32_add(eE.getLocal("r"),eE.i32_const(2*aE)),eN=eE.i32_add(eE.getLocal("r"),eE.i32_const(3*aE)),ek=eE.i32_add(eE.getLocal("r"),eE.i32_const(4*aE)),ej=eE.i32_add(eE.getLocal("r"),eE.i32_const(5*aE)),eG=eE.i32_const(t.alloc(aE)),e$=eE.i32_const(t.alloc(aE)),eD=eE.i32_const(t.alloc(aE)),eW=eE.i32_const(t.alloc(aE)),eZ=eE.i32_const(t.alloc(aE)),eV=eE.i32_const(t.alloc(aE)),eJ=eE.i32_const(t.alloc(aE)),eQ=eE.i32_const(t.alloc(aE)),eI.addCode(eE.call(aM+"_mul",eP,ez,eJ),eE.call(aM+"_mul",ez,eE.i32_const(aV),eG),eE.call(aM+"_add",eP,eG,eG),eE.call(aM+"_add",eP,ez,eQ),eE.call(aM+"_mul",eQ,eG,eG),eE.call(aM+"_mul",eE.i32_const(aV),eJ,eQ),eE.call(aM+"_add",eJ,eQ,eQ),eE.call(aM+"_sub",eG,eQ,eG),eE.call(aM+"_add",eJ,eJ,e$),eE.call(aM+"_mul",eq,eS,eJ),eE.call(aM+"_mul",eS,eE.i32_const(aV),eD),eE.call(aM+"_add",eq,eD,eD),eE.call(aM+"_add",eq,eS,eQ),eE.call(aM+"_mul",eQ,eD,eD),eE.call(aM+"_mul",eE.i32_const(aV),eJ,eQ),eE.call(aM+"_add",eJ,eQ,eQ),eE.call(aM+"_sub",eD,eQ,eD),eE.call(aM+"_add",eJ,eJ,eW),eE.call(aM+"_mul",eO,eM,eJ),eE.call(aM+"_mul",eM,eE.i32_const(aV),eZ),eE.call(aM+"_add",eO,eZ,eZ),eE.call(aM+"_add",eO,eM,eQ),eE.call(aM+"_mul",eQ,eZ,eZ),eE.call(aM+"_mul",eE.i32_const(aV),eJ,eQ),eE.call(aM+"_add",eJ,eQ,eQ),eE.call(aM+"_sub",eZ,eQ,eZ),eE.call(aM+"_add",eJ,eJ,eV),eE.call(aM+"_sub",eG,eP,eT),eE.call(aM+"_add",eT,eT,eT),eE.call(aM+"_add",eG,eT,eT),eE.call(aM+"_add",e$,ez,ek),eE.call(aM+"_add",ek,ek,ek),eE.call(aM+"_add",e$,ek,ek),eE.call(aM+"_mul",eV,eE.i32_const(aV),eQ),eE.call(aM+"_add",eQ,eq,eN),eE.call(aM+"_add",eN,eN,eN),eE.call(aM+"_add",eQ,eN,eN),eE.call(aM+"_sub",eZ,eS,eU),eE.call(aM+"_add",eU,eU,eU),eE.call(aM+"_add",eZ,eU,eU),eE.call(aM+"_sub",eD,eO,eR),eE.call(aM+"_add",eR,eR,eR),eE.call(aM+"_add",eD,eR,eR),eE.call(aM+"_add",eW,eM,ej),eE.call(aM+"_add",ej,ej,ej),eE.call(aM+"_add",eW,ej,ej)),eH=(function(t){let e=0x44e992b44a6909f1n,a=[];for(;e>0n;){if(p(e)){let t=2-Number(e%4n);a.push(t),e-=BigInt(t)}else a.push(0);e>>=1n}return a})(0x44e992b44a6909f1n).map(t=>-1==t?255:t),eK=t.alloc(eH),(eX=t.addFunction(av+"__cyclotomicExp_w0")).addParam("x","i32"),eX.addParam("r","i32"),eX.addLocal("bit","i32"),eX.addLocal("i","i32"),e2=(eY=eX.getCodeBuilder()).getLocal("x"),e3=eY.getLocal("r"),e0=eY.i32_const(t.alloc(aP)),eX.addCode(eY.call(aK+"_conjugate",e2,e0),eY.call(aK+"_one",e3),eY.if(eY.teeLocal("bit",eY.i32_load8_s(eY.i32_const(eH.length-1),eK)),eY.if(eY.i32_eq(eY.getLocal("bit"),eY.i32_const(1)),eY.call(aK+"_mul",e3,e2,e3),eY.call(aK+"_mul",e3,e0,e3))),eY.setLocal("i",eY.i32_const(eH.length-2)),eY.block(eY.loop(eY.call(av+"__cyclotomicSquare",e3,e3),eY.if(eY.teeLocal("bit",eY.i32_load8_s(eY.getLocal("i"),eK)),eY.if(eY.i32_eq(eY.getLocal("bit"),eY.i32_const(1)),eY.call(aK+"_mul",e3,e2,e3),eY.call(aK+"_mul",e3,e0,e3))),eY.br_if(1,eY.i32_eqz(eY.getLocal("i"))),eY.setLocal("i",eY.i32_sub(eY.getLocal("i"),eY.i32_const(1))),eY.br(0)))),(e1=t.addFunction(av+"__finalExponentiationLastChunk")).addParam("x","i32"),e1.addParam("r","i32"),e6=(e4=e1.getCodeBuilder()).getLocal("x"),e8=e4.getLocal("r"),e7=e4.i32_const(t.alloc(aP)),e5=e4.i32_const(t.alloc(aP)),e9=e4.i32_const(t.alloc(aP)),at=e4.i32_const(t.alloc(aP)),ae=e4.i32_const(t.alloc(aP)),aa=e4.i32_const(t.alloc(aP)),ai=e4.i32_const(t.alloc(aP)),ao=e4.i32_const(t.alloc(aP)),al=e4.i32_const(t.alloc(aP)),an=e4.i32_const(t.alloc(aP)),ac=e4.i32_const(t.alloc(aP)),ar=e4.i32_const(t.alloc(aP)),as=e4.i32_const(t.alloc(aP)),ad=e4.i32_const(t.alloc(aP)),a_=e4.i32_const(t.alloc(aP)),af=e4.i32_const(t.alloc(aP)),au=e4.i32_const(t.alloc(aP)),ag=e4.i32_const(t.alloc(aP)),ap=e4.i32_const(t.alloc(aP)),ah=e4.i32_const(t.alloc(aP)),aL=e4.i32_const(t.alloc(aP)),e1.addCode(e4.call(av+"__cyclotomicExp_w0",e6,e7),e4.call(aK+"_conjugate",e7,e7),e4.call(av+"__cyclotomicSquare",e7,e5),e4.call(av+"__cyclotomicSquare",e5,e9),e4.call(aK+"_mul",e9,e5,at),e4.call(av+"__cyclotomicExp_w0",at,ae),e4.call(aK+"_conjugate",ae,ae),e4.call(av+"__cyclotomicSquare",ae,aa),e4.call(av+"__cyclotomicExp_w0",aa,ai),e4.call(aK+"_conjugate",ai,ai),e4.call(aK+"_conjugate",at,ao),e4.call(aK+"_conjugate",ai,al),e4.call(aK+"_mul",al,ae,an),e4.call(aK+"_mul",an,ao,ac),e4.call(aK+"_mul",ac,e5,ar),e4.call(aK+"_mul",ac,ae,as),e4.call(aK+"_mul",as,e6,ad),e4.call(av+"__frobeniusMap1",ar,a_),e4.call(aK+"_mul",a_,ad,af),e4.call(av+"__frobeniusMap2",ac,au),e4.call(aK+"_mul",au,af,ag),e4.call(aK+"_conjugate",e6,ap),e4.call(aK+"_mul",ap,ar,ah),e4.call(av+"__frobeniusMap3",ah,aL),e4.call(aK+"_mul",aL,ag,e8)),(am=t.addFunction(av+"_finalExponentiation")).addParam("x","i32"),am.addParam("r","i32"),ax=(ab=am.getCodeBuilder()).getLocal("x"),ay=ab.getLocal("r"),aF=ab.i32_const(t.alloc(aP)),am.addCode(ab.call(av+"__finalExponentiationFirstChunk",ax,aF),ab.call(av+"__finalExponentiationLastChunk",aF,ay));for(let e=1;e<=5;e++)!function(e){let a=t.addFunction(av+"_pairingEq"+e);for(let t=0;t<e;t++)a.addParam("p_"+t,"i32"),a.addParam("q_"+t,"i32");a.addParam("c","i32"),a.setReturnType("i32");let i=a.getCodeBuilder(),o=i.i32_const(t.alloc(aP)),l=i.i32_const(t.alloc(aP));a.addCode(i.call(aK+"_one",o));for(let t=0;t<e;t++)a.addCode(i.call(av+"_prepareG1",i.getLocal("p_"+t),i.i32_const(a6))),a.addCode(i.call(av+"_prepareG2",i.getLocal("q_"+t),i.i32_const(a8))),a.addCode(i.call(av+"_millerLoop",i.i32_const(a6),i.i32_const(a8),l)),a.addCode(i.call(aK+"_mul",o,l,o));a.addCode(i.call(av+"_finalExponentiation",o,o)),a.addCode(i.call(aK+"_eq",o,i.getLocal("c")))}(e),t.exportFunction(av+"_pairingEq"+e);(aw=t.addFunction(av+"_pairing")).addParam("p","i32"),aw.addParam("q","i32"),aw.addParam("r","i32"),aC=(aB=aw.getCodeBuilder()).i32_const(t.alloc(aP)),aw.addCode(aB.call(av+"_prepareG1",aB.getLocal("p"),aB.i32_const(a6))),aw.addCode(aB.call(av+"_prepareG2",aB.getLocal("q"),aB.i32_const(a8))),aw.addCode(aB.call(av+"_millerLoop",aB.i32_const(a6),aB.i32_const(a8),aC)),aw.addCode(aB.call(av+"_finalExponentiation",aC,aB.getLocal("r"))),t.exportFunction(av+"_pairing"),t.exportFunction(av+"_prepareG1"),t.exportFunction(av+"_prepareG2"),t.exportFunction(av+"_millerLoop"),t.exportFunction(av+"_finalExponentiation"),t.exportFunction(av+"_finalExponentiationOld"),t.exportFunction(av+"__mulBy024"),t.exportFunction(av+"__mulBy024Old"),t.exportFunction(av+"__cyclotomicSquare"),t.exportFunction(av+"__cyclotomicExp_w0")}},81896,(t,e,a)=>{let i=t.r(4122),o=t.r(68469),l=t.r(13009),n=t.r(69977),c=t.r(60628),r=t.r(3196),s=t.r(29191),d=t.r(99728),_=t.r(52702),f=t.r(78405),{bitLength:u,isOdd:g,isNegative:p}=t.r(3926);e.exports=function(t,e){let a,h,L,m,b,x,y,F,w,B,C,v,A,I,E,P,O,S,q,z,M,T,R,U,N,k,j,G,$,D,W,Z,V,J,Q,H,K,X,Y,tt,te,ta,ti,to,tl,tn,tc,tr,ts,td,t_,tf,tu,tg,tp,th,tL,tm,tb,tx,ty,tF,tw,tB,tC,tv,tA,tI,tE,tP,tO,tS,tq,tz,tM,tT,tR,tU,tN,tk,tj,tG,t$,tD,tW,tZ,tV,tJ,tQ,tH,tK,tX,tY,t2,t3,t0,t1,t4,t6,t8,t7,t5,t9,et,ee,ea,ei,eo,el,en,ec,er,es,ed,e_,ef,eu,eg,ep,eh,eL,em,eb,ex,ey,eF,ew,eB,eC,ev,eA,eI,eE,eP,eO,eS,eq,ez,eM,eT,eR,eU,eN,ek,ej,eG,e$,eD,eW,eZ,eV,eJ,eQ,eH,eK,eX,eY,e2,e3,e0,e1,e4,e6,e8,e7,e5,e9,at,ae,aa,ai,ao,al,an,ac,ar,as,ad,a_,af,au,ag,ap,ah,aL,am,ab,ax,ay,aF,aw,aB,aC,av,aA,aI,aE,aP,aO,aS,aq,az,aM,aT,aR,aU,aN,ak=e||"bls12381";if(t.modules[ak])return ak;let aj=Math.floor((u(0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn-1n)-1)/64)+1,aG=8*aj,a$=2*aG,aD=12*aG,aW=Math.floor((u(0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n-1n)-1)/64)+1,aZ=8*aW,aV=t.alloc(i.bigInt2BytesLE(0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,aZ)),aJ=o(t,0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,"f1m","intq");l(t,0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,"fr","frm","intr");let aQ=t.alloc(i.bigInt2BytesLE(a3(4n),aG)),aH=r(t,"g1m","f1m",aQ);s(t,"frm","frm","frm","frm_mul"),d(t,"pol","frm"),_(t,"qap","frm");let aK=n(t,"f1m_neg","f2m","f1m"),aX=t.alloc([...i.bigInt2BytesLE(a3(4n),aG),...i.bigInt2BytesLE(a3(4n),aG)]),aY=r(t,"g2m","f2m",aX);function a2(e,a){let i=t.addFunction(e);i.addParam("pG","i32"),i.addParam("pFr","i32"),i.addParam("pr","i32");let o=i.getCodeBuilder(),l=o.i32_const(t.alloc(aZ));i.addCode(o.call("frm_fromMontgomery",o.getLocal("pFr"),l),o.call(a,o.getLocal("pG"),l,o.i32_const(aZ),o.getLocal("pr"))),t.exportFunction(e)}function a3(t){return BigInt(t)*(1n<<BigInt(8*aG))%0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn}a2("g1m_timesFr","g1m_timesScalar"),s(t,"g1m","g1m","frm","g1m_timesFr"),a2("g2m_timesFr","g2m_timesScalar"),s(t,"g2m","g2m","frm","g2m_timesFr"),a2("g1m_timesFrAffine","g1m_timesScalarAffine"),a2("g2m_timesFrAffine","g2m_timesScalarAffine"),f(t,"frm_batchApplyKey","fmr","frm",aZ,aZ,aZ,"frm_mul"),f(t,"g1m_batchApplyKey","g1m","frm",3*aG,3*aG,aZ,"g1m_timesFr"),f(t,"g1m_batchApplyKeyMixed","g1m","frm",2*aG,3*aG,aZ,"g1m_timesFrAffine"),f(t,"g2m_batchApplyKey","g2m","frm",2*aG*3,3*aG*2,aZ,"g2m_timesFr"),f(t,"g2m_batchApplyKeyMixed","g2m","frm",2*aG*2,3*aG*2,aZ,"g2m_timesFrAffine");let a0=t.alloc([...i.bigInt2BytesLE(a3(0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bbn),aG),...i.bigInt2BytesLE(a3(0x8b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1n),aG),...i.bigInt2BytesLE(a3(1n),aG)]),a1=t.alloc([...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(1n),aG),...i.bigInt2BytesLE(a3(0n),aG)]),a4=[[0x24aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8n,0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7en],[0xce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801n,0x606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79ben],[1n,0n]],a6=t.alloc([...i.bigInt2BytesLE(a3(a4[0][0]),aG),...i.bigInt2BytesLE(a3(a4[0][1]),aG),...i.bigInt2BytesLE(a3(a4[1][0]),aG),...i.bigInt2BytesLE(a3(a4[1][1]),aG),...i.bigInt2BytesLE(a3(a4[2][0]),aG),...i.bigInt2BytesLE(a3(a4[2][1]),aG)]),a8=[[0n,0n],[1n,0n],[0n,0n]],a7=t.alloc([...i.bigInt2BytesLE(a3(a8[0][0]),aG),...i.bigInt2BytesLE(a3(a8[0][1]),aG),...i.bigInt2BytesLE(a3(a8[1][0]),aG),...i.bigInt2BytesLE(a3(a8[1][1]),aG),...i.bigInt2BytesLE(a3(a8[2][0]),aG),...i.bigInt2BytesLE(a3(a8[2][1]),aG)]),a5=t.alloc([...i.bigInt2BytesLE(a3(1n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG),...i.bigInt2BytesLE(a3(0n),aG)]),a9=t.alloc([...i.bigInt2BytesLE(a3(1n),aG),...i.bigInt2BytesLE(a3(1n),aG)]);(a=t.addFunction(aK+"_mulNR")).addParam("x","i32"),a.addParam("pr","i32"),L=(h=a.getCodeBuilder()).i32_const(t.alloc(aG)),m=h.getLocal("x"),b=h.i32_add(h.getLocal("x"),h.i32_const(aG)),x=h.getLocal("pr"),y=h.i32_add(h.getLocal("pr"),h.i32_const(aG)),a.addCode(h.call(aJ+"_copy",m,L),h.call(aJ+"_sub",m,b,x),h.call(aJ+"_add",L,b,y));let it=c(t,aK+"_mulNR","f6m","f2m");(F=t.addFunction(it+"_mulNR")).addParam("x","i32"),F.addParam("pr","i32"),B=(w=F.getCodeBuilder()).i32_const(t.alloc(2*aG)),F.addCode(w.call(aK+"_copy",w.getLocal("x"),B),w.call(aK+"_mulNR",w.i32_add(w.getLocal("x"),w.i32_const(4*aG)),w.getLocal("pr")),w.call(aK+"_copy",w.i32_add(w.getLocal("x"),w.i32_const(2*aG)),w.i32_add(w.getLocal("pr"),w.i32_const(4*aG))),w.call(aK+"_copy",B,w.i32_add(w.getLocal("pr"),w.i32_const(2*aG))));let ie=n(t,it+"_mulNR","ftm",it),ia=function(t){let e=0xd201000000010000n,a=[];for(;e>0n;)g(e)?a.push(1):a.push(0),e>>=1n;return a}(0xd201000000010000n),ii=t.alloc(ia),io=3*a$,il=ia.length-1,ic=ia.reduce((t,e)=>t+ +(0!=e),0),ir=6*aG,is=3*aG*2+(ic+il+1)*io;t.modules[ak]={n64q:aj,n64r:aW,n8q:aG,n8r:aZ,pG1gen:a0,pG1zero:a1,pG1b:aQ,pG2gen:a6,pG2zero:a7,pG2b:aX,pq:t.modules.f1m.pq,pr:aV,pOneT:a5,r:0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n,q:0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,prePSize:ir,preQSize:is},(C=t.addFunction(it+"_mul1")).addParam("pA","i32"),C.addParam("pC1","i32"),C.addParam("pR","i32"),A=(v=C.getCodeBuilder()).getLocal("pA"),I=v.i32_add(v.getLocal("pA"),v.i32_const(2*aG)),E=v.i32_add(v.getLocal("pA"),v.i32_const(4*aG)),P=v.getLocal("pC1"),O=v.getLocal("pR"),S=v.i32_add(v.getLocal("pR"),v.i32_const(2*aG)),q=v.i32_add(v.getLocal("pR"),v.i32_const(4*aG)),z=v.i32_const(t.alloc(2*aG)),M=v.i32_const(t.alloc(2*aG)),C.addCode(v.call(aK+"_add",A,I,z),v.call(aK+"_add",I,E,M),v.call(aK+"_mul",I,P,q),v.call(aK+"_mul",M,P,O),v.call(aK+"_sub",O,q,O),v.call(aK+"_mulNR",O,O),v.call(aK+"_mul",z,P,S),v.call(aK+"_sub",S,q,S)),(T=t.addFunction(it+"_mul01")).addParam("pA","i32"),T.addParam("pC0","i32"),T.addParam("pC1","i32"),T.addParam("pR","i32"),U=(R=T.getCodeBuilder()).getLocal("pA"),N=R.i32_add(R.getLocal("pA"),R.i32_const(2*aG)),k=R.i32_add(R.getLocal("pA"),R.i32_const(4*aG)),j=R.getLocal("pC0"),G=R.getLocal("pC1"),$=R.getLocal("pR"),D=R.i32_add(R.getLocal("pR"),R.i32_const(2*aG)),W=R.i32_add(R.getLocal("pR"),R.i32_const(4*aG)),Z=R.i32_const(t.alloc(2*aG)),V=R.i32_const(t.alloc(2*aG)),J=R.i32_const(t.alloc(2*aG)),Q=R.i32_const(t.alloc(2*aG)),T.addCode(R.call(aK+"_mul",U,j,Z),R.call(aK+"_mul",N,G,V),R.call(aK+"_add",U,N,J),R.call(aK+"_add",U,k,Q),R.call(aK+"_add",N,k,$),R.call(aK+"_mul",$,G,$),R.call(aK+"_sub",$,V,$),R.call(aK+"_mulNR",$,$),R.call(aK+"_add",$,Z,$),R.call(aK+"_add",j,G,D),R.call(aK+"_mul",D,J,D),R.call(aK+"_sub",D,Z,D),R.call(aK+"_sub",D,V,D),R.call(aK+"_mul",Q,j,W),R.call(aK+"_sub",W,Z,W),R.call(aK+"_add",W,V,W)),(H=t.addFunction(ie+"_mul014")).addParam("pA","i32"),H.addParam("pC0","i32"),H.addParam("pC1","i32"),H.addParam("pC4","i32"),H.addParam("pR","i32"),X=(K=H.getCodeBuilder()).getLocal("pA"),Y=K.i32_add(K.getLocal("pA"),K.i32_const(6*aG)),tt=K.getLocal("pC0"),te=K.getLocal("pC1"),ta=K.getLocal("pC4"),ti=K.i32_const(t.alloc(6*aG)),to=K.i32_const(t.alloc(6*aG)),tl=K.i32_const(t.alloc(2*aG)),tn=K.getLocal("pR"),tc=K.i32_add(K.getLocal("pR"),K.i32_const(6*aG)),H.addCode(K.call(it+"_mul01",X,tt,te,ti),K.call(it+"_mul1",Y,ta,to),K.call(aK+"_add",te,ta,tl),K.call(it+"_add",Y,X,tc),K.call(it+"_mul01",tc,tt,tl,tc),K.call(it+"_sub",tc,ti,tc),K.call(it+"_sub",tc,to,tc),K.call(it+"_copy",to,tn),K.call(it+"_mulNR",tn,tn),K.call(it+"_add",tn,ti,tn)),(tr=t.addFunction(ak+"_ell")).addParam("pP","i32"),tr.addParam("pCoefs","i32"),tr.addParam("pF","i32"),td=(ts=tr.getCodeBuilder()).getLocal("pP"),t_=ts.i32_add(ts.getLocal("pP"),ts.i32_const(aG)),tf=ts.getLocal("pF"),tu=ts.getLocal("pCoefs"),tg=ts.i32_add(ts.getLocal("pCoefs"),ts.i32_const(aG)),tp=ts.i32_add(ts.getLocal("pCoefs"),ts.i32_const(2*aG)),th=ts.i32_add(ts.getLocal("pCoefs"),ts.i32_const(3*aG)),tL=ts.i32_add(ts.getLocal("pCoefs"),ts.i32_const(4*aG)),tm=t.alloc(2*aG),tb=ts.i32_const(tm),tx=ts.i32_const(tm),ty=ts.i32_const(tm+aG),tF=t.alloc(2*aG),tw=ts.i32_const(tF),tB=ts.i32_const(tF),tC=ts.i32_const(tF+aG),tr.addCode(ts.call(aJ+"_mul",tu,t_,tx),ts.call(aJ+"_mul",tg,t_,ty),ts.call(aJ+"_mul",tp,td,tB),ts.call(aJ+"_mul",th,td,tC),ts.call(ie+"_mul014",tf,tL,tw,tb,tf));let id=t.alloc(ir),i_=t.alloc(is);for(let e=0;e<10;e++)!function(e){let a=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n,0xfc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0n],[0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n,0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n,0x5b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0n],[0xfc3e2b36c4e03288e9e902231f9fb854a14787b6c7b36fec0c8ec971f63c5f282d5ac14d6c7ec22cf78a126ddc4af3n,0x1904d3bf02bb0667c231beb4202c0d1f0fd603fd3cbd5f4f7b2443d784bab9c4f67ea53d63e7813d8d0775ed92235fb8n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0x6af0e0437ff400b6831e36d6bd17ffe48395dabc2d3435e77f76e17009241c5ee67992f72ec05f4c81084fbede3cc09n,0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0n],[0x5b2cfd9013a5fd8df47fa6b48b1e045f39816240c0b8fee8beadf4d8e9c0566c63a3e6e257f87329b18fae980078116n,0x144e4211384586c16bd3ad4afa99cc9170df3560e77982d0db45f3536814f0bd5871c1908bd478cd1ee605167ff82995n]]],o=[[[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n],[1n,0n]],[[1n,0n],[0n,0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0n,1n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0n,0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen]],[[1n,0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaadn,0n],[0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn,0n],[0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaaan,0n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen,0n],[0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffeffffn,0n]]],l=t.addFunction(ie+"_frobeniusMap"+e);l.addParam("x","i32"),l.addParam("r","i32");let n=l.getCodeBuilder();for(let c=0;c<6;c++){let r=0==c?n.getLocal("x"):n.i32_add(n.getLocal("x"),n.i32_const(c*a$)),s=n.i32_add(n.getLocal("x"),n.i32_const(c*a$+aG)),d=0==c?n.getLocal("r"):n.i32_add(n.getLocal("r"),n.i32_const(c*a$)),_=n.i32_add(n.getLocal("r"),n.i32_const(c*a$+aG)),f=function(t,e){let a=t[0],i=t[1],o=e[0],l=e[1],n=[(a*o-i*l)%0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn,(a*l+i*o)%0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn];return p(n[0])&&(n[0]=n[0]+0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn),n}(a[Math.floor(c/3)][e%12],o[c%3][e%6]),u=t.alloc([...i.bigInt2BytesLE(a3(f[0]),aG),...i.bigInt2BytesLE(a3(f[1]),aG)]);e%2==1?l.addCode(n.call(aJ+"_copy",r,d),n.call(aJ+"_neg",s,_),n.call(aK+"_mul",d,n.i32_const(u),d)):l.addCode(n.call(aK+"_mul",r,n.i32_const(u),d))}}(e),t.exportFunction(ie+"_frobeniusMap"+e);(tv=t.addFunction(aH+"_inGroupAffine")).addParam("p","i32"),tv.setReturnType("i32"),tI=(tA=tv.getCodeBuilder()).i32_const(t.alloc(i.bigInt2BytesLE(a3(0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn),aG))),tE=tA.i32_const(t.alloc(i.bigInt2BytesLE(a3(0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffen),aG))),tP=tA.i32_const(t.alloc(i.bigInt2BytesLE((0xd201000000010000n*0xd201000000010000n-1n)/3n,16))),tO=tA.getLocal("p"),tS=tA.i32_add(tA.getLocal("p"),tA.i32_const(aG)),tq=t.alloc(3*aG),tz=tA.i32_const(tq),tM=tA.i32_const(tq),tT=tA.i32_const(tq+aG),tR=t.alloc(2*aG),tU=tA.i32_const(tR),tN=tA.i32_const(tR),tk=tA.i32_const(tR+aG),tv.addCode(tA.if(tA.call(aH+"_isZeroAffine",tA.getLocal("p")),tA.ret(tA.i32_const(1))),tA.if(tA.i32_eqz(tA.call(aH+"_inCurveAffine",tA.getLocal("p"))),tA.ret(tA.i32_const(0))),tA.call(aJ+"_mul",tO,tI,tM),tA.call(aJ+"_copy",tS,tT),tA.call(aJ+"_mul",tO,tE,tN),tA.call(aJ+"_copy",tS,tk),tA.call(aH+"_doubleAffine",tz,tz),tA.call(aH+"_subMixed",tz,tA.getLocal("p"),tz),tA.call(aH+"_subMixed",tz,tU,tz),tA.call(aH+"_timesScalar",tz,tP,tA.i32_const(16),tz),tA.ret(tA.call(aH+"_eqMixed",tz,tU))),(tj=t.addFunction(aH+"_inGroup")).addParam("pIn","i32"),tj.setReturnType("i32"),t$=(tG=tj.getCodeBuilder()).i32_const(t.alloc(2*aG)),tj.addCode(tG.call(aH+"_toAffine",tG.getLocal("pIn"),t$),tG.ret(tG.call(aH+"_inGroupAffine",t$))),(tD=t.addFunction(aY+"_inGroupAffine")).addParam("p","i32"),tD.setReturnType("i32"),tW=tD.getCodeBuilder(),tZ=tW.i32_const(t.alloc([...i.bigInt2BytesLE(a3(0xd0088f51cbff34d258dd3db21a5d66bb23ba5c279c2895fb39869507b587b120f55ffff58a9ffffdcff7fffffffd556n),aG),...i.bigInt2BytesLE(a3(0xd0088f51cbff34d258dd3db21a5d66bb23ba5c279c2895fb39869507b587b120f55ffff58a9ffffdcff7fffffffd555n),aG)])),tV=tW.i32_const(t.alloc(i.bigInt2BytesLE(a3(0x1a0111ea397fe699ec02408663d4de85aa0d857d89759ad4897d29650fb85f9b409427eb4f49fffd8bfd00000000aaacn),aG))),tJ=tW.i32_const(t.alloc([...i.bigInt2BytesLE(a3(0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n),aG),...i.bigInt2BytesLE(a3(0x135203e60180a68ee2e9c448d77a2cd91c3dedd930b1cf60ef396489f61eb45e304466cf3e67fa0af1ee7b04121bdea2n),aG)])),tQ=tW.i32_const(t.alloc(i.bigInt2BytesLE(0xd201000000010000n,8))),tH=tW.getLocal("p"),tK=tW.i32_add(tW.getLocal("p"),tW.i32_const(a$)),tX=tW.i32_const(t.alloc(aG)),tY=tW.i32_const(t.alloc(a$)),t2=tW.i32_const(t.alloc(a$)),t3=t.alloc(2*a$),t0=tW.i32_const(t3),t1=tW.i32_const(t3),t4=tW.i32_const(t3),t6=tW.i32_const(t3+aG),t8=tW.i32_const(t3+a$),t7=tW.i32_const(t3+a$),t5=tW.i32_const(t3+a$+aG),t9=t.alloc(3*a$),et=tW.i32_const(t9),ee=tW.i32_const(t9),ea=tW.i32_const(t9),ei=tW.i32_const(t9+aG),eo=tW.i32_const(t9+a$),el=tW.i32_const(t9+a$),en=tW.i32_const(t9+a$+aG),ec=tW.i32_const(t9+2*a$),tD.addCode(tW.if(tW.call(aY+"_isZeroAffine",tW.getLocal("p")),tW.ret(tW.i32_const(1))),tW.if(tW.i32_eqz(tW.call(aY+"_inCurveAffine",tW.getLocal("p"))),tW.ret(tW.i32_const(0))),tW.call(aK+"_mul",tH,tZ,tY),tW.call(aK+"_mul",tK,tZ,t2),tW.call(aK+"_mul1",tY,tV,t1),tW.call(aK+"_neg",t2,t8),tW.call(aK+"_neg",tY,ee),tW.call(aK+"_mul",t2,tJ,eo),tW.call(aJ+"_sub",t4,t6,tX),tW.call(aJ+"_add",t4,t6,t6),tW.call(aJ+"_copy",tX,t4),tW.call(aJ+"_sub",t7,t5,tX),tW.call(aJ+"_add",t7,t5,t5),tW.call(aJ+"_copy",tX,t7),tW.call(aJ+"_add",ea,ei,tX),tW.call(aJ+"_sub",ea,ei,ei),tW.call(aJ+"_copy",tX,ea),tW.call(aJ+"_sub",en,el,tX),tW.call(aJ+"_add",el,en,en),tW.call(aJ+"_copy",tX,el),tW.call(aK+"_one",ec),tW.call(aY+"_timesScalar",et,tQ,tW.i32_const(8),et),tW.call(aY+"_addMixed",et,t0,et),tW.ret(tW.call(aY+"_eqMixed",et,tW.getLocal("p")))),(er=t.addFunction(aY+"_inGroup")).addParam("pIn","i32"),er.setReturnType("i32"),ed=(es=er.getCodeBuilder()).i32_const(t.alloc(2*a$)),er.addCode(es.call(aY+"_toAffine",es.getLocal("pIn"),ed),es.ret(es.call(aY+"_inGroupAffine",ed))),(e_=t.addFunction(ak+"_prepAddStep")).addParam("R","i32"),e_.addParam("Q","i32"),e_.addParam("r","i32"),eu=(ef=e_.getCodeBuilder()).getLocal("R"),eg=ef.i32_add(ef.getLocal("R"),ef.i32_const(2*aG)),ep=ef.i32_add(ef.getLocal("R"),ef.i32_const(4*aG)),eh=ef.getLocal("Q"),eL=ef.i32_add(ef.getLocal("Q"),ef.i32_const(2*aG)),em=ef.getLocal("r"),eb=ef.i32_add(ef.getLocal("r"),ef.i32_const(2*aG)),ex=ef.i32_add(ef.getLocal("r"),ef.i32_const(4*aG)),ey=ef.i32_const(t.alloc(a$)),eF=ef.i32_const(t.alloc(a$)),ew=ef.i32_const(t.alloc(a$)),eB=ef.i32_const(t.alloc(a$)),eC=ef.i32_const(t.alloc(a$)),ev=ef.i32_const(t.alloc(a$)),eA=ef.i32_const(t.alloc(a$)),eI=ef.i32_const(t.alloc(a$)),eE=ef.i32_const(t.alloc(a$)),eP=ef.i32_const(t.alloc(a$)),eO=ef.i32_const(t.alloc(a$)),e_.addCode(ef.call(aK+"_square",ep,ey),ef.call(aK+"_square",eL,eF),ef.call(aK+"_mul",ey,eh,eB),ef.call(aK+"_add",eL,ep,eb),ef.call(aK+"_square",eb,eb),ef.call(aK+"_sub",eb,eF,eb),ef.call(aK+"_sub",eb,ey,eb),ef.call(aK+"_mul",eb,ey,eb),ef.call(aK+"_sub",eB,eu,eC),ef.call(aK+"_square",eC,ev),ef.call(aK+"_add",ev,ev,eA),ef.call(aK+"_add",eA,eA,eA),ef.call(aK+"_mul",eA,eC,eI),ef.call(aK+"_sub",eb,eg,eE),ef.call(aK+"_sub",eE,eg,eE),ef.call(aK+"_mul",eE,eh,ex),ef.call(aK+"_mul",eA,eu,eP),ef.call(aK+"_square",eE,eu),ef.call(aK+"_sub",eu,eI,eu),ef.call(aK+"_sub",eu,eP,eu),ef.call(aK+"_sub",eu,eP,eu),ef.call(aK+"_add",ep,eC,ep),ef.call(aK+"_square",ep,ep),ef.call(aK+"_sub",ep,ey,ep),ef.call(aK+"_sub",ep,ev,ep),ef.call(aK+"_add",eL,ep,em),ef.call(aK+"_sub",eP,eu,eO),ef.call(aK+"_mul",eO,eE,eO),ef.call(aK+"_mul",eg,eI,eB),ef.call(aK+"_add",eB,eB,eB),ef.call(aK+"_sub",eO,eB,eg),ef.call(aK+"_square",em,em),ef.call(aK+"_sub",em,eF,em),ef.call(aK+"_square",ep,ew),ef.call(aK+"_sub",em,ew,em),ef.call(aK+"_add",ex,ex,ex),ef.call(aK+"_sub",ex,em,ex),ef.call(aK+"_add",ep,ep,em),ef.call(aK+"_neg",eE,eE),ef.call(aK+"_add",eE,eE,eb)),(eS=t.addFunction(ak+"_prepDblStep")).addParam("R","i32"),eS.addParam("r","i32"),ez=(eq=eS.getCodeBuilder()).getLocal("R"),eM=eq.i32_add(eq.getLocal("R"),eq.i32_const(2*aG)),eT=eq.i32_add(eq.getLocal("R"),eq.i32_const(4*aG)),eR=eq.getLocal("r"),eU=eq.i32_add(eq.getLocal("r"),eq.i32_const(2*aG)),eN=eq.i32_add(eq.getLocal("r"),eq.i32_const(4*aG)),ek=eq.i32_const(t.alloc(a$)),ej=eq.i32_const(t.alloc(a$)),eG=eq.i32_const(t.alloc(a$)),e$=eq.i32_const(t.alloc(a$)),eD=eq.i32_const(t.alloc(a$)),eS.addCode(eq.call(aK+"_square",ez,eR),eq.call(aK+"_square",eM,ej),eq.call(aK+"_square",ej,eG),eq.call(aK+"_add",ej,ez,eU),eq.call(aK+"_square",eU,eU),eq.call(aK+"_sub",eU,eR,eU),eq.call(aK+"_sub",eU,eG,eU),eq.call(aK+"_add",eU,eU,eU),eq.call(aK+"_add",eR,eR,e$),eq.call(aK+"_add",e$,eR,e$),eq.call(aK+"_add",ez,e$,eN),eq.call(aK+"_square",e$,eD),eq.call(aK+"_square",eT,ek),eq.call(aK+"_sub",eD,eU,ez),eq.call(aK+"_sub",ez,eU,ez),eq.call(aK+"_add",eT,eM,eT),eq.call(aK+"_square",eT,eT),eq.call(aK+"_sub",eT,ej,eT),eq.call(aK+"_sub",eT,ek,eT),eq.call(aK+"_sub",eU,ez,eM),eq.call(aK+"_mul",eM,e$,eM),eq.call(aK+"_add",eG,eG,eG),eq.call(aK+"_add",eG,eG,eG),eq.call(aK+"_add",eG,eG,eG),eq.call(aK+"_sub",eM,eG,eM),eq.call(aK+"_mul",e$,ek,eU),eq.call(aK+"_add",eU,eU,eU),eq.call(aK+"_neg",eU,eU),eq.call(aK+"_square",eN,eN),eq.call(aK+"_sub",eN,eR,eN),eq.call(aK+"_sub",eN,eD,eN),eq.call(aK+"_add",ej,ej,ej),eq.call(aK+"_add",ej,ej,ej),eq.call(aK+"_sub",eN,ej,eN),eq.call(aK+"_mul",eT,ek,eR),eq.call(aK+"_add",eR,eR,eR)),(eW=t.addFunction(ak+"_prepareG1")).addParam("pP","i32"),eW.addParam("ppreP","i32"),eZ=eW.getCodeBuilder(),eW.addCode(eZ.call(aH+"_normalize",eZ.getLocal("pP"),eZ.getLocal("ppreP"))),(eV=t.addFunction(ak+"_prepareG2")).addParam("pQ","i32"),eV.addParam("ppreQ","i32"),eV.addLocal("pCoef","i32"),eV.addLocal("i","i32"),eQ=(eJ=eV.getCodeBuilder()).getLocal("pQ"),eH=t.alloc(3*a$),eK=eJ.i32_const(eH),eX=eJ.getLocal("ppreQ"),eV.addCode(eJ.call(aY+"_normalize",eQ,eX),eJ.if(eJ.call(aY+"_isZero",eX),eJ.ret([])),eJ.call(aY+"_copy",eX,eK),eJ.setLocal("pCoef",eJ.i32_add(eJ.getLocal("ppreQ"),eJ.i32_const(3*a$)))),eV.addCode(eJ.setLocal("i",eJ.i32_const(ia.length-2)),eJ.block(eJ.loop(eJ.call(ak+"_prepDblStep",eK,eJ.getLocal("pCoef")),eJ.setLocal("pCoef",eJ.i32_add(eJ.getLocal("pCoef"),eJ.i32_const(io))),eJ.if(eJ.i32_load8_s(eJ.getLocal("i"),ii),[...eJ.call(ak+"_prepAddStep",eK,eX,eJ.getLocal("pCoef")),...eJ.setLocal("pCoef",eJ.i32_add(eJ.getLocal("pCoef"),eJ.i32_const(io)))]),eJ.br_if(1,eJ.i32_eqz(eJ.getLocal("i"))),eJ.setLocal("i",eJ.i32_sub(eJ.getLocal("i"),eJ.i32_const(1))),eJ.br(0)))),(eY=t.addFunction(ak+"_millerLoop")).addParam("ppreP","i32"),eY.addParam("ppreQ","i32"),eY.addParam("r","i32"),eY.addLocal("pCoef","i32"),eY.addLocal("i","i32"),e3=(e2=eY.getCodeBuilder()).getLocal("ppreP"),e0=e2.getLocal("pCoef"),e1=e2.getLocal("r"),eY.addCode(e2.call(ie+"_one",e1),e2.if(e2.call(aH+"_isZero",e3),e2.ret([])),e2.if(e2.call(aH+"_isZero",e2.getLocal("ppreQ")),e2.ret([])),e2.setLocal("pCoef",e2.i32_add(e2.getLocal("ppreQ"),e2.i32_const(3*a$))),e2.setLocal("i",e2.i32_const(ia.length-2)),e2.block(e2.loop(e2.call(ak+"_ell",e3,e0,e1),e2.setLocal("pCoef",e2.i32_add(e2.getLocal("pCoef"),e2.i32_const(io))),e2.if(e2.i32_load8_s(e2.getLocal("i"),ii),[...e2.call(ak+"_ell",e3,e0,e1),...e2.setLocal("pCoef",e2.i32_add(e2.getLocal("pCoef"),e2.i32_const(io)))]),e2.call(ie+"_square",e1,e1),e2.br_if(1,e2.i32_eq(e2.getLocal("i"),e2.i32_const(1))),e2.setLocal("i",e2.i32_sub(e2.getLocal("i"),e2.i32_const(1))),e2.br(0))),e2.call(ak+"_ell",e3,e0,e1)),eY.addCode(e2.call(ie+"_conjugate",e1,e1)),(e4=t.addFunction(ak+"_finalExponentiationOld")).addParam("x","i32"),e4.addParam("r","i32"),e6=t.alloc(i.bigInt2BytesLE(0x2ee1db5dcc825b7e1bda9c0496a1c0a89ee0193d4977b3f7d4507d07363baa13f8d14a917848517badc3a43d1073776ab353f2c30698e8cc7deada9c0aadff5e9cfee9a074e43b9a660835cc872ee83ff3a0f0f1c0ad0d6106feaf4e347aa68ad49466fa927e7bb9375331807a0dce2630d9aa4b113f414386b0e8819328148978e2b0dd39099b86e1ab656d2670d93e4d7acdd350da5359bc73ab61a0c5bf24c374693c49f570bcd2b01f3077ffb10bf24dde41064837f27611212596bc293c8d4c01f25118790f4684d0b9c40a68eb74bb22a40ee7169cdc1041296532fef459f12438dfc8e2886ef965e61a474c5c85b0129127a1b5ad0463434724538411d1676a53b5a62eb34c05739334f46c02c3f0bd0c55d3109cd15948d0a1fad20044ce6ad4c6bec3ec03ef19592004cedd556952c6d8823b19dadd7c2498345c6e5308f1c511291097db60b1749bf9b71a9f9e0100418a3ef0bc627751bbd81367066bca6a4c1b6dcfc5cceb73fc56947a403577dfa9e13c24ea820b09c1d9f7c31759c3635de3f7a3639991708e88adce88177456c49637fd7961be1a4c7e79fb02faa732e2f3ec2bea83d196283313492caa9d4aff1c910e9622d2a73f62537f2701aaef6539314043f7bbce5b78c7869aeb2181a67e49eeed2161daf3f881bd88592d767f67c4717489119226c2f011d4cab803e9d71650a6f80698e2f8491d12191a04406fbc8fbd5f48925f98630e68bfb24c0bcb9b55df57510n,544)),e8=e4.getCodeBuilder(),e4.addCode(e8.call(ie+"_exp",e8.getLocal("x"),e8.i32_const(e6),e8.i32_const(544),e8.getLocal("r"))),(e7=t.addFunction(ak+"__cyclotomicSquare")).addParam("x","i32"),e7.addParam("r","i32"),e9=(e5=e7.getCodeBuilder()).getLocal("x"),at=e5.i32_add(e5.getLocal("x"),e5.i32_const(a$)),ae=e5.i32_add(e5.getLocal("x"),e5.i32_const(2*a$)),aa=e5.i32_add(e5.getLocal("x"),e5.i32_const(3*a$)),ai=e5.i32_add(e5.getLocal("x"),e5.i32_const(4*a$)),ao=e5.i32_add(e5.getLocal("x"),e5.i32_const(5*a$)),al=e5.getLocal("r"),an=e5.i32_add(e5.getLocal("r"),e5.i32_const(a$)),ac=e5.i32_add(e5.getLocal("r"),e5.i32_const(2*a$)),ar=e5.i32_add(e5.getLocal("r"),e5.i32_const(3*a$)),as=e5.i32_add(e5.getLocal("r"),e5.i32_const(4*a$)),ad=e5.i32_add(e5.getLocal("r"),e5.i32_const(5*a$)),a_=e5.i32_const(t.alloc(a$)),af=e5.i32_const(t.alloc(a$)),au=e5.i32_const(t.alloc(a$)),ag=e5.i32_const(t.alloc(a$)),ap=e5.i32_const(t.alloc(a$)),ah=e5.i32_const(t.alloc(a$)),aL=e5.i32_const(t.alloc(a$)),am=e5.i32_const(t.alloc(a$)),e7.addCode(e5.call(aK+"_mul",e9,ai,aL),e5.call(aK+"_mulNR",ai,a_),e5.call(aK+"_add",e9,a_,a_),e5.call(aK+"_add",e9,ai,am),e5.call(aK+"_mul",am,a_,a_),e5.call(aK+"_mulNR",aL,am),e5.call(aK+"_add",aL,am,am),e5.call(aK+"_sub",a_,am,a_),e5.call(aK+"_add",aL,aL,af),e5.call(aK+"_mul",aa,ae,aL),e5.call(aK+"_mulNR",ae,au),e5.call(aK+"_add",aa,au,au),e5.call(aK+"_add",aa,ae,am),e5.call(aK+"_mul",am,au,au),e5.call(aK+"_mulNR",aL,am),e5.call(aK+"_add",aL,am,am),e5.call(aK+"_sub",au,am,au),e5.call(aK+"_add",aL,aL,ag),e5.call(aK+"_mul",at,ao,aL),e5.call(aK+"_mulNR",ao,ap),e5.call(aK+"_add",at,ap,ap),e5.call(aK+"_add",at,ao,am),e5.call(aK+"_mul",am,ap,ap),e5.call(aK+"_mulNR",aL,am),e5.call(aK+"_add",aL,am,am),e5.call(aK+"_sub",ap,am,ap),e5.call(aK+"_add",aL,aL,ah),e5.call(aK+"_sub",a_,e9,al),e5.call(aK+"_add",al,al,al),e5.call(aK+"_add",a_,al,al),e5.call(aK+"_add",af,ai,as),e5.call(aK+"_add",as,as,as),e5.call(aK+"_add",af,as,as),e5.call(aK+"_mul",ah,e5.i32_const(a9),am),e5.call(aK+"_add",am,aa,ar),e5.call(aK+"_add",ar,ar,ar),e5.call(aK+"_add",am,ar,ar),e5.call(aK+"_sub",ap,ae,ac),e5.call(aK+"_add",ac,ac,ac),e5.call(aK+"_add",ap,ac,ac),e5.call(aK+"_sub",au,at,an),e5.call(aK+"_add",an,an,an),e5.call(aK+"_add",au,an,an),e5.call(aK+"_add",ag,ao,ad),e5.call(aK+"_add",ad,ad,ad),e5.call(aK+"_add",ag,ad,ad)),ab=(function(t){let e=0xd201000000010000n,a=[];for(;e>0n;){if(g(e)){let t=2-Number(e%4n);a.push(t),e-=BigInt(t)}else a.push(0);e>>=1n}return a})(0xd201000000010000n).map(t=>-1==t?255:t),ax=t.alloc(ab),(ay=t.addFunction(ak+"__cyclotomicExp_w0")).addParam("x","i32"),ay.addParam("r","i32"),ay.addLocal("bit","i32"),ay.addLocal("i","i32"),aw=(aF=ay.getCodeBuilder()).getLocal("x"),aB=aF.getLocal("r"),aC=aF.i32_const(t.alloc(aD)),ay.addCode(aF.call(ie+"_conjugate",aw,aC),aF.call(ie+"_one",aB),aF.if(aF.teeLocal("bit",aF.i32_load8_s(aF.i32_const(ab.length-1),ax)),aF.if(aF.i32_eq(aF.getLocal("bit"),aF.i32_const(1)),aF.call(ie+"_mul",aB,aw,aB),aF.call(ie+"_mul",aB,aC,aB))),aF.setLocal("i",aF.i32_const(ab.length-2)),aF.block(aF.loop(aF.call(ak+"__cyclotomicSquare",aB,aB),aF.if(aF.teeLocal("bit",aF.i32_load8_s(aF.getLocal("i"),ax)),aF.if(aF.i32_eq(aF.getLocal("bit"),aF.i32_const(1)),aF.call(ie+"_mul",aB,aw,aB),aF.call(ie+"_mul",aB,aC,aB))),aF.br_if(1,aF.i32_eqz(aF.getLocal("i"))),aF.setLocal("i",aF.i32_sub(aF.getLocal("i"),aF.i32_const(1))),aF.br(0)))),ay.addCode(aF.call(ie+"_conjugate",aB,aB)),(av=t.addFunction(ak+"_finalExponentiation")).addParam("x","i32"),av.addParam("r","i32"),aI=(aA=av.getCodeBuilder()).getLocal("x"),aE=aA.getLocal("r"),aP=aA.i32_const(t.alloc(aD)),aO=aA.i32_const(t.alloc(aD)),aS=aA.i32_const(t.alloc(aD)),aq=aA.i32_const(t.alloc(aD)),az=aA.i32_const(t.alloc(aD)),aM=aA.i32_const(t.alloc(aD)),aT=aA.i32_const(t.alloc(aD)),av.addCode(aA.call(ie+"_frobeniusMap6",aI,aP),aA.call(ie+"_inverse",aI,aO),aA.call(ie+"_mul",aP,aO,aS),aA.call(ie+"_copy",aS,aO),aA.call(ie+"_frobeniusMap2",aS,aS),aA.call(ie+"_mul",aS,aO,aS),aA.call(ak+"__cyclotomicSquare",aS,aO),aA.call(ie+"_conjugate",aO,aO),aA.call(ak+"__cyclotomicExp_w0",aS,aq),aA.call(ak+"__cyclotomicSquare",aq,az),aA.call(ie+"_mul",aO,aq,aM),aA.call(ak+"__cyclotomicExp_w0",aM,aO),aA.call(ak+"__cyclotomicExp_w0",aO,aP),aA.call(ak+"__cyclotomicExp_w0",aP,aT),aA.call(ie+"_mul",aT,az,aT),aA.call(ak+"__cyclotomicExp_w0",aT,az),aA.call(ie+"_conjugate",aM,aM),aA.call(ie+"_mul",az,aM,az),aA.call(ie+"_mul",az,aS,az),aA.call(ie+"_conjugate",aS,aM),aA.call(ie+"_mul",aO,aS,aO),aA.call(ie+"_frobeniusMap3",aO,aO),aA.call(ie+"_mul",aT,aM,aT),aA.call(ie+"_frobeniusMap1",aT,aT),aA.call(ie+"_mul",aq,aP,aq),aA.call(ie+"_frobeniusMap2",aq,aq),aA.call(ie+"_mul",aq,aO,aq),aA.call(ie+"_mul",aq,aT,aq),aA.call(ie+"_mul",aq,az,aE));for(let e=1;e<=5;e++)!function(e){let a=t.addFunction(ak+"_pairingEq"+e);for(let t=0;t<e;t++)a.addParam("p_"+t,"i32"),a.addParam("q_"+t,"i32");a.addParam("c","i32"),a.setReturnType("i32");let i=a.getCodeBuilder(),o=i.i32_const(t.alloc(aD)),l=i.i32_const(t.alloc(aD));a.addCode(i.call(ie+"_one",o));for(let t=0;t<e;t++)a.addCode(i.call(ak+"_prepareG1",i.getLocal("p_"+t),i.i32_const(id))),a.addCode(i.call(ak+"_prepareG2",i.getLocal("q_"+t),i.i32_const(i_))),a.addCode(i.if(i.i32_eqz(i.call(aH+"_inGroupAffine",i.i32_const(id))),i.ret(i.i32_const(0))),i.if(i.i32_eqz(i.call(aY+"_inGroupAffine",i.i32_const(i_))),i.ret(i.i32_const(0)))),a.addCode(i.call(ak+"_millerLoop",i.i32_const(id),i.i32_const(i_),l)),a.addCode(i.call(ie+"_mul",o,l,o));a.addCode(i.call(ak+"_finalExponentiation",o,o)),a.addCode(i.call(ie+"_eq",o,i.getLocal("c")))}(e),t.exportFunction(ak+"_pairingEq"+e);(aR=t.addFunction(ak+"_pairing")).addParam("p","i32"),aR.addParam("q","i32"),aR.addParam("r","i32"),aN=(aU=aR.getCodeBuilder()).i32_const(t.alloc(aD)),aR.addCode(aU.call(ak+"_prepareG1",aU.getLocal("p"),aU.i32_const(id))),aR.addCode(aU.call(ak+"_prepareG2",aU.getLocal("q"),aU.i32_const(i_))),aR.addCode(aU.call(ak+"_millerLoop",aU.i32_const(id),aU.i32_const(i_),aN)),aR.addCode(aU.call(ak+"_finalExponentiation",aN,aU.getLocal("r"))),t.exportFunction(ak+"_pairing"),t.exportFunction(ak+"_prepareG1"),t.exportFunction(ak+"_prepareG2"),t.exportFunction(ak+"_millerLoop"),t.exportFunction(ak+"_finalExponentiation"),t.exportFunction(ak+"_finalExponentiationOld"),t.exportFunction(ak+"__cyclotomicSquare"),t.exportFunction(ak+"__cyclotomicExp_w0"),t.exportFunction(it+"_mul1"),t.exportFunction(it+"_mul01"),t.exportFunction(ie+"_mul014"),t.exportFunction(aH+"_inGroupAffine"),t.exportFunction(aH+"_inGroup"),t.exportFunction(aY+"_inGroupAffine"),t.exportFunction(aY+"_inGroup")}},86981,(t,e,a)=>{e.exports.buildBn128=t.r(54961),e.exports.buildBls12381=t.r(81896),e.exports.buildF1m=t.r(68469)},42537,(t,e,a)=>{e.exports=t.x("vm",()=>require("vm"))},37702,(t,e,a)=>{e.exports=t.x("worker_threads",()=>require("worker_threads"))},69561,(t,e,a)=>{let i=t.r(92509),o=t.r(42537),l=t.r(37702),n=Symbol.for("worker"),c=Symbol.for("events");class r{constructor(){Object.defineProperty(this,c,{value:new Map})}dispatchEvent(t){if(t.target=t.currentTarget=this,this["on"+t.type])try{this["on"+t.type](t)}catch(t){console.error(t)}let e=this[c].get(t.type);null!=e&&e.forEach(e=>{try{e.call(this,t)}catch(t){console.error(t)}})}addEventListener(t,e){let a=this[c].get(t);a||this[c].set(t,a=[]),a.push(e)}removeEventListener(t,e){let a=this[c].get(t);if(a){let t=a.indexOf(e);-1!==t&&a.splice(t,1)}}}function s(t,e){this.type=t,this.timeStamp=Date.now(),this.target=this.currentTarget=this.data=null}e.exports=l.isMainThread?function(){class t extends r{constructor(t,e){let a;super();const{name:o,type:c}=e||{};t+="",a=/^data:/.test(t)?t:i.fileURLToPath(new i.URL(t,d));const r=new l.Worker("/ROOT/node_modules/web-worker/cjs/node.js",{workerData:{mod:a,name:o,type:c}});Object.defineProperty(this,n,{value:r}),r.on("message",t=>{let e=new s("message");e.data=t,this.dispatchEvent(e)}),r.on("error",t=>{t.type="error",this.dispatchEvent(t)}),r.on("exit",()=>{this.dispatchEvent(new s("close"))})}postMessage(t,e){this[n].postMessage(t,e)}terminate(){this[n].terminate()}}return t.prototype.onmessage=t.prototype.onerror=t.prototype.onclose=null,t}():function(){let{mod:e,name:a,type:i}=l.workerData,o=t.g.self=t.g,n=[];function c(){let t=n;n=null,t.forEach(t=>{o.dispatchEvent(t)})}l.parentPort.on("message",t=>{let e=new s("message");e.data=t,null==n?o.dispatchEvent(e):n.push(e)}),l.parentPort.on("error",t=>{t.type="Error",o.dispatchEvent(t)});class d extends r{postMessage(t,e){l.parentPort.postMessage(t,e)}close(){process.exit()}}let f=Object.getPrototypeOf(t.g);delete f.constructor,Object.defineProperties(d.prototype,f),f=Object.setPrototypeOf(t.g,new d),["postMessage","addEventListener","removeEventListener","dispatchEvent"].forEach(e=>{f[e]=f[e].bind(t.g)}),t.g.name=a;let u=/^data:/.test(e);if("module"===i)Promise.resolve().then(()=>{let t=Error("Cannot find module as expression is too dynamic");throw t.code="MODULE_NOT_FOUND",t}).catch(t=>{if(u&&"Not supported"===t.message)return console.warn("Worker(): Importing data: URLs requires Node 12.10+. Falling back to classic worker."),_(e,a);console.error(t)}).then(c);else{try{if(/^data:/.test(e))_(e,a);else{let t=Error("Cannot find module as expression is too dynamic");throw t.code="MODULE_NOT_FOUND",t}}catch(t){console.error(t)}Promise.resolve().then(c)}}();let d=i.pathToFileURL(process.cwd()+"/");function _(t,e){let{data:a}=function(t){let[e,a,i,o]=t.match(/^data: *([^;,]*)(?: *; *([^,]*))? *,(.*)$/)||[];if(!e)throw Error("Invalid Data URL.");if(i)if("base64"===i.toLowerCase())o=Buffer.from(o,"base64").toString();else throw Error('Unknown Data URL encoding "'+i+'"');return{type:a,data:o}}(t);return o.runInThisContext(a,{filename:"worker.<"+(e||"data:")+">"})}},12249,(t,e,a)=>{e.exports=t.x("constants",()=>require("constants"))},19668,(t,e,a)=>{e.exports=t.x("readline",()=>require("readline"))},17670,(t,e,a)=>{"use strict";var i=/[|\\{}()[\]^$+*?.]/g,o=Object.prototype.hasOwnProperty,l=function(t,e){return o.apply(t,[e])};a.escapeRegExpChars=function(t){return t?String(t).replace(i,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},c=/[&<>'"]/g;function r(t){return n[t]||t}function s(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'}a.escapeXML=function(t){return void 0==t?"":String(t).replace(c,r)};try{"function"==typeof Object.defineProperty?Object.defineProperty(a.escapeXML,"toString",{value:s}):a.escapeXML.toString=s}catch(t){console.warn("Unable to set escapeXML.toString (is the Function prototype frozen?)")}a.shallowCopy=function(t,e){if(e=e||{},null!=t)for(var a in e)l(e,a)&&"__proto__"!==a&&"constructor"!==a&&(t[a]=e[a]);return t},a.shallowCopyFromList=function(t,e,a){if(a=a||[],e=e||{},null!=t)for(var i=0;i<a.length;i++){var o=a[i];if(void 0!==e[o]){if(!l(e,o)||"__proto__"===o||"constructor"===o)continue;t[o]=e[o]}}return t},a.cache={_data:{},set:function(t,e){this._data[t]=e},get:function(t){return this._data[t]},remove:function(t){delete this._data[t]},reset:function(){this._data={}}},a.hyphenToCamel=function(t){return t.replace(/-[a-z]/g,function(t){return t[1].toUpperCase()})},a.createNullProtoObjWherePossible="function"==typeof Object.create?function(){return Object.create(null)}:function(){return{}},a.hasOwnOnlyObject=function(t){var e=a.createNullProtoObjWherePossible();for(var i in t)l(t,i)&&(e[i]=t[i]);return e}},84656,t=>{t.v({name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"3.1.10",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",license:"Apache-2.0",bin:{ejs:"./bin/cli.js"},main:"./lib/ejs.js",jsdelivr:"ejs.min.js",unpkg:"ejs.min.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{jake:"^10.8.5"},devDependencies:{browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^4.0.2","lru-cache":"^4.0.1",mocha:"^10.2.0","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"npx jake test"}})},68365,(t,e,a)=>{"use strict";var i=t.r(22734),o=t.r(14747),l=t.r(17670),n=!1,c=t.r(84656).version,r="locals",s=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],d=s.concat("cache"),_=/^\uFEFF/,f=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;function u(t,e){var o;if(e.some(function(e){return o=a.resolveInclude(t,e,!0),i.existsSync(o)}))return o}function g(t,e){var i,o=t.filename,l=arguments.length>1;if(t.cache){if(!o)throw Error("cache option requires a filename");if(i=a.cache.get(o))return i;l||(e=p(o).toString().replace(_,""))}else if(!l){if(!o)throw Error("Internal EJS error: no file name or template provided");e=p(o).toString().replace(_,"")}return i=a.compile(e,t),t.cache&&a.cache.set(o,i),i}function p(t){return a.fileLoader(t)}function h(t,e,a,i,o){var l=e.split("\n"),n=Math.max(i-3,0),c=Math.min(l.length,i+3),r=o(a),s=l.slice(n,c).map(function(t,e){var a=e+n+1;return(a==i?" >> ":"    ")+a+"| "+t}).join("\n");throw t.path=r,t.message=(r||"ejs")+":"+i+"\n"+s+"\n\n"+t.message,t}function L(t){return t.replace(/;(\s*$)/,"$1")}function m(t,e){var i=l.hasOwnOnlyObject(e),o=l.createNullProtoObjWherePossible();this.templateText=t,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",o.client=i.client||!1,o.escapeFunction=i.escape||i.escapeFunction||l.escapeXML,o.compileDebug=!1!==i.compileDebug,o.debug=!!i.debug,o.filename=i.filename,o.openDelimiter=i.openDelimiter||a.openDelimiter||"<",o.closeDelimiter=i.closeDelimiter||a.closeDelimiter||">",o.delimiter=i.delimiter||a.delimiter||"%",o.strict=i.strict||!1,o.context=i.context,o.cache=i.cache||!1,o.rmWhitespace=i.rmWhitespace,o.root=i.root,o.includer=i.includer,o.outputFunctionName=i.outputFunctionName,o.localsName=i.localsName||a.localsName||r,o.views=i.views,o.async=i.async,o.destructuredLocals=i.destructuredLocals,o.legacyInclude=void 0===i.legacyInclude||!!i.legacyInclude,o.strict?o._with=!1:o._with=void 0===i._with||i._with,this.opts=o,this.regex=this.createRegex()}a.cache=l.cache,a.fileLoader=i.readFileSync,a.localsName=r,a.promiseImpl=Function("return this;")().Promise,a.resolveInclude=function(t,e,a){var i=o.dirname,l=o.extname,n=(0,o.resolve)(a?e:i(e),t);return l(t)||(n+=".ejs"),n},a.compile=function(t,e){return e&&e.scope&&(n||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),n=!0),e.context||(e.context=e.scope),delete e.scope),new m(t,e).compile()},a.render=function(t,e,a){var i=e||l.createNullProtoObjWherePossible(),o=a||l.createNullProtoObjWherePossible();return 2==arguments.length&&l.shallowCopyFromList(o,i,s),g(o,t)(i)},a.renderFile=function(){var t,e,i,o,n=Array.prototype.slice.call(arguments),c=n.shift(),r={filename:c};"function"==typeof arguments[arguments.length-1]&&(e=n.pop()),n.length?(i=n.shift(),n.length?l.shallowCopy(r,n.pop()):(i.settings&&(i.settings.views&&(r.views=i.settings.views),i.settings["view cache"]&&(r.cache=!0),(o=i.settings["view options"])&&l.shallowCopy(r,o)),l.shallowCopyFromList(r,i,d)),r.filename=c):i=l.createNullProtoObjWherePossible();var s=i,_=e;if(_){try{t=g(r)(s)}catch(t){return _(t)}_(null,t)}else if("function"==typeof a.promiseImpl)return new a.promiseImpl(function(e,a){try{t=g(r)(s),e(t)}catch(t){a(t)}});else throw Error("Please provide a callback function")},a.Template=m,a.clearCache=function(){a.cache.reset()},m.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},m.prototype={createRegex:function(){var t="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",e=l.escapeRegExpChars(this.opts.delimiter),a=l.escapeRegExpChars(this.opts.openDelimiter),i=l.escapeRegExpChars(this.opts.closeDelimiter);return new RegExp(t=t.replace(/%/g,e).replace(/</g,a).replace(/>/g,i))},compile:function(){var t,e,n,c=this.opts,r="",s="",d=c.escapeFunction,_=c.filename?JSON.stringify(c.filename):"undefined";if(!this.source){if(this.generateSource(),r+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',c.outputFunctionName){if(!f.test(c.outputFunctionName))throw Error("outputFunctionName is not a valid JS identifier.");r+="  var "+c.outputFunctionName+" = __append;\n"}if(c.localsName&&!f.test(c.localsName))throw Error("localsName is not a valid JS identifier.");if(c.destructuredLocals&&c.destructuredLocals.length){for(var p="  var __locals = ("+c.localsName+" || {}),\n",L=0;L<c.destructuredLocals.length;L++){var m=c.destructuredLocals[L];if(!f.test(m))throw Error("destructuredLocals["+L+"] is not a valid JS identifier.");L>0&&(p+=",\n  "),p+=m+" = __locals."+m}r+=p+";\n"}!1!==c._with&&(r+="  with ("+c.localsName+" || {}) {\n",s+="  }\n"),s+="  return __output;\n",this.source=r+this.source+s}t=c.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+_+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,c.client&&(t="escapeFn = escapeFn || "+d.toString()+";\n"+t,c.compileDebug&&(t="rethrow = rethrow || "+h.toString()+";\n"+t)),c.strict&&(t='"use strict";\n'+t),c.debug&&console.log(t),c.compileDebug&&c.filename&&(t=t+"\n//# sourceURL="+_+"\n");try{if(c.async)try{n=Function("return (async function(){}).constructor;")()}catch(t){if(t instanceof SyntaxError)throw Error("This environment does not support async/await");throw t}else n=Function;e=new n(c.localsName+", escapeFn, include, rethrow",t)}catch(t){throw t instanceof SyntaxError&&(c.filename&&(t.message+=" in "+c.filename),t.message+=" while compiling ejs\n\n",t.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",t.message+="https://github.com/RyanZim/EJS-Lint",c.async||(t.message+="\n",t.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),t}var b=c.client?e:function(t){return e.apply(c.context,[t||l.createNullProtoObjWherePossible(),d,function(e,o){var n=l.shallowCopy(l.createNullProtoObjWherePossible(),t);return o&&(n=l.shallowCopy(n,o)),(function(t,e){var o=l.shallowCopy(l.createNullProtoObjWherePossible(),e);if(o.filename=function(t,e){var o,l,n=e.views,c=/^[A-Za-z]+:\\|^\//.exec(t);if(c&&c.length)t=t.replace(/^\/*/,""),o=Array.isArray(e.root)?u(t,e.root):a.resolveInclude(t,e.root||"/",!0);else if(e.filename&&(l=a.resolveInclude(t,e.filename),i.existsSync(l)&&(o=l)),!o&&Array.isArray(n)&&(o=u(t,n)),!o&&"function"!=typeof e.includer)throw Error('Could not find the include file "'+e.escapeFunction(t)+'"');return o}(t,o),"function"==typeof e.includer){var n=e.includer(t,o.filename);if(n&&(n.filename&&(o.filename=n.filename),n.template))return g(o,n.template)}return g(o)})(e,c)(n)},h])};if(c.filename&&"function"==typeof Object.defineProperty){var x=c.filename,y=o.basename(x,o.extname(x));try{Object.defineProperty(b,"name",{value:y,writable:!1,enumerable:!1,configurable:!0})}catch(t){}}return b},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,e=this.parseTemplateText(),a=this.opts.delimiter,i=this.opts.openDelimiter,o=this.opts.closeDelimiter;e&&e.length&&e.forEach(function(l,n){var c;if(0===l.indexOf(i+a)&&0!==l.indexOf(i+a+a)&&(c=e[n+2])!=a+o&&c!="-"+a+o&&c!="_"+a+o)throw Error('Could not find matching close tag for "'+l+'".');t.scanLine(l)})},parseTemplateText:function(){for(var t,e=this.templateText,a=this.regex,i=a.exec(e),o=[];i;)0!==(t=i.index)&&(o.push(e.substring(0,t)),e=e.slice(t)),o.push(i[0]),e=e.slice(i[0].length),i=a.exec(e);return e&&o.push(e),o},_addOutput:function(t){if(this.truncate&&(t=t.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!t)return t;t=(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+t+'")\n'},scanLine:function(t){var e=this.opts.delimiter,a=this.opts.openDelimiter,i=this.opts.closeDelimiter,o=0;switch(o=t.split("\n").length-1,t){case a+e:case a+e+"_":this.mode=m.modes.EVAL;break;case a+e+"=":this.mode=m.modes.ESCAPED;break;case a+e+"-":this.mode=m.modes.RAW;break;case a+e+"#":this.mode=m.modes.COMMENT;break;case a+e+e:this.mode=m.modes.LITERAL,this.source+='    ; __append("'+t.replace(a+e+e,a+e)+'")\n';break;case e+e+i:this.mode=m.modes.LITERAL,this.source+='    ; __append("'+t.replace(e+e+i,e+i)+'")\n';break;case e+i:case"-"+e+i:case"_"+e+i:this.mode==m.modes.LITERAL&&this._addOutput(t),this.mode=null,this.truncate=0===t.indexOf("-")||0===t.indexOf("_");break;default:if(this.mode){switch(this.mode){case m.modes.EVAL:case m.modes.ESCAPED:case m.modes.RAW:t.lastIndexOf("//")>t.lastIndexOf("\n")&&(t+="\n")}switch(this.mode){case m.modes.EVAL:this.source+="    ; "+t+"\n";break;case m.modes.ESCAPED:this.source+="    ; __append(escapeFn("+L(t)+"))\n";break;case m.modes.RAW:this.source+="    ; __append("+L(t)+")\n";break;case m.modes.COMMENT:break;case m.modes.LITERAL:this._addOutput(t)}}else this._addOutput(t)}this.opts.compileDebug&&o&&(this.currentLine+=o,this.source+="    ; __line = "+this.currentLine+"\n")}},a.escapeXML=l.escapeXML,a.__express=a.renderFile,a.VERSION=c,a.name="ejs"},24868,(t,e,a)=>{e.exports=t.x("fs/promises",()=>require("fs/promises"))},74869,t=>{"use strict";let e;var a=t.i(47909),i=t.i(74017),o=t.i(96250),l=t.i(59756),n=t.i(61916),c=t.i(74677),r=t.i(69741),s=t.i(16795),d=t.i(87718),_=t.i(95169),f=t.i(47587),u=t.i(66012),g=t.i(70101),p=t.i(26937),h=t.i(10372),L=t.i(93695);t.i(52474);var m=t.i(220),b=t.i(89171);let x=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function y(t,e){if(!e||10==e)return BigInt(t);if(16==e)if("0x"==t.slice(0,2))return BigInt(t);else return BigInt("0x"+t)}function F(t,e){let a=BigInt(0);e=BigInt(e);for(let i=0;i<t.length;i++)a=a*e+BigInt(t[i]);return a}function w(t){let e=t.toString(16);return(e.length-1)*4+x[parseInt(e[0],16)]}function B(t){return BigInt(t)<BigInt(0)}function C(t){return!t}function v(t,e){return BigInt(t)<<BigInt(e)}function A(t,e){return BigInt(t)>>BigInt(e)}function I(t){return(BigInt(t)&BigInt(1))==BigInt(1)}function E(t){let e=BigInt(t),a=[];for(;e;){if(e&BigInt(1)){let t=2-Number(e%BigInt(4));a.push(t),e-=BigInt(t)}else a.push(0);e>>=BigInt(1)}return a}function P(t){let e=BigInt(t),a=[];for(;e;)e&BigInt(1)?a.push(1):a.push(0),e>>=BigInt(1);return a}function O(t){if(t>BigInt(Number.MAX_SAFE_INTEGER))throw Error("Number too big");return Number(t)}function S(t,e){let a=[],i=BigInt(t);for(e=BigInt(e);i;)a.unshift(Number(i%e)),i/=e;return a}function q(t,e){return BigInt(t)+BigInt(e)}function z(t,e){return BigInt(t)-BigInt(e)}function M(t){return-BigInt(t)}function T(t,e){return BigInt(t)*BigInt(e)}function R(t){return BigInt(t)*BigInt(t)}function U(t,e){return BigInt(t)**BigInt(e)}function N(t,e){return BigInt(t)**BigInt(e)}function k(t){return BigInt(t)>=0?BigInt(t):-BigInt(t)}function j(t,e){return BigInt(t)/BigInt(e)}function G(t,e){return BigInt(t)%BigInt(e)}function $(t,e){return BigInt(t)==BigInt(e)}function D(t,e){return BigInt(t)!=BigInt(e)}function W(t,e){return BigInt(t)<BigInt(e)}function Z(t,e){return BigInt(t)>BigInt(e)}function V(t,e){return BigInt(t)<=BigInt(e)}function J(t,e){return BigInt(t)>=BigInt(e)}function Q(t,e){return BigInt(t)&BigInt(e)}function H(t,e){return BigInt(t)|BigInt(e)}function K(t,e){return BigInt(t)^BigInt(e)}function X(t,e){return BigInt(t)&&BigInt(e)}function Y(t,e){return BigInt(t)||BigInt(e)}function tt(t){return!BigInt(t)}function te(t,e,a,i){let o="0000000"+a.toString(16),l=new Uint32Array(t.buffer,t.byteOffset+e,i/4),n=((o.length-7)*4-1>>5)+1;for(let t=0;t<n;t++)l[t]=parseInt(o.substring(o.length-8*t-8,o.length-8*t),16);for(let t=n;t<l.length;t++)l[t]=0;for(let e=4*l.length;e<i;e++)t[e]=O(Q(A(a,8*e),255))}function ta(t,e,a,i){let o="0000000"+a.toString(16),l=new DataView(t.buffer,t.byteOffset+e,i),n=((o.length-7)*4-1>>5)+1;for(let t=0;t<n;t++)l.setUint32(i-4*t-4,parseInt(o.substring(o.length-8*t-8,o.length-8*t),16),!1);for(let t=0;t<i/4-n;t++)l[t]=0}function ti(t,e,a){a=a||t.byteLength,e=e||0;let i=new Uint32Array(t.buffer,t.byteOffset+e,a/4),o=Array(a/4);return i.forEach((t,e)=>o[o.length-e-1]=t.toString(16).padStart(8,"0")),y(o.join(""),16)}function to(t,e,a){a=a||t.byteLength,e=e||0;let i=new DataView(t.buffer,t.byteOffset+e,a),o=Array(a/4);for(let t=0;t<a/4;t++)o[t]=i.getUint32(4*t,!1).toString(16).padStart(8,"0");return y(o.join(""),16)}function tl(t,e){return t.toString(e)}function tn(t){let e=new Uint8Array(Math.floor((w(t)-1)/8)+1);return te(e,0,t,e.byteLength),e}let tc=y(0),tr=y(1);t.s(["abs",()=>k,"add",()=>q,"band",()=>Q,"bitLength",()=>w,"bits",()=>P,"bor",()=>H,"bxor",()=>K,"div",()=>j,"e",0,y,"eq",()=>$,"exp",()=>N,"fromArray",()=>F,"fromRprBE",()=>to,"fromRprLE",()=>ti,"fromString",()=>y,"geq",()=>J,"gt",()=>Z,"isNegative",()=>B,"isOdd",()=>I,"isZero",()=>C,"land",()=>X,"leq",()=>V,"lnot",()=>tt,"lor",()=>Y,"lt",()=>W,"mod",()=>G,"mul",()=>T,"naf",()=>E,"neg",()=>M,"neq",()=>D,"one",0,tr,"pow",()=>U,"shiftLeft",()=>v,"shiftRight",()=>A,"shl",0,v,"shr",0,A,"square",()=>R,"sub",()=>z,"toArray",()=>S,"toLEBuff",()=>tn,"toNumber",()=>O,"toRprBE",()=>ta,"toRprLE",()=>te,"toString",()=>tl,"zero",0,tc],33940);var ts=t.i(33940);let td=[];for(let t=0;t<256;t++)td[t]=function(t,e){let a=0,i=t;for(let t=0;t<8;t++)a<<=1,a|=1&i,i>>=1;return a}(t,8);function t_(t,e,a){if(!a)return t.one;let i=P(a);if(0==i.length)return t.one;let o=e;for(let a=i.length-2;a>=0;a--)o=t.square(o),i[a]&&(o=t.mul(o,e));return o}function tf(t,e,a,i,o){t[e]=t[e]+t[a]>>>0,t[o]=(t[o]^t[e])>>>0,t[o]=(t[o]<<16|t[o]>>>16&65535)>>>0,t[i]=t[i]+t[o]>>>0,t[a]=(t[a]^t[i])>>>0,t[a]=(t[a]<<12|t[a]>>>20&4095)>>>0,t[e]=t[e]+t[a]>>>0,t[o]=(t[o]^t[e])>>>0,t[o]=(t[o]<<8|t[o]>>>24&255)>>>0,t[i]=t[i]+t[o]>>>0,t[a]=(t[a]^t[i])>>>0,t[a]=(t[a]<<7|t[a]>>>25&127)>>>0}class tu{constructor(t){t=t||[0,0,0,0,0,0,0,0],this.state=[0x61707865,0x3320646e,0x79622d32,0x6b206574,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],0,0,0,0],this.idx=16,this.buff=Array(16)}nextU32(){return 16==this.idx&&this.update(),this.buff[this.idx++]}nextU64(){return q(T(this.nextU32(),0x100000000),this.nextU32())}nextBool(){return(1&this.nextU32())==1}update(){for(let t=0;t<16;t++)this.buff[t]=this.state[t];for(let e=0;e<10;e++){var t;tf(t=this.buff,0,4,8,12),tf(t,1,5,9,13),tf(t,2,6,10,14),tf(t,3,7,11,15),tf(t,0,5,10,15),tf(t,1,6,11,12),tf(t,2,7,8,13),tf(t,3,4,9,14)}for(let t=0;t<16;t++)this.buff[t]=this.buff[t]+this.state[t]>>>0;this.idx=0,this.state[12]=this.state[12]+1>>>0,0!=this.state[12]||(this.state[13]=this.state[13]+1>>>0,0!=this.state[13]||(this.state[14]=this.state[14]+1>>>0,0==this.state[14]&&(this.state[15]=this.state[15]+1>>>0)))}}var tg=t.i(54799);function tp(t){let e=new Uint8Array(t);return tg.default.randomFillSync(e),e}let th=null;function tL(){return th||(th=new tu(function(){let t=new Uint32Array(tp(32).buffer),e=[];for(let a=0;a<8;a++)e.push(t[a]);return e}()))}class tm{constructor(t,e,a){this.F=e,this.G=t,this.opMulGF=a;let i=e.sqrt_t||e.t,o=e.sqrt_s||e.s,l=e.one;for(;e.eq(e.pow(l,e.half),e.one);)l=e.add(l,e.one);this.w=Array(o+1),this.wi=Array(o+1),this.w[o]=this.F.pow(l,i),this.wi[o]=this.F.inv(this.w[o]);let n=o-1;for(;n>=0;)this.w[n]=this.F.square(this.w[n+1]),this.wi[n]=this.F.square(this.wi[n+1]),n--;this.roots=[],this._setRoots(Math.min(o,15))}_setRoots(t){for(let e=t;e>=0&&!this.roots[e];e--){let t=this.F.one,a=1<<e,i=Array(a);for(let o=0;o<a;o++)i[o]=t,t=this.F.mul(t,this.w[e]);this.roots[e]=i}}fft(t){if(t.length<=1)return t;let e=tb(t.length-1)+1;this._setRoots(e);let a=1<<e;if(t.length!=a)throw Error("Size must be multiple of 2");return tx(this,t,e,0,1)}ifft(t){if(t.length<=1)return t;let e=tb(t.length-1)+1;this._setRoots(e);let a=1<<e;if(t.length!=a)throw Error("Size must be multiple of 2");let i=tx(this,t,e,0,1),o=this.F.inv(this.F.mulScalar(this.F.one,a)),l=Array(a);for(let t=0;t<a;t++)l[t]=this.opMulGF(i[(a-t)%a],o);return l}}function tb(t){return((0xffff0000&t)!=0?(t&=0xffff0000,16):0)|((0xff00ff00&t)!=0?(t&=0xff00ff00,8):0)|((0xf0f0f0f0&t)!=0?(t&=0xf0f0f0f0,4):0)|((0xcccccccc&t)!=0?(t&=0xcccccccc,2):0)|(0xaaaaaaaa&t)!=0}function tx(t,e,a,i,o){let l=1<<a;if(1==l)return[e[i]];if(2==l)return[t.G.add(e[i],e[i+o]),t.G.sub(e[i],e[i+o])];let n=l>>1,c=tx(t,e,a-1,i,2*o),r=tx(t,e,a-1,i+o,2*o),s=Array(l);for(let e=0;e<n;e++)s[e]=t.G.add(c[e],t.opMulGF(r[e],t.roots[a][e])),s[e+n]=t.G.sub(c[e],t.opMulGF(r[e],t.roots[a][e]));return s}class ty{constructor(t){this.type="F1",this.one=BigInt(1),this.zero=BigInt(0),this.p=BigInt(t),this.m=1,this.negone=this.p-this.one,this.two=BigInt(2),this.half=this.p>>this.one,this.bitLength=w(this.p),this.mask=(this.one<<BigInt(this.bitLength))-this.one,this.n64=Math.floor((this.bitLength-1)/64)+1,this.n32=2*this.n64,this.n8=8*this.n64,this.R=this.e(this.one<<BigInt(64*this.n64)),this.Ri=this.inv(this.R);const e=this.negone>>this.one;this.nqr=this.two;let a=this.pow(this.nqr,e);for(;!this.eq(a,this.negone);)this.nqr=this.nqr+this.one,a=this.pow(this.nqr,e);for(this.s=0,this.t=this.negone;(this.t&this.one)==this.zero;)this.s=this.s+1,this.t=this.t>>this.one;this.nqr_to_t=this.pow(this.nqr,this.t),function(t){if(t.m%2==1)if($(G(t.p,4),1))if($(G(t.p,8),1))if($(G(t.p,16),1)){var e,a,i=t;for(i.sqrt_q=U(i.p,i.m),i.sqrt_s=0,i.sqrt_t=z(i.sqrt_q,1);!I(i.sqrt_t);)i.sqrt_s=i.sqrt_s+1,i.sqrt_t=j(i.sqrt_t,2);let o=i.one;for(;i.eq(o,i.one);){let t=i.random();i.sqrt_z=i.pow(t,i.sqrt_t),o=i.pow(i.sqrt_z,2**(i.sqrt_s-1))}i.sqrt_tm1d2=j(z(i.sqrt_t,1),2),i.sqrt=function(t){if(this.isZero(t))return this.zero;let e=this.pow(t,this.sqrt_tm1d2),a=this.pow(this.mul(this.square(e),t),2**(this.sqrt_s-1));if(this.eq(a,this.negone))return null;let i=this.sqrt_s,o=this.mul(t,e),l=this.mul(o,e),n=this.sqrt_z;for(;!this.eq(l,this.one);){let t=this.square(l),a=1;for(;!this.eq(t,this.one);)t=this.square(t),a++;e=n;for(let t=0;t<i-a-1;t++)e=this.square(e);n=this.square(e),l=this.mul(l,n),o=this.mul(o,e),i=a}return this.geq(o,this.zero)?o:this.neg(o)}}else if($(G(t.p,16),9))t.sqrt=function(){throw Error("Sqrt alg 4 not implemented")};else throw Error("Field withot sqrt");else if($(G(t.p,8),5))t.sqrt=function(){throw Error("Sqrt alg 3 not implemented")};else throw Error("Field withot sqrt");else{$(G(t.p,4),3)&&((e=t).sqrt_q=U(e.p,e.m),e.sqrt_e1=j(z(e.sqrt_q,3),4),e.sqrt=function(t){if(this.isZero(t))return this.zero;let a=this.pow(t,this.sqrt_e1),i=this.mul(this.square(a),t);if(this.eq(i,this.negone))return null;let o=this.mul(a,t);return e.geq(o,e.zero)?o:e.neg(o)})}else{let e=G(U(t.p,t.m/2),4);1==e?t.sqrt=function(){throw Error("Sqrt alg 10 not implemented")}:3==e?((a=t).sqrt_q=U(a.p,a.m/2),a.sqrt_e34=j(z(a.sqrt_q,3),4),a.sqrt_e12=j(z(a.sqrt_q,1),2),a.frobenius=function(t,e){return t%2==1?a.conjugate(e):e},a.sqrt=function(t){let e,a=this.pow(t,this.sqrt_e34),i=this.mul(this.square(a),t),o=this.mul(this.frobenius(1,i),i);if(this.eq(o,this.negone))return null;let l=this.mul(a,t);if(this.eq(i,this.negone))e=this.mul(l,[this.F.zero,this.F.one]);else{let t=this.pow(this.add(this.one,i),this.sqrt_e12);e=this.mul(t,l)}return this.geq(e,this.zero)?e:this.neg(e)}):t.sqrt=function(){throw Error("Sqrt alg 8 not implemented")}}}(this),this.FFT=new tm(this,this,this.mul.bind(this)),this.fft=this.FFT.fft.bind(this.FFT),this.ifft=this.FFT.ifft.bind(this.FFT),this.w=this.FFT.w,this.wi=this.FFT.wi,this.shift=this.square(this.nqr),this.k=this.exp(this.nqr,2**this.s)}e(t,e){let a;if(e?16==e&&(a=BigInt("0x"+t)):a=BigInt(t),!(a<0))return a>=this.p?a%this.p:a;{let t=-a;return t>=this.p&&(t%=this.p),this.p-t}}add(t,e){let a=t+e;return a>=this.p?a-this.p:a}sub(t,e){return t>=e?t-e:this.p-e+t}neg(t){return t?this.p-t:t}mul(t,e){return t*e%this.p}mulScalar(t,e){return t*this.e(e)%this.p}square(t){return t*t%this.p}eq(t,e){return t==e}neq(t,e){return t!=e}lt(t,e){return(t>this.half?t-this.p:t)<(e>this.half?e-this.p:e)}gt(t,e){return(t>this.half?t-this.p:t)>(e>this.half?e-this.p:e)}leq(t,e){return(t>this.half?t-this.p:t)<=(e>this.half?e-this.p:e)}geq(t,e){return(t>this.half?t-this.p:t)>=(e>this.half?e-this.p:e)}div(t,e){return this.mul(t,this.inv(e))}idiv(t,e){if(!e)throw Error("Division by zero");return t/e}inv(t){if(!t)throw Error("Division by zero");let e=this.zero,a=this.p,i=this.one,o=t%this.p;for(;o;){let t=a/o;[e,i]=[i,e-t*i],[a,o]=[o,a-t*o]}return e<this.zero&&(e+=this.p),e}mod(t,e){return t%e}pow(t,e){return t_(this,t,e)}exp(t,e){return t_(this,t,e)}band(t,e){let a=t&e&this.mask;return a>=this.p?a-this.p:a}bor(t,e){let a=(t|e)&this.mask;return a>=this.p?a-this.p:a}bxor(t,e){let a=(t^e)&this.mask;return a>=this.p?a-this.p:a}bnot(t){let e=t^this.mask;return e>=this.p?e-this.p:e}shl(t,e){if(Number(e)<this.bitLength){let a=t<<e&this.mask;return a>=this.p?a-this.p:a}{let a=this.p-e;return Number(a)<this.bitLength?t>>a:this.zero}}shr(t,e){if(Number(e)<this.bitLength)return t>>e;{let a=this.p-e;if(!(Number(a)<this.bitLength))return 0;{let e=t<<a&this.mask;return e>=this.p?e-this.p:e}}}land(t,e){return t&&e?this.one:this.zero}lor(t,e){return t||e?this.one:this.zero}lnot(t){return t?this.zero:this.one}sqrt_old(t){if(t==this.zero)return this.zero;if(this.pow(t,this.negone>>this.one)!=this.one)return null;let e=this.s,a=this.nqr_to_t,i=this.pow(t,this.t),o=this.pow(t,this.add(this.t,this.one)>>this.one);for(;i!=this.one;){let t=this.square(i),l=1;for(;t!=this.one;)l++,t=this.square(t);let n=a;for(let t=0;t<e-l-1;t++)n=this.square(n);e=l,a=this.square(n),i=this.mul(i,a),o=this.mul(o,n)}return o>this.p>>this.one&&(o=this.neg(o)),o}normalize(t,e){if(!((t=BigInt(t,e))<0))return t>=this.p?t%this.p:t;{let e=-t;return e>=this.p&&(e%=this.p),this.p-e}}random(){let t=2*this.bitLength/8,e=this.zero;for(let a=0;a<t;a++)e=(e<<BigInt(8))+BigInt(tp(1)[0]);return e%this.p}toString(t,e){return e=e||10,t>this.half&&10==e?"-"+(this.p-t).toString(e):t.toString(e)}isZero(t){return t==this.zero}fromRng(t){let e;do{e=this.zero;for(let a=0;a<this.n64;a++)e+=t.nextU64()<<BigInt(64*a);e&=this.mask}while(e>=this.p)return e*this.Ri%this.p}fft(t){return this.FFT.fft(t)}ifft(t){return this.FFT.ifft(t)}toRprLE(t,e,a){te(t,e,a,8*this.n64)}toRprBE(t,e,a){ta(t,e,a,8*this.n64)}toRprBEM(t,e,a){return this.toRprBE(t,e,this.mul(this.R,a))}toRprLEM(t,e,a){return this.toRprLE(t,e,this.mul(this.R,a))}fromRprLE(t,e){return ti(t,e,this.n8)}fromRprBE(t,e){return to(t,e,this.n8)}fromRprLEM(t,e){return this.mul(this.fromRprLE(t,e),this.Ri)}fromRprBEM(t,e){return this.mul(this.fromRprBE(t,e),this.Ri)}toObject(t){return t}}var tF=t.i(86981);function tw(t){let e=BigInt(0),a=t.length,i=0,o=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;a>0;)a>=4?(a-=4,e+=BigInt(o.getUint32(a))<<BigInt(8*i),i+=4):a>=2?(a-=2,e+=BigInt(o.getUint16(a))<<BigInt(8*i),i+=2):(a-=1,e+=BigInt(o.getUint8(a))<<BigInt(8*i),i+=1);return e}function tB(t,e){let a=t,i=new Uint8Array(e),o=new DataView(i.buffer),l=e;for(;l>0;)l-4>=0?(l-=4,o.setUint32(l,Number(a&BigInt(0xffffffff))),a>>=BigInt(32)):l-2>=0?(l-=2,o.setUint16(l,Number(a&BigInt(65535))),a>>=BigInt(16)):(l-=1,o.setUint8(l,Number(a&BigInt(255))),a>>=BigInt(8));if(a)throw Error("Number does not fit in this length");return i}function tC(t){let e=BigInt(0),a=0,i=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;a<t.length;)a+4<=t.length?(e+=BigInt(i.getUint32(a,!0))<<BigInt(8*a),a+=4):a+2<=t.length?(e+=BigInt(i.getUint16(a,!0))<<BigInt(8*a),a+=2):(e+=BigInt(i.getUint8(a,!0))<<BigInt(8*a),a+=1);return e}function tv(t,e){let a=t;void 0===e&&0==(e=Math.floor((w(t)-1)/8)+1)&&(e=1);let i=new Uint8Array(e),o=new DataView(i.buffer),l=0;for(;l<e;)l+4<=e?(o.setUint32(l,Number(a&BigInt(0xffffffff)),!0),l+=4,a>>=BigInt(32)):l+2<=e?(o.setUint16(l,Number(a&BigInt(65535)),!0),l+=2,a>>=BigInt(16)):(o.setUint8(l,Number(a&BigInt(255)),!0),l+=1,a>>=BigInt(8));if(a)throw Error("Number does not fit in this length");return i}let tA=[];for(let t=0;t<256;t++)tA[t]=function(t,e){let a=0,i=t;for(let t=0;t<8;t++)a<<=1,a|=1&i,i>>=1;return a}(t,8);function tI(t,e){return(tA[t>>>24]|tA[t>>>16&255]<<8|tA[t>>>8&255]<<16|tA[255&t]<<24)>>>32-e}function tE(t){return((0xffff0000&t)!=0?(t&=0xffff0000,16):0)|((0xff00ff00&t)!=0?(t&=0xff00ff00,8):0)|((0xf0f0f0f0&t)!=0?(t&=0xf0f0f0f0,4):0)|((0xcccccccc&t)!=0?(t&=0xcccccccc,2):0)|(0xaaaaaaaa&t)!=0}function tP(t,e){let a=t.byteLength/e,i=tE(a);if(a!=1<<i)throw Error("Invalid number of pointers");for(let o=0;o<a;o++){let a=tI(o,i);if(o>a){let i=t.slice(o*e,(o+1)*e);t.set(t.slice(a*e,(a+1)*e),o*e),t.set(i,a*e)}}}function tO(t,e){let a=new Uint8Array(e*t.length);for(let i=0;i<t.length;i++)a.set(t[i],i*e);return a}function tS(t,e){let a=t.byteLength/e,i=Array(a);for(let o=0;o<a;o++)i[o]=t.slice(o*e,o*e+e);return i}t.s(["array2buffer",()=>tO,"beBuff2int",()=>tw,"beInt2Buff",()=>tB,"bitReverse",()=>tI,"buffReverseBits",()=>tP,"buffer2array",()=>tS,"leBuff2int",()=>tC,"leInt2Buff",()=>tv,"log2",()=>tE,"stringifyBigInts",()=>function t(e){if("bigint"==typeof e||void 0!==e.eq)return e.toString(10);if(e instanceof Uint8Array)return ti(e,0);if(Array.isArray(e))return e.map(t);{if("object"!=typeof e)return e;let a={};return Object.keys(e).forEach(i=>{a[i]=t(e[i])}),a}},"stringifyFElements",()=>function t(e,a){if("bigint"==typeof a||void 0!==a.eq)return a.toString(10);if(a instanceof Uint8Array)return e.toString(e.e(a));if(Array.isArray(a))return a.map(t.bind(this,e));{if("object"!=typeof a)return a;let i={};return Object.keys(a).forEach(o=>{i[o]=t(e,a[o])}),i}},"unstringifyBigInts",()=>function t(e){if("string"==typeof e&&/^[0-9]+$/.test(e)||"string"==typeof e&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(t);{if("object"!=typeof e)return e;if(null===e)return null;let a={};return Object.keys(e).forEach(i=>{a[i]=t(e[i])}),a}},"unstringifyFElements",()=>function t(e,a){if("string"==typeof a&&/^[0-9]+$/.test(a)||"string"==typeof a&&/^0x[0-9a-fA-F]+$/.test(a))return e.e(a);if(Array.isArray(a))return a.map(t.bind(this,e));{if("object"!=typeof a)return a;if(null===a)return null;let i={};return Object.keys(a).forEach(o=>{i[o]=t(e,a[o])}),i}}],81364);class tq{constructor(t){this.buffers=[],this.byteLength=t;for(let e=0;e<t;e+=0x40000000){const a=Math.min(t-e,0x40000000);this.buffers.push(new Uint8Array(a))}}slice(t,e){let a;void 0===e&&(e=this.byteLength),void 0===t&&(t=0);let i=e-t,o=Math.floor(t/0x40000000);if(o==Math.floor((t+i-1)/0x40000000)||0==i)return this.buffers[o].slice(t%0x40000000,t%0x40000000+i);let l=o,n=t%0x40000000,c=i;for(;c>0;){let t=n+c>0x40000000?0x40000000-n:c,e=new Uint8Array(this.buffers[l].buffer,this.buffers[l].byteOffset+n,t);if(t==i)return e.slice();a||(a=i<=0x40000000?new Uint8Array(i):new tq(i)),a.set(e,i-c),c-=t,l++,n=0}return a}set(t,e){void 0===e&&(e=0);let a=t.byteLength;if(0==a)return;let i=Math.floor(e/0x40000000);if(i==Math.floor((e+a-1)/0x40000000))if(t instanceof tq&&1==t.buffers.length)return this.buffers[i].set(t.buffers[0],e%0x40000000);else return this.buffers[i].set(t,e%0x40000000);let o=i,l=e%0x40000000,n=a;for(;n>0;){let e=l+n>0x40000000?0x40000000-l:n,i=t.slice(a-n,a-n+e);new Uint8Array(this.buffers[o].buffer,this.buffers[o].byteOffset+l,e).set(i),n-=e,o++,l=0}}}function tz(t,e,a,i){return async function(o){let l,n=Math.floor(o.byteLength/a);if(n*a!==o.byteLength)throw Error("Invalid buffer size");let c=Math.floor(n/t.concurrency),r=[];for(let l=0;l<t.concurrency;l++){let s;if(0==(s=l<t.concurrency-1?c:n-l*c))continue;let d=[{cmd:"ALLOCSET",var:0,buff:o.slice(l*c*a,l*c*a+s*a)},{cmd:"ALLOC",var:1,len:i*s},{cmd:"CALL",fnName:e,params:[{var:0},{val:s},{var:1}]},{cmd:"GET",out:0,var:1,len:i*s}];r.push(t.queueAction(d))}let s=await Promise.all(r);l=o instanceof tq?new tq(n*i):new Uint8Array(n*i);let d=0;for(let t=0;t<s.length;t++)l.set(s[t][0],d),d+=s[t][0].byteLength;return l}}class tM{constructor(t,e,a,i){if(this.tm=t,this.prefix=e,this.p=i,this.n8=a,this.type="F1",this.m=1,this.half=A(i,tr),this.bitLength=w(i),this.mask=z(v(tr,this.bitLength),tr),this.pOp1=t.alloc(a),this.pOp2=t.alloc(a),this.pOp3=t.alloc(a),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=this.tm.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.n64=Math.floor(a/8),this.n32=Math.floor(a/4),8*this.n64!=this.n8)throw Error("n8 must be a multiple of 8");this.half=A(this.p,tr),this.nqr=this.two;let o=this.exp(this.nqr,this.half);for(;!this.eq(o,this.negone);)this.nqr=this.add(this.nqr,this.one),o=this.exp(this.nqr,this.half);this.shift=this.mul(this.nqr,this.nqr),this.shiftInv=this.inv(this.shift),this.s=0;let l=z(this.p,tr);for(;!I(l);)this.s=this.s+1,l=A(l,tr);this.w=[],this.w[this.s]=this.exp(this.nqr,l);for(let t=this.s-1;t>=0;t--)this.w[t]=this.square(this.w[t+1]);if(!this.eq(this.w[0],this.one))throw Error("Error calculating roots of unity");this.batchToMontgomery=tz(t,e+"_batchToMontgomery",this.n8,this.n8),this.batchFromMontgomery=tz(t,e+"_batchFromMontgomery",this.n8,this.n8)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=tn(y(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}isNegative(t){return this.op1Bool("_isNegative",t)}e(t,e){if(t instanceof Uint8Array)return t;let a=y(t,e);B(a)?(Z(a=M(a),this.p)&&(a=G(a,this.p)),a=z(this.p,a)):Z(a,this.p)&&(a=G(a,this.p));let i=tv(a,this.n8);return this.toMontgomery(i)}toString(t,e){return tl(ti(this.fromMontgomery(t),0),e)}fromRng(t){let e,a=new Uint8Array(this.n8);do{e=tc;for(let a=0;a<this.n64;a++)e=q(e,v(t.nextU64(),64*a));e=Q(e,this.mask)}while(J(e,this.p))return te(a,0,e,this.n8),a}random(){return this.fromRng(tL())}toObject(t){return ti(this.fromMontgomery(t),0)}fromObject(t){let e=new Uint8Array(this.n8);return te(e,0,t,this.n8),this.toMontgomery(e)}toRprLE(t,e,a){t.set(this.fromMontgomery(a),e)}toRprBE(t,e,a){let i=this.fromMontgomery(a);for(let t=0;t<this.n8/2;t++){let e=i[t];i[t]=i[this.n8-1-t],i[this.n8-1-t]=e}t.set(i,e)}fromRprLE(t,e){e=e||0;let a=t.slice(e,e+this.n8);return this.toMontgomery(a)}async batchInverse(t){let e,a=!1,i=this.n8,o=this.n8;Array.isArray(t)?(t=tO(t,i),a=!0):t=t.slice(0,t.byteLength);let l=Math.floor(t.byteLength/i);if(l*i!==t.byteLength)throw Error("Invalid buffer size");let n=Math.floor(l/this.tm.concurrency),c=[];for(let e=0;e<this.tm.concurrency;e++){let a;if(0==(a=e<this.tm.concurrency-1?n:l-e*n))continue;let r=[{cmd:"ALLOCSET",var:0,buff:t.slice(e*n*i,e*n*i+a*i)},{cmd:"ALLOC",var:1,len:o*a},{cmd:"CALL",fnName:this.prefix+"_batchInverse",params:[{var:0},{val:i},{val:a},{var:1},{val:o}]},{cmd:"GET",out:0,var:1,len:o*a}];c.push(this.tm.queueAction(r))}let r=await Promise.all(c);e=t instanceof tq?new tq(l*o):new Uint8Array(l*o);let s=0;for(let t=0;t<r.length;t++)e.set(r[t][0],s),s+=r[t][0].byteLength;return a?tS(e,o):e}}class tT{constructor(t,e,a){this.tm=t,this.prefix=e,this.F=a,this.type="F2",this.m=2*a.m,this.n8=2*this.F.n8,this.n32=2*this.F.n32,this.n64=2*this.F.n64,this.pOp1=t.alloc(2*a.n8),this.pOp2=t.alloc(2*a.n8),this.pOp3=t.alloc(2*a.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){return this.op2("_add",t,e)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}mul1(t,e){return this.op2("_mul1",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=tn(y(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&2==t.length){let a=this.F.e(t[0],e),i=this.F.e(t[1],e),o=new Uint8Array(2*this.F.n8);return o.set(a),o.set(i,2*this.F.n8),o}throw Error("invalid F2")}toString(t,e){let a=this.F.toString(t.slice(0,this.F.n8),e),i=this.F.toString(t.slice(this.F.n8),e);return`[${a}, ${i}]`}fromRng(t){let e=this.F.fromRng(t),a=this.F.fromRng(t),i=new Uint8Array(2*this.F.n8);return i.set(e),i.set(a,this.F.n8),i}random(){return this.fromRng(tL())}toObject(t){return[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8))]}fromObject(t){let e=new Uint8Array(2*this.F.n8),a=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]);return e.set(a),e.set(i,this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8)}}class tR{constructor(t,e,a){this.tm=t,this.prefix=e,this.F=a,this.type="F3",this.m=3*a.m,this.n8=3*this.F.n8,this.n32=3*this.F.n32,this.n64=3*this.F.n64,this.pOp1=t.alloc(3*a.n8),this.pOp2=t.alloc(3*a.n8),this.pOp3=t.alloc(3*a.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=t.getBuff(this.pOp1,this.n8),this.tm.instance.exports[e+"_one"](this.pOp1),this.one=t.getBuff(this.pOp1,this.n8),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op2Bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}eq(t,e){return this.op2Bool("_eq",t,e)}isZero(t){return this.op1Bool("_isZero",t)}add(t,e){return this.op2("_add",t,e)}sub(t,e){return this.op2("_sub",t,e)}neg(t){return this.op1("_neg",t)}inv(t){return this.op1("_inverse",t)}isNegative(t){return this.op1Bool("_isNegative",t)}toMontgomery(t){return this.op1("_toMontgomery",t)}fromMontgomery(t){return this.op1("_fromMontgomery",t)}mul(t,e){return this.op2("_mul",t,e)}div(t,e){return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_inverse"](this.pOp2,this.pOp2),this.tm.instance.exports[this.prefix+"_mul"](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,this.n8)}square(t){return this.op1("_square",t)}isSquare(t){return this.op1Bool("_isSquare",t)}sqrt(t){return this.op1("_sqrt",t)}exp(t,e){return e instanceof Uint8Array||(e=tn(y(e))),this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[this.prefix+"_exp"](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.getBuff(this.pOp3,this.n8)}e(t,e){if(t instanceof Uint8Array)return t;if(Array.isArray(t)&&3==t.length){let a=this.F.e(t[0],e),i=this.F.e(t[1],e),o=this.F.e(t[2],e),l=new Uint8Array(3*this.F.n8);return l.set(a),l.set(i,this.F.n8),l.set(o,2*this.F.n8),l}throw Error("invalid F3")}toString(t,e){let a=this.F.toString(t.slice(0,this.F.n8),e),i=this.F.toString(t.slice(this.F.n8,2*this.F.n8),e),o=this.F.toString(t.slice(2*this.F.n8),e);return`[${a}, ${i}, ${o}]`}fromRng(t){let e=this.F.fromRng(t),a=this.F.fromRng(t),i=this.F.fromRng(t),o=new Uint8Array(3*this.F.n8);return o.set(e),o.set(a,this.F.n8),o.set(i,2*this.F.n8),o}random(){return this.fromRng(tL())}toObject(t){return[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8)),this.F.toObject(t.slice(2*this.F.n8,3*this.F.n8))]}fromObject(t){let e=new Uint8Array(3*this.F.n8),a=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]),o=this.F.fromObject(t[2]);return e.set(a),e.set(i,this.F.n8),e.set(o,2*this.F.n8),e}c1(t){return t.slice(0,this.F.n8)}c2(t){return t.slice(this.F.n8,2*this.F.n8)}c3(t){return t.slice(2*this.F.n8)}}class tU{constructor(t,e,a,i,o,l){this.tm=t,this.prefix=e,this.F=a,this.pOp1=t.alloc(3*a.n8),this.pOp2=t.alloc(3*a.n8),this.pOp3=t.alloc(3*a.n8),this.tm.instance.exports[e+"_zero"](this.pOp1),this.zero=this.tm.getBuff(this.pOp1,3*a.n8),this.tm.instance.exports[e+"_zeroAffine"](this.pOp1),this.zeroAffine=this.tm.getBuff(this.pOp1,2*a.n8),this.one=this.tm.getBuff(i,3*a.n8),this.g=this.one,this.oneAffine=this.tm.getBuff(i,2*a.n8),this.gAffine=this.oneAffine,this.b=this.tm.getBuff(o,a.n8),l&&(this.cofactor=tn(l)),this.negone=this.neg(this.one),this.two=this.add(this.one,this.one),this.batchLEMtoC=tz(t,e+"_batchLEMtoC",2*a.n8,a.n8),this.batchLEMtoU=tz(t,e+"_batchLEMtoU",2*a.n8,2*a.n8),this.batchCtoLEM=tz(t,e+"_batchCtoLEM",a.n8,2*a.n8),this.batchUtoLEM=tz(t,e+"_batchUtoLEM",2*a.n8,2*a.n8),this.batchToJacobian=tz(t,e+"_batchToJacobian",2*a.n8,3*a.n8),this.batchToAffine=tz(t,e+"_batchToAffine",3*a.n8,2*a.n8)}op2(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op2bool(t,e,a){return this.tm.setBuff(this.pOp1,e),this.tm.setBuff(this.pOp2,a),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp2,this.pOp3)}op1(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}op1Affine(t,e){return this.tm.setBuff(this.pOp1,e),this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3),this.tm.getBuff(this.pOp3,2*this.F.n8)}op1Bool(t,e){return this.tm.setBuff(this.pOp1,e),!!this.tm.instance.exports[this.prefix+t](this.pOp1,this.pOp3)}add(t,e){if(t.byteLength==3*this.F.n8)if(e.byteLength==3*this.F.n8)return this.op2("_add",t,e);else if(e.byteLength==2*this.F.n8)return this.op2("_addMixed",t,e);else throw Error("invalid point size");if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_addMixed",e,t);else if(e.byteLength==2*this.F.n8)return this.op2("_addAffine",t,e)}throw Error("invalid point size")}sub(t,e){if(t.byteLength==3*this.F.n8)if(e.byteLength==3*this.F.n8)return this.op2("_sub",t,e);else if(e.byteLength==2*this.F.n8)return this.op2("_subMixed",t,e);else throw Error("invalid point size");if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2("_subMixed",e,t);else if(e.byteLength==2*this.F.n8)return this.op2("_subAffine",t,e)}throw Error("invalid point size")}neg(t){if(t.byteLength==3*this.F.n8)return this.op1("_neg",t);if(t.byteLength==2*this.F.n8)return this.op1Affine("_negAffine",t);throw Error("invalid point size")}double(t){if(t.byteLength==3*this.F.n8)return this.op1("_double",t);if(t.byteLength==2*this.F.n8)return this.op1("_doubleAffine",t);throw Error("invalid point size")}isZero(t){if(t.byteLength==3*this.F.n8)return this.op1Bool("_isZero",t);if(t.byteLength==2*this.F.n8)return this.op1Bool("_isZeroAffine",t);throw Error("invalid point size")}timesScalar(t,e){let a;if(e instanceof Uint8Array||(e=tn(y(e))),t.byteLength==3*this.F.n8)a=this.prefix+"_timesScalar";else if(t.byteLength==2*this.F.n8)a=this.prefix+"_timesScalarAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[a](this.pOp1,this.pOp2,e.byteLength,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}timesFr(t,e){let a;if(t.byteLength==3*this.F.n8)a=this.prefix+"_timesFr";else if(t.byteLength==2*this.F.n8)a=this.prefix+"_timesFrAffine";else throw Error("invalid point size");return this.tm.setBuff(this.pOp1,t),this.tm.setBuff(this.pOp2,e),this.tm.instance.exports[a](this.pOp1,this.pOp2,this.pOp3),this.tm.getBuff(this.pOp3,3*this.F.n8)}eq(t,e){if(t.byteLength==3*this.F.n8)if(e.byteLength==3*this.F.n8)return this.op2bool("_eq",t,e);else if(e.byteLength==2*this.F.n8)return this.op2bool("_eqMixed",t,e);else throw Error("invalid point size");if(t.byteLength==2*this.F.n8){if(e.byteLength==3*this.F.n8)return this.op2bool("_eqMixed",e,t);else if(e.byteLength==2*this.F.n8)return this.op2bool("_eqAffine",t,e)}throw Error("invalid point size")}toAffine(t){if(t.byteLength==3*this.F.n8)return this.op1Affine("_toAffine",t);if(t.byteLength==2*this.F.n8)return t;throw Error("invalid point size")}toJacobian(t){if(t.byteLength==3*this.F.n8)return t;if(t.byteLength==2*this.F.n8)return this.op1("_toJacobian",t);throw Error("invalid point size")}toRprUncompressed(t,e,a){if(this.tm.setBuff(this.pOp1,a),a.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(a.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoU"](this.pOp1,this.pOp1);let i=this.tm.getBuff(this.pOp1,2*this.F.n8);t.set(i,e)}fromRprUncompressed(t,e){let a=t.slice(e,e+2*this.F.n8);return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_UtoLEM"](this.pOp1,this.pOp1),this.tm.getBuff(this.pOp1,2*this.F.n8)}toRprCompressed(t,e,a){if(this.tm.setBuff(this.pOp1,a),a.byteLength==3*this.F.n8)this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);else if(a.byteLength!=2*this.F.n8)throw Error("invalid point size");this.tm.instance.exports[this.prefix+"_LEMtoC"](this.pOp1,this.pOp1);let i=this.tm.getBuff(this.pOp1,this.F.n8);t.set(i,e)}fromRprCompressed(t,e){let a=t.slice(e,e+this.F.n8);return this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_CtoLEM"](this.pOp1,this.pOp2),this.tm.getBuff(this.pOp2,2*this.F.n8)}toUncompressed(t){let e=new Uint8Array(2*this.F.n8);return this.toRprUncompressed(e,0,t),e}toRprLEM(t,e,a){if(a.byteLength==2*this.F.n8)return void t.set(a,e);if(a.byteLength==3*this.F.n8){this.tm.setBuff(this.pOp1,a),this.tm.instance.exports[this.prefix+"_toAffine"](this.pOp1,this.pOp1);let i=this.tm.getBuff(this.pOp1,2*this.F.n8);t.set(i,e)}else throw Error("invalid point size")}fromRprLEM(t,e){return e=e||0,t.slice(e,e+2*this.F.n8)}toString(t,e){if(t.byteLength==3*this.F.n8){let a=this.F.toString(t.slice(0,this.F.n8),e),i=this.F.toString(t.slice(this.F.n8,2*this.F.n8),e),o=this.F.toString(t.slice(2*this.F.n8),e);return`[ ${a}, ${i}, ${o} ]`}if(t.byteLength==2*this.F.n8){let a=this.F.toString(t.slice(0,this.F.n8),e),i=this.F.toString(t.slice(this.F.n8),e);return`[ ${a}, ${i} ]`}throw Error("invalid point size")}isValid(t){if(this.isZero(t))return!0;let e=this.F,a=this.toAffine(t),i=a.slice(0,this.F.n8),o=a.slice(this.F.n8,2*this.F.n8),l=e.add(e.mul(e.square(i),i),this.b),n=e.square(o);return e.eq(l,n)}fromRng(t){let e,a,i=this.F,o=[];do o[0]=i.fromRng(t),e=t.nextBool(),a=i.add(i.mul(i.square(o[0]),o[0]),this.b);while(!i.isSquare(a))o[1]=i.sqrt(a),e^i.isNegative(o[1])&&(o[1]=i.neg(o[1]));let l=new Uint8Array(2*this.F.n8);return l.set(o[0]),l.set(o[1],this.F.n8),this.cofactor&&(l=this.timesScalar(l,this.cofactor)),l}toObject(t){return this.isZero(t)?[this.F.toObject(this.F.zero),this.F.toObject(this.F.one),this.F.toObject(this.F.zero)]:[this.F.toObject(t.slice(0,this.F.n8)),this.F.toObject(t.slice(this.F.n8,2*this.F.n8)),t.byteLength==3*this.F.n8?this.F.toObject(t.slice(2*this.F.n8,3*this.F.n8)):this.F.toObject(this.F.one)]}fromObject(t){let e,a=this.F.fromObject(t[0]),i=this.F.fromObject(t[1]);if(e=3==t.length?this.F.fromObject(t[2]):this.F.one,this.F.isZero(e,this.F.one))return this.zeroAffine;if(this.F.eq(e,this.F.one)){let t=new Uint8Array(2*this.F.n8);return t.set(a),t.set(i,this.F.n8),t}{let t=new Uint8Array(3*this.F.n8);return t.set(a),t.set(i,this.F.n8),t.set(e,2*this.F.n8),t}}e(t){return t instanceof Uint8Array?t:this.fromObject(t)}x(t){return this.toAffine(t).slice(0,this.F.n8)}y(t){return this.toAffine(t).slice(this.F.n8)}}function tN(t){let e,a;async function i(t){let i=new Uint8Array(t.code),o=await WebAssembly.compile(i);a=new WebAssembly.Memory({initial:t.init,maximum:32767}),e=await WebAssembly.instantiate(o,{env:{memory:a}})}function o(t){let e=new Uint32Array(a.buffer,0,1);for(;3&e[0];)e[0]++;let i=e[0];if(e[0]+=t,e[0]+t>a.buffer.byteLength){let i=a.buffer.byteLength/65536,o=Math.floor((e[0]+t)/65536)+1;o>32767&&(o=32767),a.grow(o-i)}return i}function l(t,e){new Uint8Array(a.buffer).set(new Uint8Array(e),t)}function n(t){if("INIT"==t[0].cmd)return i(t[0]);let n=[],c=[],r=new Uint32Array(a.buffer,0,1)[0];for(let i=0;i<t.length;i++)switch(t[i].cmd){case"ALLOCSET":n[t[i].var]=function(t){let e=o(t.byteLength);return l(e,t),e}(t[i].buff);break;case"ALLOC":n[t[i].var]=o(t[i].len);break;case"SET":l(n[t[i].var],t[i].buff);break;case"CALL":{let a=[];for(let e=0;e<t[i].params.length;e++){let o=t[i].params[e];void 0!==o.var?a.push(n[o.var]+(o.offset||0)):void 0!==o.val&&a.push(o.val)}e.exports[t[i].fnName](...a);break}case"GET":c[t[i].out]=(function(t,e){let i=new Uint8Array(a.buffer);return new Uint8Array(i.buffer,i.byteOffset+t,e)})(n[t[i].var],t[i].len).slice();break;default:throw Error("Invalid cmd")}return new Uint32Array(a.buffer,0,1)[0]=r,c}return t&&(t.onmessage=function(e){let a;if("INIT"==(a=e.data?e.data:e)[0].cmd)i(a[0]).then(function(){t.postMessage(a.result)});else if("TERMINATE"==a[0].cmd)t.close();else{let e=n(a);t.postMessage(e)}}),n}var tk=t.i(46786),tj=t.i(69561);class tG{constructor(){this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}}let t$=`(${tN.toString()})(self)`;async function tD(t,a){let i=new tW;i.memory=new WebAssembly.Memory({initial:25}),i.u8=new Uint8Array(i.memory.buffer),i.u32=new Uint32Array(i.memory.buffer);let o=await WebAssembly.compile(t.code);if(i.instance=await WebAssembly.instantiate(o,{env:{memory:i.memory}}),i.singleThread=a,i.initalPFree=i.u32[0],i.pq=t.pq,i.pr=t.pr,i.pG1gen=t.pG1gen,i.pG1zero=t.pG1zero,i.pG2gen=t.pG2gen,i.pG2zero=t.pG2zero,i.pOneT=t.pOneT,a)i.code=t.code,i.taskManager=tN(),await i.taskManager([{cmd:"INIT",init:25,code:i.code.slice()}]),i.concurrency=1;else{i.workers=[],i.pendingDeferreds=[],i.working=[];let a=2;0==(a=tk.default.cpus().length)&&(a=2),a>64&&(a=64),i.concurrency=a;for(let t=0;t<a;t++)i.workers[t]=new tj.default(e),i.workers[t].addEventListener("message",function(t){return function(e){let a;a=e&&e.data?e.data:e,i.working[t]=!1,i.pendingDeferreds[t].resolve(a),i.processWorks()}}(t)),i.working[t]=!1;let o=[];for(let e=0;e<i.workers.length;e++){let a=t.code.slice();o.push(i.postAction(e,[{cmd:"INIT",init:25,code:a}],[a.buffer]))}await Promise.all(o)}return i}e="data:application/javascript;base64,"+Buffer.from(t$).toString("base64");class tW{constructor(){this.actionQueue=[],this.oldPFree=0}startSyncOp(){if(0!=this.oldPFree)throw Error("Sync operation in progress");this.oldPFree=this.u32[0]}endSyncOp(){if(0==this.oldPFree)throw Error("No sync operation in progress");this.u32[0]=this.oldPFree,this.oldPFree=0}postAction(t,e,a,i){if(this.working[t])throw Error("Posting a job t a working worker");return this.working[t]=!0,this.pendingDeferreds[t]=i||new tG,this.workers[t].postMessage(e,a),this.pendingDeferreds[t].promise}processWorks(){for(let t=0;t<this.workers.length&&this.actionQueue.length>0;t++)if(!1==this.working[t]){let e=this.actionQueue.shift();this.postAction(t,e.data,e.transfers,e.deferred)}}queueAction(t,e){let a=new tG;if(this.singleThread){let e=this.taskManager(t);a.resolve(e)}else this.actionQueue.push({data:t,transfers:e,deferred:a}),this.processWorks();return a.promise}resetMemory(){this.u32[0]=this.initalPFree}allocBuff(t){let e=this.alloc(t.byteLength);return this.setBuff(e,t),e}getBuff(t,e){return this.u8.slice(t,t+e)}setBuff(t,e){this.u8.set(new Uint8Array(e),t)}alloc(t){for(;3&this.u32[0];)this.u32[0]++;let e=this.u32[0];return this.u32[0]+=t,e}async terminate(){for(let t=0;t<this.workers.length;t++)this.workers[t].postMessage([{cmd:"TERMINATE"}]);await new Promise(t=>setTimeout(t,200))}}function tZ(t,e){let a=t[e],i=t.Fr,o=t.tm;t[e].batchApplyKey=async function(t,l,n,c,r){let s,d,_,f,u,g;if(c=c||"affine",r=r||"affine","G1"==e)"jacobian"==c?(_=3*a.F.n8,s="g1m_batchApplyKey"):(_=2*a.F.n8,s="g1m_batchApplyKeyMixed"),f=3*a.F.n8,"jacobian"==r?u=3*a.F.n8:(d="g1m_batchToAffine",u=2*a.F.n8);else if("G2"==e)"jacobian"==c?(_=3*a.F.n8,s="g2m_batchApplyKey"):(_=2*a.F.n8,s="g2m_batchApplyKeyMixed"),f=3*a.F.n8,"jacobian"==r?u=3*a.F.n8:(d="g2m_batchToAffine",u=2*a.F.n8);else if("Fr"==e)s="frm_batchApplyKey",_=a.n8,f=a.n8,u=a.n8;else throw Error("Invalid group: "+e);let p=Math.floor(t.byteLength/_),h=Math.floor(p/o.concurrency),L=[];n=i.e(n);let m=i.e(l);for(let e=0;e<o.concurrency;e++){let a;if(0==(a=e<o.concurrency-1?h:p-e*h))continue;let l=[];l.push({cmd:"ALLOCSET",var:0,buff:t.slice(e*h*_,e*h*_+a*_)}),l.push({cmd:"ALLOCSET",var:1,buff:m}),l.push({cmd:"ALLOCSET",var:2,buff:n}),l.push({cmd:"ALLOC",var:3,len:a*Math.max(f,u)}),l.push({cmd:"CALL",fnName:s,params:[{var:0},{val:a},{var:1},{var:2},{var:3}]}),d&&l.push({cmd:"CALL",fnName:d,params:[{var:3},{val:a},{var:3}]}),l.push({cmd:"GET",out:0,var:3,len:a*u}),L.push(o.queueAction(l)),m=i.mul(m,i.exp(n,a))}let b=await Promise.all(L);g=t instanceof tq?new tq(p*u):new Uint8Array(p*u);let x=0;for(let t=0;t<b.length;t++)g.set(b[t][0],x),x+=b[t][0].byteLength;return g}}let tV=[1,1,1,1,2,3,4,5,6,7,7,8,9,10,11,12,13,13,14,15,16,16,17,17,17,17,17,17,17,17,17,17];function tJ(t,e){let a=t[e],i=a.tm;async function o(t,i,o,l,n){let c,r;if(!(t instanceof Uint8Array))throw l&&l.error(`${n} _multiExpChunk buffBases is not Uint8Array`),Error(`${n} _multiExpChunk buffBases is not Uint8Array`);if(!(i instanceof Uint8Array))throw l&&l.error(`${n} _multiExpChunk buffScalars is not Uint8Array`),Error(`${n} _multiExpChunk buffScalars is not Uint8Array`);if(o=o||"affine","G1"==e)"affine"==o?(r="g1m_multiexpAffine_chunk",c=2*a.F.n8):(r="g1m_multiexp_chunk",c=3*a.F.n8);else if("G2"==e)"affine"==o?(r="g2m_multiexpAffine_chunk",c=2*a.F.n8):(r="g2m_multiexp_chunk",c=3*a.F.n8);else throw Error("Invalid group");let s=Math.floor(t.byteLength/c);if(0==s)return a.zero;let d=Math.floor(i.byteLength/s);if(d*s!=i.byteLength)throw Error("Scalar size does not match");let _=tV[tE(s)],f=Math.floor((8*d-1)/_)+1,u=[];for(let e=0;e<f;e++){let o=[{cmd:"ALLOCSET",var:0,buff:t},{cmd:"ALLOCSET",var:1,buff:i},{cmd:"ALLOC",var:2,len:3*a.F.n8},{cmd:"CALL",fnName:r,params:[{var:0},{var:1},{val:d},{val:s},{val:e*_},{val:Math.min(8*d-e*_,_)},{var:2}]},{cmd:"GET",out:0,var:2,len:3*a.F.n8}];u.push(a.tm.queueAction(o))}let g=await Promise.all(u),p=a.zero;for(let t=g.length-1;t>=0;t--){if(!a.isZero(p))for(let t=0;t<_;t++)p=a.double(p);p=a.add(p,g[t][0])}return p}async function l(t,l,n,c,r){let s,d;if("G1"==e)s="affine"==n?2*a.F.n8:3*a.F.n8;else if("G2"==e)s="affine"==n?2*a.F.n8:3*a.F.n8;else throw Error("Invalid group");let _=Math.floor(t.byteLength/s);if(0==_)return a.zero;let f=Math.floor(l.byteLength/_);if(f*_!=l.byteLength)throw Error("Scalar size does not match");let u=Math.floor((8*f-1)/tV[tE(_)])+1;(d=Math.floor(_/(i.concurrency/u)))>4194304&&(d=4194304),d<1024&&(d=1024);let g=[];for(let e=0;e<_;e+=d){c&&c.debug(`Multiexp start: ${r}: ${e}/${_}`);let a=Math.min(_-e,d),i=t.slice(e*s,(e+a)*s),u=l.slice(e*f,(e+a)*f);g.push(o(i,u,n,c,r).then(t=>(c&&c.debug(`Multiexp end: ${r}: ${e}/${_}`),t)))}let p=await Promise.all(g),h=a.zero;for(let t=p.length-1;t>=0;t--)h=a.add(h,p[t]);return h}a.multiExp=async function(t,e,a,i){return await l(t,e,"jacobian",a,i)},a.multiExpAffine=async function(t,e,a,i){return await l(t,e,"affine",a,i)}}function tQ(t,e){let a=t[e],i=t.Fr,o=a.tm;async function l(t,l,r,s,d,_){let f,u,g,p,h,L,m,b,x,y,F;r=r||"affine",s=s||"affine","G1"==e?("affine"==r?(f=2*a.F.n8,p="g1m_batchToJacobian"):f=3*a.F.n8,u=3*a.F.n8,l&&(b="g1m_fftFinal"),m="g1m_fftJoin",L="g1m_fftMix","affine"==s?(g=2*a.F.n8,h="g1m_batchToAffine"):g=3*a.F.n8):"G2"==e?("affine"==r?(f=2*a.F.n8,p="g2m_batchToJacobian"):f=3*a.F.n8,u=3*a.F.n8,l&&(b="g2m_fftFinal"),m="g2m_fftJoin",L="g2m_fftMix","affine"==s?(g=2*a.F.n8,h="g2m_batchToAffine"):g=3*a.F.n8):"Fr"==e&&(f=a.n8,u=a.n8,g=a.n8,l&&(b="frm_fftFinal"),L="frm_fftMix",m="frm_fftJoin");let w=!1;Array.isArray(t)?(t=tO(t,f),w=!0):t=t.slice(0,t.byteLength);let B=t.byteLength/f,C=tE(B);if(1<<C!=B)throw Error("fft must be multiple of 2");if(C==i.s+1){let e;return(e=l?await c(t,r,s,d,_):await n(t,r,s,d,_),w)?tS(e,g):e}l&&(x=i.inv(i.e(B))),tP(t,f);let v=Math.min(16384,B),A=B/v;for(;A<o.concurrency&&v>=16;)A*=2,v/=2;let I=tE(v),E=[];for(let e=0;e<A;e++){d&&d.debug(`${_}: fft ${C} mix start: ${e}/${A}`);let a=[];a.push({cmd:"ALLOC",var:0,len:u*v});let i=t.slice(v*e*f,v*(e+1)*f);a.push({cmd:"SET",var:0,buff:i}),p&&a.push({cmd:"CALL",fnName:p,params:[{var:0},{val:v},{var:0}]});for(let t=1;t<=I;t++)a.push({cmd:"CALL",fnName:L,params:[{var:0},{val:v},{val:t}]});I==C?(b&&(a.push({cmd:"ALLOCSET",var:1,buff:x}),a.push({cmd:"CALL",fnName:b,params:[{var:0},{val:v},{var:1}]})),h&&a.push({cmd:"CALL",fnName:h,params:[{var:0},{val:v},{var:0}]}),a.push({cmd:"GET",out:0,var:0,len:v*g})):a.push({cmd:"GET",out:0,var:0,len:u*v}),E.push(o.queueAction(a).then(t=>(d&&d.debug(`${_}: fft ${C} mix end: ${e}/${A}`),t)))}F=await Promise.all(E);for(let t=0;t<A;t++)F[t]=F[t][0];for(let t=I+1;t<=C;t++){d&&d.debug(`${_}: fft  ${C}  join: ${t}/${C}`);let e=1<<C-t,a=A/e,l=[];for(let n=0;n<e;n++)for(let c=0;c<a/2;c++){let r=i.exp(i.w[t],c*v),s=i.w[t],f=n*a+c,p=n*a+c+a/2,L=[];L.push({cmd:"ALLOCSET",var:0,buff:F[f]}),L.push({cmd:"ALLOCSET",var:1,buff:F[p]}),L.push({cmd:"ALLOCSET",var:2,buff:r}),L.push({cmd:"ALLOCSET",var:3,buff:s}),L.push({cmd:"CALL",fnName:m,params:[{var:0},{var:1},{val:v},{var:2},{var:3}]}),t==C?(b&&(L.push({cmd:"ALLOCSET",var:4,buff:x}),L.push({cmd:"CALL",fnName:b,params:[{var:0},{val:v},{var:4}]}),L.push({cmd:"CALL",fnName:b,params:[{var:1},{val:v},{var:4}]})),h&&(L.push({cmd:"CALL",fnName:h,params:[{var:0},{val:v},{var:0}]}),L.push({cmd:"CALL",fnName:h,params:[{var:1},{val:v},{var:1}]})),L.push({cmd:"GET",out:0,var:0,len:v*g}),L.push({cmd:"GET",out:1,var:1,len:v*g})):(L.push({cmd:"GET",out:0,var:0,len:v*u}),L.push({cmd:"GET",out:1,var:1,len:v*u})),l.push(o.queueAction(L).then(i=>(d&&d.debug(`${_}: fft ${C} join  ${t}/${C}  ${n+1}/${e} ${c}/${a/2}`),i)))}let n=await Promise.all(l);for(let t=0;t<e;t++)for(let e=0;e<a/2;e++){let i=t*a+e,o=t*a+e+a/2,l=n.shift();F[i]=l[0],F[o]=l[1]}}if(y=t instanceof tq?new tq(B*g):new Uint8Array(B*g),l){y.set(F[0].slice((v-1)*g));let t=g;for(let e=A-1;e>0;e--)y.set(F[e],t),t+=v*g,delete F[e];y.set(F[0].slice(0,(v-1)*g),t),delete F[0]}else for(let t=0;t<A;t++)y.set(F[t],v*g*t),delete F[t];return w?tS(y,g):y}async function n(t,e,a,o,n){let c,s,d;c=t.slice(0,t.byteLength/2),s=t.slice(t.byteLength/2,t.byteLength);let _=[];[c,s]=await r(c,s,"fftJoinExt",i.one,i.shift,e,"jacobian",o,n),_.push(l(c,!1,"jacobian",a,o,n)),_.push(l(s,!1,"jacobian",a,o,n));let f=await Promise.all(_);return(d=f[0].byteLength>0x10000000?new tq(2*f[0].byteLength):new Uint8Array(2*f[0].byteLength)).set(f[0]),d.set(f[1],f[0].byteLength),d}async function c(t,e,a,o,n){let c,s,d;c=t.slice(0,t.byteLength/2),s=t.slice(t.byteLength/2,t.byteLength);let _=[];_.push(l(c,!0,e,"jacobian",o,n)),_.push(l(s,!0,e,"jacobian",o,n)),[c,s]=await Promise.all(_);let f=await r(c,s,"fftJoinExtInv",i.one,i.shiftInv,"jacobian",a,o,n);return(d=f[0].byteLength>0x10000000?new tq(2*f[0].byteLength):new Uint8Array(2*f[0].byteLength)).set(f[0]),d.set(f[1],f[0].byteLength),d}async function r(t,l,n,c,r,s,d,_,f){let u,g,p,h,L,m,b,x;if("G1"==e)"affine"==s?(L=2*a.F.n8,g="g1m_batchToJacobian"):L=3*a.F.n8,m=3*a.F.n8,u="g1m_"+n,"affine"==d?(p="g1m_batchToAffine",h=2*a.F.n8):h=3*a.F.n8;else if("G2"==e)"affine"==s?(L=2*a.F.n8,g="g2m_batchToJacobian"):L=3*a.F.n8,u="g2m_"+n,m=3*a.F.n8,"affine"==d?(p="g2m_batchToAffine",h=2*a.F.n8):h=3*a.F.n8;else if("Fr"==e)L=i.n8,h=i.n8,m=i.n8,u="frm_"+n;else throw Error("Invalid group");if(t.byteLength!=l.byteLength)throw Error("Invalid buffer size");let y=Math.floor(t.byteLength/L);if(y!=1<<tE(y))throw Error("Invalid number of points");let F=Math.floor(y/o.concurrency);F<16&&(F=16),F>65536&&(F=65536);let w=[];for(let e=0;e<y;e+=F){_&&_.debug(`${f}: fftJoinExt Start: ${e}/${y}`);let a=Math.min(y-e,F),n=i.mul(c,i.exp(r,e)),s=[],d=t.slice(e*L,(e+a)*L),b=l.slice(e*L,(e+a)*L);s.push({cmd:"ALLOC",var:0,len:m*a}),s.push({cmd:"SET",var:0,buff:d}),s.push({cmd:"ALLOC",var:1,len:m*a}),s.push({cmd:"SET",var:1,buff:b}),s.push({cmd:"ALLOCSET",var:2,buff:n}),s.push({cmd:"ALLOCSET",var:3,buff:r}),g&&(s.push({cmd:"CALL",fnName:g,params:[{var:0},{val:a},{var:0}]}),s.push({cmd:"CALL",fnName:g,params:[{var:1},{val:a},{var:1}]})),s.push({cmd:"CALL",fnName:u,params:[{var:0},{var:1},{val:a},{var:2},{var:3},{val:i.s}]}),p&&(s.push({cmd:"CALL",fnName:p,params:[{var:0},{val:a},{var:0}]}),s.push({cmd:"CALL",fnName:p,params:[{var:1},{val:a},{var:1}]})),s.push({cmd:"GET",out:0,var:0,len:a*h}),s.push({cmd:"GET",out:1,var:1,len:a*h}),w.push(o.queueAction(s).then(t=>(_&&_.debug(`${f}: fftJoinExt End: ${e}/${y}`),t)))}let B=await Promise.all(w);y*h>0x10000000?(b=new tq(y*h),x=new tq(y*h)):(b=new Uint8Array(y*h),x=new Uint8Array(y*h));let C=0;for(let t=0;t<B.length;t++)b.set(B[t][0],C),x.set(B[t][1],C),C+=B[t][0].byteLength;return[b,x]}a.fft=async function(t,e,a,i,o){return await l(t,!1,e,a,i,o)},a.ifft=async function(t,e,a,i,o){return await l(t,!0,e,a,i,o)},a.lagrangeEvaluations=async function(t,o,n,c,s){let d,_;if(o=o||"affine",n=n||"affine","G1"==e)d="affine"==o?2*a.F.n8:3*a.F.n8;else if("G2"==e)d="affine"==o?2*a.F.n8:3*a.F.n8;else if("Fr"==e)d=i.n8;else throw Error("Invalid group");let f=t.byteLength/d,u=tE(f);if(2**u*d!=t.byteLength)throw c&&c.error("lagrangeEvaluations iinvalid input size"),Error("lagrangeEvaluations invalid Input size");if(u<=i.s)return await a.ifft(t,o,n,c,s);if(u>i.s+1)throw c&&c.error("lagrangeEvaluations input too big"),Error("lagrangeEvaluations input too big");let g=t.slice(0,t.byteLength/2),p=t.slice(t.byteLength/2,t.byteLength),h=i.exp(i.shift,f/2),L=i.inv(i.sub(i.one,h));[g,p]=await r(g,p,"prepareLagrangeEvaluation",L,i.shiftInv,o,"jacobian",c,s+" prep");let m=[];return m.push(l(g,!0,"jacobian",n,c,s+" t0")),m.push(l(p,!0,"jacobian",n,c,s+" t1")),[g,p]=await Promise.all(m),(_=g.byteLength>0x10000000?new tq(2*g.byteLength):new Uint8Array(2*g.byteLength)).set(g),_.set(p,g.byteLength),_},a.fftMix=async function(t){let l,n,c,r=3*a.F.n8;if("G1"==e)l="g1m_fftMix",n="g1m_fftJoin";else if("G2"==e)l="g2m_fftMix",n="g2m_fftJoin";else if("Fr"==e)l="frm_fftMix",n="frm_fftJoin";else throw Error("Invalid group");let s=Math.floor(t.byteLength/r),d=tE(s),_=1<<tE(o.concurrency);s<=2*_&&(_=1);let f=s/_,u=tE(f),g=[];for(let e=0;e<_;e++){let a=[],i=t.slice(e*f*r,(e+1)*f*r);a.push({cmd:"ALLOCSET",var:0,buff:i});for(let t=1;t<=u;t++)a.push({cmd:"CALL",fnName:l,params:[{var:0},{val:f},{val:t}]});a.push({cmd:"GET",out:0,var:0,len:f*r}),g.push(o.queueAction(a))}let p=await Promise.all(g),h=[];for(let t=0;t<p.length;t++)h[t]=p[t][0];for(let t=u+1;t<=d;t++){let e=1<<d-t,a=_/e,l=[];for(let c=0;c<e;c++)for(let e=0;e<a/2;e++){let s=i.exp(i.w[t],e*f),d=i.w[t],_=c*a+e,u=c*a+e+a/2,g=[];g.push({cmd:"ALLOCSET",var:0,buff:h[_]}),g.push({cmd:"ALLOCSET",var:1,buff:h[u]}),g.push({cmd:"ALLOCSET",var:2,buff:s}),g.push({cmd:"ALLOCSET",var:3,buff:d}),g.push({cmd:"CALL",fnName:n,params:[{var:0},{var:1},{val:f},{var:2},{var:3}]}),g.push({cmd:"GET",out:0,var:0,len:f*r}),g.push({cmd:"GET",out:1,var:1,len:f*r}),l.push(o.queueAction(g))}let c=await Promise.all(l);for(let t=0;t<e;t++)for(let e=0;e<a/2;e++){let i=t*a+e,o=t*a+e+a/2,l=c.shift();h[i]=l[0],h[o]=l[1]}}c=t instanceof tq?new tq(s*r):new Uint8Array(s*r);let L=0;for(let t=0;t<_;t++)c.set(h[t],L),L+=h[t].byteLength;return c},a.fftJoin=async function(t,l,n,c){let r,s,d,_=3*a.F.n8;if("G1"==e)r="g1m_fftJoin";else if("G2"==e)r="g2m_fftJoin";else if("Fr"==e)r="frm_fftJoin";else throw Error("Invalid group");if(t.byteLength!=l.byteLength)throw Error("Invalid buffer size");let f=Math.floor(t.byteLength/_);if(f!=1<<tE(f))throw Error("Invalid number of points");let u=1<<tE(o.concurrency);f<=2*u&&(u=1);let g=f/u,p=[];for(let e=0;e<u;e++){let a=[],s=i.mul(n,i.exp(c,e*g)),d=t.slice(e*g*_,(e+1)*g*_),f=l.slice(e*g*_,(e+1)*g*_);a.push({cmd:"ALLOCSET",var:0,buff:d}),a.push({cmd:"ALLOCSET",var:1,buff:f}),a.push({cmd:"ALLOCSET",var:2,buff:s}),a.push({cmd:"ALLOCSET",var:3,buff:c}),a.push({cmd:"CALL",fnName:r,params:[{var:0},{var:1},{val:g},{var:2},{var:3}]}),a.push({cmd:"GET",out:0,var:0,len:g*_}),a.push({cmd:"GET",out:1,var:1,len:g*_}),p.push(o.queueAction(a))}let h=await Promise.all(p);t instanceof tq?(s=new tq(f*_),d=new tq(f*_)):(s=new Uint8Array(f*_),d=new Uint8Array(f*_));let L=0;for(let t=0;t<h.length;t++)s.set(h[t][0],L),d.set(h[t][1],L),L+=h[t][0].byteLength;return[s,d]},a.fftFinal=async function(t,i){let l,n,c,r=3*a.F.n8,s=2*a.F.n8;if("G1"==e)l="g1m_fftFinal",n="g1m_batchToAffine";else if("G2"==e)l="g2m_fftFinal",n="g2m_batchToAffine";else throw Error("Invalid group");let d=Math.floor(t.byteLength/r);if(d!=1<<tE(d))throw Error("Invalid number of points");let _=Math.floor(d/o.concurrency),f=[];for(let e=0;e<o.concurrency;e++){let a;if(0==(a=e<o.concurrency-1?_:d-e*_))continue;let c=[],u=t.slice(e*_*r,(e*_+a)*r);c.push({cmd:"ALLOCSET",var:0,buff:u}),c.push({cmd:"ALLOCSET",var:1,buff:i}),c.push({cmd:"CALL",fnName:l,params:[{var:0},{val:a},{var:1}]}),c.push({cmd:"CALL",fnName:n,params:[{var:0},{val:a},{var:0}]}),c.push({cmd:"GET",out:0,var:0,len:a*s}),f.push(o.queueAction(c))}let u=await Promise.all(f);c=t instanceof tq?new tq(d*s):new Uint8Array(d*s);let g=0;for(let t=u.length-1;t>=0;t--)c.set(u[t][0],g),g+=u[t][0].byteLength;return c}}async function tH(t){let e,a=await tD(t.wasm,t.singleThread),i={};return i.q=y(t.wasm.q.toString()),i.r=y(t.wasm.r.toString()),i.name=t.name,i.tm=a,i.prePSize=t.wasm.prePSize,i.preQSize=t.wasm.preQSize,i.Fr=new tM(a,"frm",t.n8r,t.r),i.F1=new tM(a,"f1m",t.n8q,t.q),i.F2=new tT(a,"f2m",i.F1),i.G1=new tU(a,"g1m",i.F1,t.wasm.pG1gen,t.wasm.pG1b,t.cofactorG1),i.G2=new tU(a,"g2m",i.F2,t.wasm.pG2gen,t.wasm.pG2b,t.cofactorG2),i.F6=new tR(a,"f6m",i.F2),i.F12=new tT(a,"ftm",i.F6),i.Gt=i.F12,tZ(i,"G1"),tZ(i,"G2"),tZ(i,"Fr"),tJ(i,"G1"),tJ(i,"G2"),tQ(i,"G1"),tQ(i,"G2"),tQ(i,"Fr"),e=i.tm,i.pairing=function(t,a){e.startSyncOp();let o=e.allocBuff(i.G1.toJacobian(t)),l=e.allocBuff(i.G2.toJacobian(a)),n=e.alloc(i.Gt.n8);e.instance.exports[i.name+"_pairing"](o,l,n);let c=e.getBuff(n,i.Gt.n8);return e.endSyncOp(),c},i.pairingEq=async function(){let t,a;arguments.length%2==1?(t=arguments[arguments.length-1],a=(arguments.length-1)/2):(t=i.Gt.one,a=arguments.length/2);let o=[];for(let t=0;t<a;t++){let a=[],l=i.G1.toJacobian(arguments[2*t]);a.push({cmd:"ALLOCSET",var:0,buff:l}),a.push({cmd:"ALLOC",var:1,len:i.prePSize});let n=i.G2.toJacobian(arguments[2*t+1]);a.push({cmd:"ALLOCSET",var:2,buff:n}),a.push({cmd:"ALLOC",var:3,len:i.preQSize}),a.push({cmd:"ALLOC",var:4,len:i.Gt.n8}),a.push({cmd:"CALL",fnName:i.name+"_prepareG1",params:[{var:0},{var:1}]}),a.push({cmd:"CALL",fnName:i.name+"_prepareG2",params:[{var:2},{var:3}]}),a.push({cmd:"CALL",fnName:i.name+"_millerLoop",params:[{var:1},{var:3},{var:4}]}),a.push({cmd:"GET",out:0,var:4,len:i.Gt.n8}),o.push(e.queueAction(a))}let l=await Promise.all(o);e.startSyncOp();let n=e.alloc(i.Gt.n8);e.instance.exports.ftm_one(n);for(let t=0;t<l.length;t++){let a=e.allocBuff(l[t][0]);e.instance.exports.ftm_mul(n,a,n)}e.instance.exports[i.name+"_finalExponentiation"](n,n);let c=e.allocBuff(t),r=!!e.instance.exports.ftm_eq(n,c);return e.endSyncOp(),r},i.prepareG1=function(t){this.tm.startSyncOp();let e=this.tm.allocBuff(t),a=this.tm.alloc(this.prePSize);this.tm.instance.exports[this.name+"_prepareG1"](e,a);let i=this.tm.getBuff(a,this.prePSize);return this.tm.endSyncOp(),i},i.prepareG2=function(t){this.tm.startSyncOp();let e=this.tm.allocBuff(t),a=this.tm.alloc(this.preQSize);this.tm.instance.exports[this.name+"_prepareG2"](e,a);let i=this.tm.getBuff(a,this.preQSize);return this.tm.endSyncOp(),i},i.millerLoop=function(t,e){this.tm.startSyncOp();let a=this.tm.allocBuff(t),i=this.tm.allocBuff(e),o=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_millerLoop"](a,i,o);let l=this.tm.getBuff(o,this.Gt.n8);return this.tm.endSyncOp(),l},i.finalExponentiation=function(t){this.tm.startSyncOp();let e=this.tm.allocBuff(t),a=this.tm.alloc(this.Gt.n8);this.tm.instance.exports[this.name+"_finalExponentiation"](e,a);let i=this.tm.getBuff(a,this.Gt.n8);return this.tm.endSyncOp(),i},i.array2buffer=function(t,e){let a=new Uint8Array(e*t.length);for(let i=0;i<t.length;i++)a.set(t[i],i*e);return a},i.buffer2array=function(t,e){let a=t.byteLength/e,i=Array(a);for(let o=0;o<a;o++)i[o]=t.slice(o*e,o*e+e);return i},i}function tK(t){return BigInt(t)}function tX(t){let e=[],a=tK(t);return e.push(Number(255n&a)),e.push(Number(a>>8n&255n)),e.push(Number(a>>16n&255n)),e.push(Number(a>>24n&255n)),e}function tY(t){let e=function(t){for(var e=[],a=0;a<t.length;a++){var i=t.charCodeAt(a);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(a++,i=65536+((1023&i)<<10|1023&t.charCodeAt(a)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t);return[...t1(e.length),...e]}function t2(t){let e=[],a=tK(t);if(a<0n)throw Error("Number cannot be negative");for(;0n!==a;)e.push(Number(127n&a)),a>>=7n;0==e.length&&e.push(0);for(let t=0;t<e.length-1;t++)e[t]=128|e[t];return e}function t3(t){var e;let a,i,o=(e=t)<0n?e.toString(2).length-1:e.toString(2).length;t<0?(i=!0,a=(1n<<BigInt(o))+t):(i=!1,a=tK(t));let l=7-o%7,n=t2(a+((1n<<BigInt(l))-1n<<BigInt(o)));return i||(n[n.length-1]=n[n.length-1]&((1<<7-l)-1|128)),n}function t0(t){let e=tK(t);if(e>4294967295n)throw Error("Number too big");if(e>2147483647n&&(e-=4294967296n),e<-2147483648n)throw Error("Number too small");return t3(e)}function t1(t){let e=tK(t);if(e>4294967295n)throw Error("Number too big");return t2(e)}function t4(t){return Array.from(t,function(t){return("0"+(255&t).toString(16)).slice(-2)}).join("")}class t6{constructor(t){this.func=t,this.functionName=t.functionName,this.module=t.module}setLocal(t,e){let a=this.func.localIdxByName[t];if(void 0===a)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,33,...t1(a)]}teeLocal(t,e){let a=this.func.localIdxByName[t];if(void 0===a)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[...e,34,...t1(a)]}getLocal(t){let e=this.func.localIdxByName[t];if(void 0===e)throw Error(`Local Variable not defined: Function: ${this.functionName} local: ${t} `);return[32,...t1(e)]}i64_load8_s(t,e,a){return[...t,48,void 0===a?0:a,...t1(e||0)]}i64_load8_u(t,e,a){return[...t,49,void 0===a?0:a,...t1(e||0)]}i64_load16_s(t,e,a){return[...t,50,void 0===a?1:a,...t1(e||0)]}i64_load16_u(t,e,a){return[...t,51,void 0===a?1:a,...t1(e||0)]}i64_load32_s(t,e,a){return[...t,52,void 0===a?2:a,...t1(e||0)]}i64_load32_u(t,e,a){return[...t,53,void 0===a?2:a,...t1(e||0)]}i64_load(t,e,a){return[...t,41,void 0===a?3:a,...t1(e||0)]}i64_store(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=3,n=e):Array.isArray(a)?(o=e,l=3,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,55,l,...t1(o)]}i64_store32(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=2,n=e):Array.isArray(a)?(o=e,l=2,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,62,l,...t1(o)]}i64_store16(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=1,n=e):Array.isArray(a)?(o=e,l=1,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,61,l,...t1(o)]}i64_store8(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=0,n=e):Array.isArray(a)?(o=e,l=0,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,60,l,...t1(o)]}i32_load8_s(t,e,a){return[...t,44,void 0===a?0:a,...t1(e||0)]}i32_load8_u(t,e,a){return[...t,45,void 0===a?0:a,...t1(e||0)]}i32_load16_s(t,e,a){return[...t,46,void 0===a?1:a,...t1(e||0)]}i32_load16_u(t,e,a){return[...t,47,void 0===a?1:a,...t1(e||0)]}i32_load(t,e,a){return[...t,40,void 0===a?2:a,...t1(e||0)]}i32_store(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=2,n=e):Array.isArray(a)?(o=e,l=2,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,54,l,...t1(o)]}i32_store16(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=1,n=e):Array.isArray(a)?(o=e,l=1,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,59,l,...t1(o)]}i32_store8(t,e,a,i){let o,l,n;return Array.isArray(e)?(o=0,l=0,n=e):Array.isArray(a)?(o=e,l=0,n=a):Array.isArray(i)&&(o=e,l=a,n=i),[...t,...n,58,l,...t1(o)]}call(t,...e){let a=this.module.functionIdxByName[t];if(void 0===a)throw Error(`Function not defined: Function: ${t}`);return[...[].concat(...e),16,...t1(a)]}call_indirect(t,...e){return[...[].concat(...e),...t,17,0,0]}if(t,e,a){return a?[...t,4,64,...e,5,...a,11]:[...t,4,64,...e,11]}block(t){return[2,64,...t,11]}loop(...t){return[3,64,...[].concat(...t),11]}br_if(t,e){return[...e,13,...t1(t)]}br(t){return[12,...t1(t)]}ret(t){return[...t,15]}drop(t){return[...t,26]}i64_const(t){return[66,...function(t){let e=tK(t);if(e>0xffffffffffffffffn)throw Error("Number too big");if(e>0x7fffffffffffffffn&&(e-=0x10000000000000000n),e<-0x8000000000000000n)throw Error("Number too small");return t3(e)}(t)]}i32_const(t){return[65,...t0(t)]}i64_eqz(t){return[...t,80]}i64_eq(t,e){return[...t,...e,81]}i64_ne(t,e){return[...t,...e,82]}i64_lt_s(t,e){return[...t,...e,83]}i64_lt_u(t,e){return[...t,...e,84]}i64_gt_s(t,e){return[...t,...e,85]}i64_gt_u(t,e){return[...t,...e,86]}i64_le_s(t,e){return[...t,...e,87]}i64_le_u(t,e){return[...t,...e,88]}i64_ge_s(t,e){return[...t,...e,89]}i64_ge_u(t,e){return[...t,...e,90]}i64_add(t,e){return[...t,...e,124]}i64_sub(t,e){return[...t,...e,125]}i64_mul(t,e){return[...t,...e,126]}i64_div_s(t,e){return[...t,...e,127]}i64_div_u(t,e){return[...t,...e,128]}i64_rem_s(t,e){return[...t,...e,129]}i64_rem_u(t,e){return[...t,...e,130]}i64_and(t,e){return[...t,...e,131]}i64_or(t,e){return[...t,...e,132]}i64_xor(t,e){return[...t,...e,133]}i64_shl(t,e){return[...t,...e,134]}i64_shr_s(t,e){return[...t,...e,135]}i64_shr_u(t,e){return[...t,...e,136]}i64_extend_i32_s(t){return[...t,172]}i64_extend_i32_u(t){return[...t,173]}i64_clz(t){return[...t,121]}i64_ctz(t){return[...t,122]}i32_eqz(t){return[...t,69]}i32_eq(t,e){return[...t,...e,70]}i32_ne(t,e){return[...t,...e,71]}i32_lt_s(t,e){return[...t,...e,72]}i32_lt_u(t,e){return[...t,...e,73]}i32_gt_s(t,e){return[...t,...e,74]}i32_gt_u(t,e){return[...t,...e,75]}i32_le_s(t,e){return[...t,...e,76]}i32_le_u(t,e){return[...t,...e,77]}i32_ge_s(t,e){return[...t,...e,78]}i32_ge_u(t,e){return[...t,...e,79]}i32_add(t,e){return[...t,...e,106]}i32_sub(t,e){return[...t,...e,107]}i32_mul(t,e){return[...t,...e,108]}i32_div_s(t,e){return[...t,...e,109]}i32_div_u(t,e){return[...t,...e,110]}i32_rem_s(t,e){return[...t,...e,111]}i32_rem_u(t,e){return[...t,...e,112]}i32_and(t,e){return[...t,...e,113]}i32_or(t,e){return[...t,...e,114]}i32_xor(t,e){return[...t,...e,115]}i32_shl(t,e){return[...t,...e,116]}i32_shr_s(t,e){return[...t,...e,117]}i32_shr_u(t,e){return[...t,...e,118]}i32_rotl(t,e){return[...t,...e,119]}i32_rotr(t,e){return[...t,...e,120]}i32_wrap_i64(t){return[...t,167]}i32_clz(t){return[...t,103]}i32_ctz(t){return[...t,104]}unreachable(){return[0]}current_memory(){return[63,0]}comment(){return[]}}let t8={i32:127,i64:126,f32:125,f64:124,anyfunc:112,func:96,emptyblock:64};class t7{constructor(t,e,a,i,o){if("import"==a)this.fnType="import",this.moduleName=i,this.fieldName=o;else if("internal"==a)this.fnType="internal";else throw Error("Invalid function fnType: "+a);this.module=t,this.fnName=e,this.params=[],this.locals=[],this.localIdxByName={},this.code=[],this.returnType=null,this.nextLocal=0}addParam(t,e){if(this.localIdxByName[t])throw Error(`param already exists. Function: ${this.fnName}, Param: ${t} `);let a=this.nextLocal++;this.localIdxByName[t]=a,this.params.push({type:e})}addLocal(t,e,a){if(this.localIdxByName[t])throw Error(`local already exists. Function: ${this.fnName}, Param: ${t} `);let i=this.nextLocal++;this.localIdxByName[t]=i,this.locals.push({type:e,length:a||1})}setReturnType(t){if(this.returnType)throw Error(`returnType already defined. Function: ${this.fnName}`);this.returnType=t}getSignature(){return[96,...t1(this.params.length),...this.params.map(t=>t8[t.type]),...this.returnType?[1,t8[this.returnType]]:[0]]}getBody(){let t=this.locals.map(t=>[...t1(t.length),t8[t.type]]),e=[...t1(this.locals.length),...[].concat(...t),...this.code,11];return[...t1(e.length),...e]}addCode(...t){this.code.push(...[].concat(...t))}getCodeBuilder(){return new t6(this)}}class t5{constructor(){this.functions=[],this.functionIdxByName={},this.nImportFunctions=0,this.nInternalFunctions=0,this.memory={pagesSize:1,moduleName:"env",fieldName:"memory"},this.free=8,this.datas=[],this.modules={},this.exports=[],this.functionsTable=[]}build(){return this._setSignatures(),new Uint8Array([...tX(0x6d736100),...tX(1),...this._buildType(),...this._buildImport(),...this._buildFunctionDeclarations(),...this._buildFunctionsTable(),...this._buildExports(),...this._buildElements(),...this._buildCode(),...this._buildData()])}addFunction(t){if(void 0!==this.functionIdxByName[t])throw Error(`Function already defined: ${t}`);let e=this.functions.length;return this.functionIdxByName[t]=e,this.functions.push(new t7(this,t,"internal")),this.nInternalFunctions++,this.functions[e]}addIimportFunction(t,e,a){if(void 0!==this.functionIdxByName[t])throw Error(`Function already defined: ${t}`);if(this.functions.length>0&&"internal"==this.functions[this.functions.length-1].type)throw Error(`Import functions must be declared before internal: ${t}`);let i=a||t,o=this.functions.length;return this.functionIdxByName[t]=o,this.functions.push(new t7(this,t,"import",e,i)),this.nImportFunctions++,this.functions[o]}setMemory(t,e,a){this.memory={pagesSize:t,moduleName:e||"env",fieldName:a||"memory"}}exportFunction(t,e){let a=e||t;if(void 0===this.functionIdxByName[t])throw Error(`Function not defined: ${t}`);let i=this.functionIdxByName[t];a!=t&&(this.functionIdxByName[a]=i),this.exports.push({exportName:a,idx:i})}addFunctionToTable(t){let e=this.functionIdxByName[t];this.functionsTable.push(e)}addData(t,e){this.datas.push({offset:t,bytes:e})}alloc(t,e){let a,i;(Array.isArray(t)||ArrayBuffer.isView(t))&&void 0===e?(a=t.length,i=t):(a=t,i=e),a=(a-1>>3)+1<<3;let o=this.free;return this.free+=a,i&&this.addData(o,i),o}allocString(t){let e=new globalThis.TextEncoder().encode(t);return this.alloc([...e,0])}_setSignatures(){this.signatures=[];let t={};if(this.functionsTable.length>0){let e=this.functions[this.functionsTable[0]].getSignature();t["s_"+t4(e)]=0,this.signatures.push(e)}for(let e=0;e<this.functions.length;e++){let a=this.functions[e].getSignature(),i="s_"+t4(a);void 0===t[i]&&(t[i]=this.signatures.length,this.signatures.push(a)),this.functions[e].signatureIdx=t[i]}}_buildSection(t,e){return[t,...t1(e.length),...e]}_buildType(){return this._buildSection(1,[...t1(this.signatures.length),...[].concat(...this.signatures)])}_buildImport(){let t=[];t.push([...tY(this.memory.moduleName),...tY(this.memory.fieldName),2,0,...t1(this.memory.pagesSize)]);for(let e=0;e<this.nImportFunctions;e++)t.push([...tY(this.functions[e].moduleName),...tY(this.functions[e].fieldName),0,...t1(this.functions[e].signatureIdx)]);return this._buildSection(2,t1(t.length).concat(...t))}_buildFunctionDeclarations(){let t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(...t1(this.functions[e].signatureIdx));return this._buildSection(3,[...t1(t.length),...t])}_buildFunctionsTable(){return 0==this.functionsTable.length?[]:this._buildSection(4,[...t1(1),112,0,...t1(this.functionsTable.length)])}_buildElements(){if(0==this.functionsTable.length)return[];let t=[];for(let e=0;e<this.functionsTable.length;e++)t.push(...t1(this.functionsTable[e]));return this._buildSection(9,[...t1(1),...t1(0),65,...t0(0),11,...t1(this.functionsTable.length),...t])}_buildExports(){let t=[];for(let e=0;e<this.exports.length;e++)t.push([...tY(this.exports[e].exportName),0,...t1(this.exports[e].idx)]);return this._buildSection(7,t1(t.length).concat(...t))}_buildCode(){let t=[];for(let e=this.nImportFunctions;e<this.nImportFunctions+this.nInternalFunctions;e++)t.push(this.functions[e].getBody());return this._buildSection(10,t1(t.length).concat(...t))}_buildData(){let t=[];t.push([0,65,0,11,4,...tX(this.free)]);for(let e=0;e<this.datas.length;e++)t.push([0,65,...t0(this.datas[e].offset),11,...t1(this.datas[e].bytes.length),...this.datas[e].bytes]);return this._buildSection(11,t1(t.length).concat(...t))}}async function t9(t,e){if(!t&&globalThis.curve_bn128)return globalThis.curve_bn128;let a=new t5;a.setMemory(25),(0,tF.buildBn128)(a),e&&e(a);let i={};i.code=a.build(),i.pq=a.modules.f1m.pq,i.pr=a.modules.frm.pq,i.pG1gen=a.modules.bn128.pG1gen,i.pG1zero=a.modules.bn128.pG1zero,i.pG1b=a.modules.bn128.pG1b,i.pG2gen=a.modules.bn128.pG2gen,i.pG2zero=a.modules.bn128.pG2zero,i.pG2b=a.modules.bn128.pG2b,i.pOneT=a.modules.bn128.pOneT,i.prePSize=a.modules.bn128.prePSize,i.preQSize=a.modules.bn128.preQSize,i.n8q=32,i.n8r=32,i.q=a.modules.bn128.q,i.r=a.modules.bn128.r;let o={name:"bn128",wasm:i,q:y("21888242871839275222246405745257275088696311157297823662689037894645226208583"),r:y("21888242871839275222246405745257275088548364400416034343698204186575808495617"),n8q:32,n8r:32,cofactorG2:y("30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d",16),singleThread:!!t},l=await tH(o);return l.terminate=async function(){o.singleThread||(globalThis.curve_bn128=null,await this.tm.terminate())},t||(globalThis.curve_bn128=l),l}async function et(t,e){if(!t&&globalThis.curve_bls12381)return globalThis.curve_bls12381;let a=new t5;a.setMemory(25),(0,tF.buildBls12381)(a),e&&e(a);let i={};i.code=a.build(),i.pq=a.modules.f1m.pq,i.pr=a.modules.frm.pq,i.pG1gen=a.modules.bls12381.pG1gen,i.pG1zero=a.modules.bls12381.pG1zero,i.pG1b=a.modules.bls12381.pG1b,i.pG2gen=a.modules.bls12381.pG2gen,i.pG2zero=a.modules.bls12381.pG2zero,i.pG2b=a.modules.bls12381.pG2b,i.pOneT=a.modules.bls12381.pOneT,i.prePSize=a.modules.bls12381.prePSize,i.preQSize=a.modules.bls12381.preQSize,i.n8q=48,i.n8r=32,i.q=a.modules.bls12381.q,i.r=a.modules.bls12381.r;let o={name:"bls12381",wasm:i,q:y("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),r:y("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),n8q:48,n8r:32,cofactorG1:y("0x396c8c005555e1568c00aaab0000aaab",16),cofactorG2:y("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5",16),singleThread:!!t},l=await tH(o);return l.terminate=async function(){o.singleThread||(globalThis.curve_bls12381=null,await this.tm.terminate())},t||(globalThis.curve_bls12381=l),l}globalThis.curve_bn128=null,globalThis.curve_bls12381=null;var ee=t.i(81364);y("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),y("21888242871839275222246405745257275088548364400416034343698204186575808495617"),y("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),y("21888242871839275222246405745257275088696311157297823662689037894645226208583");var ea=t.i(22734);async function ei(t,e,a,i){if(a=a||262144,"number"!=typeof e&&0>["w+","wx+","r","ax+","a+"].indexOf(e))throw Error("Invalid open option");let o=await ea.default.promises.open(t,e),l=await o.stat();return new eo(o,l,a,i,t)}class eo{constructor(t,e,a,i,o){for(this.fileName=o,this.fd=t,this.pos=0,this.pageSize=i||256;this.pageSize<e.blksize;)this.pageSize*=2;this.totalSize=e.size,this.totalPages=Math.floor((e.size-1)/this.pageSize)+1,this.maxPagesLoaded=Math.floor(a/this.pageSize)+1,this.pages={},this.pendingLoads=[],this.writing=!1,this.reading=!1,this.avBuffs=[],this.history={}}_loadPage(t){let e=this,a=new Promise((a,i)=>{e.pendingLoads.push({page:t,resolve:a,reject:i})});return e.__statusPage("After Load request: ",t),a}__statusPage(t,e){let a=[];if(!this.logHistory)return;a.push("=="+t+" "+e);let i="";for(let t=0;t<this.pendingLoads.length;t++)this.pendingLoads[t].page==e&&(i=i+" "+t);if(i&&a.push("Pending loads:"+i),void 0!==this.pages[e]){let t=this.pages[e];a.push("Loaded"),a.push("pendingOps: "+t.pendingOps),t.loading&&a.push("loading: "+t.loading),t.writing&&a.push("writing"),t.dirty&&a.push("dirty")}a.push("=="),this.history[e]||(this.history[e]=[]),this.history[e].push(a)}__printHistory(t){this.history[t]||console.log("Empty History ",t),console.log("History "+t);for(let e=0;e<this.history[t].length;e++)for(let a=0;a<this.history[t][e].length;a++)console.log("-> "+this.history[t][e][a])}_triggerLoad(){let t=this;if(t.reading||0==t.pendingLoads.length)return;let e=Object.keys(t.pages),a=[];for(let i=0;i<e.length;i++){let o=t.pages[parseInt(e[i])];!1!=o.dirty||0!=o.pendingOps||o.writing||o.loading||a.push(parseInt(e[i]))}let i=t.maxPagesLoaded-e.length,o=[];for(;t.pendingLoads.length>0&&(void 0!==t.pages[t.pendingLoads[0].page]||i>0||a.length>0);){let e=t.pendingLoads.shift();if(void 0!==t.pages[e.page]){t.pages[e.page].pendingOps++;let i=a.indexOf(e.page);i>=0&&a.splice(i,1),t.pages[e.page].loading?t.pages[e.page].loading.push(e):e.resolve(),t.__statusPage("After Load (cached): ",e.page)}else{if(i)i--;else{let e=a.shift();t.__statusPage("Before Unload: ",e),t.avBuffs.unshift(t.pages[e]),delete t.pages[e],t.__statusPage("After Unload: ",e)}e.page>=t.totalPages?(t.pages[e.page]=l(),e.resolve(),t.__statusPage("After Load (new): ",e.page)):(t.reading=!0,t.pages[e.page]=l(),t.pages[e.page].loading=[e],o.push(t.fd.read(t.pages[e.page].buff,0,t.pageSize,e.page*t.pageSize).then(a=>{t.pages[e.page].size=a.bytesRead;let i=t.pages[e.page].loading;delete t.pages[e.page].loading;for(let t=0;t<i.length;t++)i[t].resolve();return t.__statusPage("After Load (loaded): ",e.page),a},t=>{e.reject(t)})),t.__statusPage("After Load (loading): ",e.page))}}function l(){if(!(t.avBuffs.length>0))return{dirty:!1,buff:new Uint8Array(t.pageSize),pendingOps:1,size:0};{let e=t.avBuffs.shift();return e.dirty=!1,e.pendingOps=1,e.size=0,e}}Promise.all(o).then(()=>{t.reading=!1,t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t)),t._tryClose()})}_triggerWrite(){let t=this;if(t.writing)return;let e=Object.keys(t.pages),a=[];for(let i=0;i<e.length;i++){let o=t.pages[parseInt(e[i])];o.dirty&&(o.dirty=!1,o.writing=!0,t.writing=!0,a.push(t.fd.write(o.buff,0,o.size,parseInt(e[i])*t.pageSize).then(()=>{o.writing=!1},e=>{console.log("ERROR Writing: "+e),t.error=e,t._tryClose()})))}t.writing&&Promise.all(a).then(()=>{t.writing=!1,setImmediate(t._triggerWrite.bind(t)),t._tryClose(),t.pendingLoads.length>0&&setImmediate(t._triggerLoad.bind(t))})}_getDirtyPage(){for(let t in this.pages)if(this.pages[t].dirty)return t;return -1}async write(t,e){if(0==t.byteLength)return;if(void 0===e&&(e=this.pos),this.pos=e+t.byteLength,this.totalSize<e+t.byteLength&&(this.totalSize=e+t.byteLength),this.pendingClose)throw Error("Writing a closing file");let a=Math.floor(e/this.pageSize),i=Math.floor((e+t.byteLength-1)/this.pageSize),o=[];for(let t=a;t<=i;t++)o.push(this._loadPage(t));this._triggerLoad();let l=a,n=e%this.pageSize,c=t.byteLength;for(;c>0;){await o[l-a];let e=n+c>this.pageSize?this.pageSize-n:c,i=t.slice(t.byteLength-c,t.byteLength-c+e);new Uint8Array(this.pages[l].buff.buffer,n,e).set(i),this.pages[l].dirty=!0,this.pages[l].pendingOps--,this.pages[l].size=Math.max(n+e,this.pages[l].size),l>=this.totalPages&&(this.totalPages=l+1),c-=e,l++,n=0,this.writing||setImmediate(this._triggerWrite.bind(this))}}async read(t,e){let a=new Uint8Array(t);return await this.readToBuffer(a,0,t,e),a}async readToBuffer(t,e,a,i){if(0==a)return;if(a>this.pageSize*this.maxPagesLoaded*.8){let t=Math.floor(1.1*a);this.maxPagesLoaded=Math.floor(t/this.pageSize)+1}if(void 0===i&&(i=this.pos),this.pos=i+a,this.pendingClose)throw Error("Reading a closing file");let o=Math.floor(i/this.pageSize),l=Math.floor((i+a-1)/this.pageSize),n=[];for(let t=o;t<=l;t++)n.push(this._loadPage(t));this._triggerLoad();let c=o,r=i%this.pageSize,s=i+a>this.totalSize?a-(i+a-this.totalSize):a;for(;s>0;){await n[c-o],this.__statusPage("After Await (read): ",c);let i=r+s>this.pageSize?this.pageSize-r:s,l=new Uint8Array(this.pages[c].buff.buffer,this.pages[c].buff.byteOffset+r,i);t.set(l,e+a-s),this.pages[c].pendingOps--,this.__statusPage("After Op done: ",c),s-=i,c++,r=0,this.pendingLoads.length>0&&setImmediate(this._triggerLoad.bind(this))}this.pos=i+a}_tryClose(){!this.pendingClose||(this.error&&this.pendingCloseReject(this.error),this._getDirtyPage()>=0||this.writing||this.reading||this.pendingLoads.length>0||this.pendingClose())}close(){let t=this;if(t.pendingClose)throw Error("Closing the file twice");return new Promise((e,a)=>{t.pendingClose=e,t.pendingCloseReject=a,t._tryClose()}).then(()=>{t.fd.close()},e=>{throw t.fd.close(),e})}async discard(){await this.close(),await ea.default.promises.unlink(this.fileName)}async writeULE32(t,e){let a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,t,!0),await this.write(a,e)}async writeUBE32(t,e){let a=new Uint8Array(4);new DataView(a.buffer).setUint32(0,t,!1),await this.write(a,e)}async writeULE64(t,e){let a=new Uint8Array(8),i=new DataView(a.buffer);i.setUint32(0,0|t,!0),i.setUint32(4,Math.floor(t/0x100000000),!0),await this.write(a,e)}async readULE32(t){return new Uint32Array((await this.read(4,t)).buffer)[0]}async readUBE32(t){return new DataView((await this.read(4,t)).buffer).getUint32(0,!1)}async readULE64(t){let e=new Uint32Array((await this.read(8,t)).buffer);return 0x100000000*e[1]+e[0]}async readString(t){if(this.pendingClose)throw Error("Reading a closing file");let e=void 0===t?this.pos:t,a=Math.floor(e/this.pageSize),i=!1,o="";for(;!i;){let t=this._loadPage(a);this._triggerLoad(),await t,this.__statusPage("After Await (read): ",a);let l=e%this.pageSize,n=new Uint8Array(this.pages[a].buff.buffer,this.pages[a].buff.byteOffset+l,this.pageSize-l),c=n.findIndex(t=>0===t);(i=-1!==c)?(o+=new TextDecoder().decode(n.slice(0,c)),this.pos=a*this.pageSize+l+c+1):(o+=new TextDecoder().decode(n),this.pos=a*this.pageSize+l+n.length),this.pages[a].pendingOps--,this.__statusPage("After Op done: ",a),e=this.pos,a++,this.pendingLoads.length>0&&setImmediate(this._triggerLoad.bind(this))}return o}}let el=new Uint8Array(4),en=new DataView(el.buffer),ec=new Uint8Array(8),er=new DataView(ec.buffer);class es{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t>this.allocSize){let e=Math.max(this.allocSize+1048576,Math.floor(1.1*this.allocSize),t),a=new Uint8Array(e);a.set(this.o.data),this.o.data=a,this.allocSize=e}}async write(t,e){if(void 0===e&&(e=this.pos),this.readOnly)throw Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength),this.o.data.set(t.slice(),e),e+t.byteLength>this.totalSize&&(this.totalSize=e+t.byteLength),this.pos=e+t.byteLength}async readToBuffer(t,e,a,i){if(void 0===i&&(i=this.pos),this.readOnly&&i+a>this.totalSize)throw Error("Reading out of bounds");this._resizeIfNeeded(i+a);let o=new Uint8Array(this.o.data.buffer,this.o.data.byteOffset+i,a);t.set(o,e),this.pos=i+a}async read(t,e){let a=new Uint8Array(t);return await this.readToBuffer(a,0,t,e),a}close(){this.o.data.byteLength!=this.totalSize&&(this.o.data=this.o.data.slice(0,this.totalSize))}async discard(){}async writeULE32(t,e){en.setUint32(0,t,!0),await this.write(el,e)}async writeUBE32(t,e){en.setUint32(0,t,!1),await this.write(el,e)}async writeULE64(t,e){er.setUint32(0,0|t,!0),er.setUint32(4,Math.floor(t/0x100000000),!0),await this.write(ec,e)}async readULE32(t){return new Uint32Array((await this.read(4,t)).buffer)[0]}async readUBE32(t){return new DataView((await this.read(4,t)).buffer).getUint32(0,!1)}async readULE64(t){let e=new Uint32Array((await this.read(8,t)).buffer);return 0x100000000*e[1]+e[0]}async readString(t){let e=void 0===t?this.pos:t;if(e>this.totalSize){if(this.readOnly)throw Error("Reading out of bounds");this._resizeIfNeeded(t)}let a=new Uint8Array(this.o.data.buffer,e,this.totalSize-e),i=a.findIndex(t=>0===t),o="";return -1!==i?(o=new TextDecoder().decode(a.slice(0,i)),this.pos=e+i+1):this.pos=e,o}}let ed=new Uint8Array(4),e_=new DataView(ed.buffer),ef=new Uint8Array(8),eu=new DataView(ef.buffer);class eg{constructor(){this.pageSize=16384}_resizeIfNeeded(t){if(t<=this.totalSize)return;if(this.readOnly)throw Error("Reading out of file bounds");let e=Math.floor((t-1)/4194304)+1;for(let a=Math.max(this.o.data.length-1,0);a<e;a++){let i=new Uint8Array(a<e-1?4194304:t-(e-1)*4194304);a==this.o.data.length-1&&i.set(this.o.data[a]),this.o.data[a]=i}this.totalSize=t}async write(t,e){if(void 0===e&&(e=this.pos),this.readOnly)throw Error("Writing a read only file");this._resizeIfNeeded(e+t.byteLength);let a=Math.floor(e/4194304),i=e%4194304,o=t.byteLength;for(;o>0;){let e=i+o>4194304?4194304-i:o,l=t.slice(t.byteLength-o,t.byteLength-o+e);new Uint8Array(this.o.data[a].buffer,i,e).set(l),o-=e,a++,i=0}this.pos=e+t.byteLength}async readToBuffer(t,e,a,i){if(void 0===i&&(i=this.pos),this.readOnly&&i+a>this.totalSize)throw Error("Reading out of bounds");this._resizeIfNeeded(i+a);let o=Math.floor(i/4194304),l=i%4194304,n=a;for(;n>0;){let i=l+n>4194304?4194304-l:n,c=new Uint8Array(this.o.data[o].buffer,l,i);t.set(c,e+a-n),n-=i,o++,l=0}this.pos=i+a}async read(t,e){let a=new Uint8Array(t);return await this.readToBuffer(a,0,t,e),a}close(){}async discard(){}async writeULE32(t,e){e_.setUint32(0,t,!0),await this.write(ed,e)}async writeUBE32(t,e){e_.setUint32(0,t,!1),await this.write(ed,e)}async writeULE64(t,e){eu.setUint32(0,0|t,!0),eu.setUint32(4,Math.floor(t/0x100000000),!0),await this.write(ef,e)}async readULE32(t){return new Uint32Array((await this.read(4,t)).buffer)[0]}async readUBE32(t){return new DataView((await this.read(4,t)).buffer).getUint32(0,!1)}async readULE64(t){let e=new Uint32Array((await this.read(8,t)).buffer);return 0x100000000*e[1]+e[0]}async readString(t){let e=void 0===t?this.pos:t;if(e>this.totalSize){if(this.readOnly)throw Error("Reading out of bounds");this._resizeIfNeeded(t)}let a=!1,i="";for(;!a;){let t=Math.floor(e/4194304),o=e%4194304;if(void 0===this.o.data[t])throw Error("ERROR");let l=Math.min(2048,this.o.data[t].length-o),n=new Uint8Array(this.o.data[t].buffer,o,l),c=n.findIndex(t=>0===t);(a=-1!==c)?(i+=new TextDecoder().decode(n.slice(0,c)),this.pos=4194304*t+o+c+1):(i+=new TextDecoder().decode(n),this.pos=4194304*t+o+n.length),e=this.pos}return i}}var ep=t.i(12249);async function eh(t,e,a){if("string"==typeof t&&(t={type:"file",fileName:t,cacheSize:e||65536,pageSize:a||8192}),"file"==t.type)return await ei(t.fileName,ep.O_TRUNC|ep.O_CREAT|ep.O_RDWR,t.cacheSize,t.pageSize);if("mem"==t.type){var i;let e,a;return e=(i=t).initialSize||1048576,(a=new es).o=i,a.o.data=new Uint8Array(e),a.allocSize=e,a.totalSize=0,a.readOnly=!1,a.pos=0,a}if("bigMem"==t.type){var o=t;let e=o.initialSize||0,a=new eg;a.o=o;let i=e?Math.floor((e-1)/4194304)+1:0;a.o.data=[];for(let t=0;t<i-1;t++)a.o.data.push(new Uint8Array(4194304));return i&&a.o.data.push(new Uint8Array(e-4194304*(i-1))),a.totalSize=0,a.readOnly=!1,a.pos=0,a}throw Error("Invalid FastFile type: "+t.type)}async function eL(t,e,a){var i,o;if(t instanceof Uint8Array&&(t={type:"mem",data:t}),"string"==typeof t&&(t={type:"file",fileName:t,cacheSize:e||65536,pageSize:a||8192}),"file"==t.type)return await ei(t.fileName,ep.O_RDONLY,t.cacheSize,t.pageSize);if("mem"==t.type){let e;return await (i=t,(e=new es).o=i,e.allocSize=i.data.byteLength,e.totalSize=i.data.byteLength,e.readOnly=!0,e.pos=0,e)}if("bigMem"==t.type){let e;return await (o=t,(e=new eg).o=o,e.totalSize=(o.data.length-1)*4194304+o.data[o.data.length-1].byteLength,e.readOnly=!0,e.pos=0,e)}throw Error("Invalid FastFile type: "+t.type)}async function em(t,e,a,i,o){let l=await eL(t,i,o),n=await l.read(4),c="";for(let t=0;t<4;t++)c+=String.fromCharCode(n[t]);if(c!=e)throw Error(t+": Invalid File format");if(await l.readULE32()>a)throw Error("Version not supported");let r=await l.readULE32(),s=[];for(let t=0;t<r;t++){let t=await l.readULE32(),e=await l.readULE64();void 0===s[t]&&(s[t]=[]),s[t].push({p:l.pos,size:e}),l.pos+=e}return{fd:l,sections:s}}async function eb(t,e,a,i,o,l){let n=await eh(t,o,l),c=new Uint8Array(4);for(let t=0;t<4;t++)c[t]=e.charCodeAt(t);return await n.write(c,0),await n.writeULE32(a),await n.writeULE32(i),n}async function ex(t,e){if(void 0!==t.writingSection)throw Error("Already writing a section");await t.writeULE32(e),t.writingSection={pSectionSize:t.pos},await t.writeULE64(0)}async function ey(t){if(void 0===t.writingSection)throw Error("Not writing a section");let e=t.pos-t.writingSection.pSectionSize-8,a=t.pos;t.pos=t.writingSection.pSectionSize,await t.writeULE64(e),t.pos=a,delete t.writingSection}async function eF(t,e,a){if(void 0!==t.readingSection)throw Error("Already reading a section");if(!e[a])throw Error(t.fileName+": Missing section "+a);if(e[a].length>1)throw Error(t.fileName+": Section Duplicated "+a);t.pos=e[a][0].p,t.readingSection=e[a][0]}async function ew(t,e){if(void 0===t.readingSection)throw Error("Not reading a section");if(!e&&t.pos-t.readingSection.p!=t.readingSection.size)throw Error("Invalid section size reading");delete t.readingSection}async function eB(t,e,a,i){let o=new Uint8Array(a);ts.toRprLE(o,0,e,a),await t.write(o,i)}async function eC(t,e,a){let i=await t.read(e,a);return ts.fromRprLE(i,0,e)}async function ev(t,e,a,i,o){let l;if(i=void 0===i?0:i,o=void 0===o?e[a][0].size-i:o,i+o>e[a][0].size)throw Error("Reading out of the range of the section");return l=o<0x40000000?new Uint8Array(o):new tq(o),await t.readToBuffer(l,0,o,e[a][0].p+i),l}ts.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),ts.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");let eA=ts.e("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),eI=ts.e("21888242871839275222246405745257275088696311157297823662689037894645226208583");async function eE(t,e){let a,i=e&&e.singleThread;if(ts.eq(t,eI))a=await t9(i);else if(ts.eq(t,eA))a=await et(i);else throw Error(`Curve not supported: ${ts.toString(t)}`);return a}async function eP(t,e){let a,i=e&&e.singleThread,o=t.toUpperCase().match(/[A-Za-z0-9]+/g).join("");if(["BN128","BN254","ALTBN128"].indexOf(o)>=0)a=await t9(i);else if(["BLS12381"].indexOf(o)>=0)a=await et(i);else throw Error(`Curve not supported: ${t}`);return a}new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];let eO=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),eS=BigInt(0x100000000-1),eq=BigInt(32);function ez(t,e=!1){return e?{h:Number(t&eS),l:Number(t>>eq&eS)}:{h:0|Number(t>>eq&eS),l:0|Number(t&eS)}}t.i(19668);let eM=[];for(let t=0;t<256;t++)eM[t]=function(t,e){let a=0,i=t;for(let t=0;t<8;t++)a<<=1,a|=1&i,i>>=1;return a}(t,8);function eT(t){return((0xffff0000&t)!=0?(t&=0xffff0000,16):0)|((0xff00ff00&t)!=0?(t&=0xff00ff00,8):0)|((0xf0f0f0f0&t)!=0?(t&=0xf0f0f0f0,4):0)|((0xcccccccc&t)!=0?(t&=0xcccccccc,2):0)|(0xaaaaaaaa&t)!=0}async function eR(t,e,a){let i=await t.read(2*e.G1.F.n8),o=e.G1.fromRprLEM(i,0);return a?e.G1.toObject(o):o}async function eU(t,e,a){let i=await t.read(2*e.G2.F.n8),o=e.G2.fromRprLEM(i,0);return a?e.G2.toObject(o):o}async function eN(t,e,a,i){await eF(t,e,1);let o=await t.readULE32();if(await ew(t),1===o)return await ek(t,e,a,i);if(2===o)return await ej(t,e,a,i);if(10===o)return await eG(t,e,a,i);throw Error("Protocol not supported: ")}async function ek(t,e,a,i){let o={};o.protocol="groth16",await eF(t,e,2);let l=await t.readULE32();o.n8q=l,o.q=await eC(t,l);let n=await t.readULE32();return o.n8r=n,o.r=await eC(t,n),o.curve=await eE(o.q,i),o.nVars=await t.readULE32(),o.nPublic=await t.readULE32(),o.domainSize=await t.readULE32(),o.power=eT(o.domainSize),o.vk_alpha_1=await eR(t,o.curve,a),o.vk_beta_1=await eR(t,o.curve,a),o.vk_beta_2=await eU(t,o.curve,a),o.vk_gamma_2=await eU(t,o.curve,a),o.vk_delta_1=await eR(t,o.curve,a),o.vk_delta_2=await eU(t,o.curve,a),await ew(t),o}async function ej(t,e,a,i){let o={};o.protocol="plonk",await eF(t,e,2);let l=await t.readULE32();o.n8q=l,o.q=await eC(t,l);let n=await t.readULE32();return o.n8r=n,o.r=await eC(t,n),o.curve=await eE(o.q,i),o.nVars=await t.readULE32(),o.nPublic=await t.readULE32(),o.domainSize=await t.readULE32(),o.power=eT(o.domainSize),o.nAdditions=await t.readULE32(),o.nConstraints=await t.readULE32(),o.k1=await t.read(n),o.k2=await t.read(n),o.Qm=await eR(t,o.curve,a),o.Ql=await eR(t,o.curve,a),o.Qr=await eR(t,o.curve,a),o.Qo=await eR(t,o.curve,a),o.Qc=await eR(t,o.curve,a),o.S1=await eR(t,o.curve,a),o.S2=await eR(t,o.curve,a),o.S3=await eR(t,o.curve,a),o.X_2=await eU(t,o.curve,a),await ew(t),o}async function eG(t,e,a,i){let o={};o.protocol="fflonk",o.protocolId=10,await eF(t,e,2);let l=await t.readULE32();o.n8q=l,o.q=await eC(t,l),o.curve=await eE(o.q,i);let n=await t.readULE32();return o.n8r=n,o.r=await eC(t,n),o.nVars=await t.readULE32(),o.nPublic=await t.readULE32(),o.domainSize=await t.readULE32(),o.power=eT(o.domainSize),o.nAdditions=await t.readULE32(),o.nConstraints=await t.readULE32(),o.k1=await t.read(n),o.k2=await t.read(n),o.w3=await t.read(n),o.w4=await t.read(n),o.w8=await t.read(n),o.wr=await t.read(n),o.X_2=await eU(t,o.curve,a),o.C0=await eR(t,o.curve,a),await ew(t),o}async function e$(t,e,a){await ex(t,1);let i=(Math.floor((ts.bitLength(a)-1)/64)+1)*8;if(await t.writeULE32(i),await eB(t,a,i),e.byteLength%i!=0)throw Error("Invalid witness length");await t.writeULE32(e.byteLength/i),await ey(t),await ex(t,2),await t.write(e),await ey(t)}async function eD(t,e){await eF(t,e,1);let a=await t.readULE32(),i=await eC(t,a),o=await t.readULE32();return await ew(t),{n8:a,q:i,nWitness:o}}let{stringifyBigInts:eW}=ee;async function eZ(t,e,a,i){let{fd:o,sections:l}=await em(e,"wtns",2,0x2000000,8388608),n=await eD(o,l),{fd:c,sections:r}=await em(t,"zkey",2,0x2000000,8388608),s=await eN(c,r,void 0,i);if("groth16"!=s.protocol)throw Error("zkey file is not groth16");if(!ts.eq(s.r,n.q))throw Error("Curve of the witness does not match the curve of the proving key");if(n.nWitness!=s.nVars)throw Error(`Invalid witness length. Circuit: ${s.nVars}, witness: ${n.nWitness}`);let d=s.curve,_=d.Fr,f=d.G1,u=d.G2,g=eT(s.domainSize);a&&a.debug("Reading Wtns");let p=await ev(o,l,2);a&&a.debug("Reading Coeffs");let h=await ev(c,r,4);a&&a.debug("Building ABC");let[L,m,b]=await eV(d,s,p,h,a),x=g==_.s?d.Fr.shift:d.Fr.w[g+1],y=await _.ifft(L,"","",a,"IFFT_A"),F=await _.batchApplyKey(y,_.e(1),x),w=await _.fft(F,"","",a,"FFT_A"),B=await _.ifft(m,"","",a,"IFFT_B"),C=await _.batchApplyKey(B,_.e(1),x),v=await _.fft(C,"","",a,"FFT_B"),A=await _.ifft(b,"","",a,"IFFT_C"),I=await _.batchApplyKey(A,_.e(1),x),E=await _.fft(I,"","",a,"FFT_C");a&&a.debug("Join ABC");let P=await eJ(d,s,w,v,E,a),O={};a&&a.debug("Reading A Points");let S=await ev(c,r,5);O.pi_a=await d.G1.multiExpAffine(S,p,a,"multiexp A"),a&&a.debug("Reading B1 Points");let q=await ev(c,r,6),z=await d.G1.multiExpAffine(q,p,a,"multiexp B1");a&&a.debug("Reading B2 Points");let M=await ev(c,r,7);O.pi_b=await d.G2.multiExpAffine(M,p,a,"multiexp B2"),a&&a.debug("Reading C Points");let T=await ev(c,r,8);O.pi_c=await d.G1.multiExpAffine(T,p.slice((s.nPublic+1)*d.Fr.n8),a,"multiexp C"),a&&a.debug("Reading H Points");let R=await ev(c,r,9),U=await d.G1.multiExpAffine(R,P,a,"multiexp H"),N=d.Fr.random(),k=d.Fr.random();O.pi_a=f.add(O.pi_a,s.vk_alpha_1),O.pi_a=f.add(O.pi_a,f.timesFr(s.vk_delta_1,N)),O.pi_b=u.add(O.pi_b,s.vk_beta_2),O.pi_b=u.add(O.pi_b,u.timesFr(s.vk_delta_2,k)),z=f.add(z,s.vk_beta_1),z=f.add(z,f.timesFr(s.vk_delta_1,k)),O.pi_c=f.add(O.pi_c,U),O.pi_c=f.add(O.pi_c,f.timesFr(O.pi_a,k)),O.pi_c=f.add(O.pi_c,f.timesFr(z,N)),O.pi_c=f.add(O.pi_c,f.timesFr(s.vk_delta_1,_.neg(_.mul(N,k))));let j=[];for(let t=1;t<=s.nPublic;t++){let e=p.slice(t*_.n8,t*_.n8+_.n8);j.push(ts.fromRprLE(e))}return O.pi_a=f.toObject(f.toAffine(O.pi_a)),O.pi_b=u.toObject(u.toAffine(O.pi_b)),O.pi_c=f.toObject(f.toAffine(O.pi_c)),O.protocol="groth16",O.curve=d.name,await c.close(),await o.close(),{proof:O=eW(O),publicSignals:j=eW(j)}}async function eV(t,e,a,i,o){let l=t.Fr.n8,n=12+e.n8r,c=(i.byteLength-4)/n,r=new tq(e.domainSize*l),s=new tq(e.domainSize*l),d=new tq(e.domainSize*l),_=[r,s];for(let e=0;e<c;e++){o&&e%1e6==0&&o.debug(`QAP AB: ${e}/${c}`);let r=i.slice(4+e*n,4+e*n+n),s=new DataView(r.buffer),d=s.getUint32(0,!0),f=s.getUint32(4,!0),u=s.getUint32(8,!0),g=r.slice(12,12+l);_[d].set(t.Fr.add(_[d].slice(f*l,f*l+l),t.Fr.mul(g,a.slice(u*l,u*l+l))),f*l)}for(let a=0;a<e.domainSize;a++)o&&a%1e6==0&&o.debug(`QAP C: ${a}/${e.domainSize}`),d.set(t.Fr.mul(r.slice(a*l,a*l+l),s.slice(a*l,a*l+l)),a*l);return[r,s,d]}async function eJ(t,e,a,i,o,l){let n,c=t.Fr.n8,r=Math.floor(a.byteLength/t.Fr.n8),s=[];for(let e=0;e<r;e+=4194304){l&&l.debug(`JoinABC: ${e}/${r}`);let n=Math.min(r-e,4194304),d=[],_=a.slice(e*c,(e+n)*c),f=i.slice(e*c,(e+n)*c),u=o.slice(e*c,(e+n)*c);d.push({cmd:"ALLOCSET",var:0,buff:_}),d.push({cmd:"ALLOCSET",var:1,buff:f}),d.push({cmd:"ALLOCSET",var:2,buff:u}),d.push({cmd:"ALLOC",var:3,len:n*c}),d.push({cmd:"CALL",fnName:"qap_joinABC",params:[{var:0},{var:1},{var:2},{val:n},{var:3}]}),d.push({cmd:"CALL",fnName:"frm_batchFromMontgomery",params:[{var:3},{val:n},{var:3}]}),d.push({cmd:"GET",out:0,var:3,len:n*c}),s.push(t.tm.queueAction(d))}let d=await Promise.all(s);n=a instanceof tq?new tq(a.byteLength):new Uint8Array(a.byteLength);let _=0;for(let t=0;t<d.length;t++)n.set(d[t][0],_),_+=d[t][0].byteLength;return n}function eQ(t){let e=[];return function t(e,a){if(Array.isArray(a))for(let i=0;i<a.length;i++)t(e,a[i]);else e.push(a)}(e,t),e}function eH(t){let e=BigInt(2)**BigInt(64),a=BigInt("0xCBF29CE484222325");for(let i=0;i<t.length;i++)a^=BigInt(t[i].charCodeAt(0)),a*=BigInt(0x100000001b3),a%=e;let i=a.toString(16),o=16-i.length;return"0".repeat(o).concat(i)}async function eK(t,e){let a,i,o;e=e||{};let l=1,n=0,c=0,r=!1;if(t instanceof WebAssembly.Instance)a=t,r=!0;else{let r=32767;if(e.memorySize&&(r=parseInt(e.memorySize))<0)throw Error("Invalid memory size");let s=!1;for(;!s;)try{o=new WebAssembly.Memory({initial:r}),s=!0}catch(t){if(r<=1)throw t;console.warn("Could not allocate "+1024*r*64+" bytes. This may cause severe instability. Trying with "+1024*r*64/2+" bytes"),r=Math.floor(r/2)}let f=await WebAssembly.compile(t),u="",g="";a=await WebAssembly.instantiate(f,{env:{memory:o},runtime:{printDebug:function(t){console.log("printDebug:",t)},exceptionHandler:function(t){let e;throw e=1===t?"Signal not found. ":2===t?"Too many signals set. ":3===t?"Signal already set. ":4===t?"Assert Failed. ":5===t?"Not enough memory. ":6===t?"Input signal array access exceeds the size. ":"Unknown error. ",console.error("ERROR: ",t,u),Error(e+u)},printErrorMessage:function(){u+=d()+"\n"},writeBufferMessage:function(){let t=d();"\n"===t?(console.log(g),g=""):(""!==g&&(g+=" "),g+=t)},showSharedRWMemory:function(){let t=a.exports.getFieldNumLen32(),e=new Uint32Array(t);for(let i=0;i<t;i++)e[t-1-i]=a.exports.readSharedRWMemory(i);if(l>=2&&(n>=1||c>=7)){""!==g&&(g+=" ");let t=ts.fromArray(e,0x100000000).toString();g+=t}else console.log(ts.fromArray(e,0x100000000))},error:function(t,a,o,l,n,c){let r;throw r=7===t?_(a)+" "+i.getFr(l).toString()+" != "+i.getFr(n).toString()+" "+_(c):9===t?_(a)+" "+i.getFr(l).toString()+" "+_(n):5===t&&e.sym?_(a)+" "+e.sym.labelIdx2Name[n]:_(a)+" "+o+" "+l+" "+n+" "+c,console.log("ERROR: ",t,r),Error(r)},log:function(t){console.log(i.getFr(t).toString())},logGetSignal:function(t,a){e.logGetSignal&&e.logGetSignal(t,i.getFr(a))},logSetSignal:function(t,a){e.logSetSignal&&e.logSetSignal(t,i.getFr(a))},logStartComponent:function(t){e.logStartComponent&&e.logStartComponent(t)},logFinishComponent:function(t){e.logFinishComponent&&e.logFinishComponent(t)}}})}"function"==typeof a.exports.getVersion&&(l=a.exports.getVersion()),"function"==typeof a.exports.getMinorVersion&&(n=a.exports.getMinorVersion()),"function"==typeof a.exports.getPatchVersion&&(c=a.exports.getPatchVersion());let s=e&&(e.sanityCheck||e.logGetSignal||e.logSetSignal||e.logStartComponent||e.logFinishComponent);if(2===l)i=new eY(a,s);else if(1===l){if(r)throw Error("Loading code from WebAssembly instance is not supported for circom version 1");i=new eX(o,a,s)}else throw Error(`Unsupported circom version: ${l}`);return i;function d(){let t="",e=a.exports.getMessageChar();for(;0!==e;)t+=String.fromCharCode(e),e=a.exports.getMessageChar();return t}function _(t){let e=new Uint8Array(o.buffer),a=[];for(let i=0;e[t+i]>0;i++)a.push(e[t+i]);return String.fromCharCode.apply(null,a)}}class eX{constructor(t,e,a){this.memory=t,this.i32=new Uint32Array(t.buffer),this.instance=e,this.n32=(this.instance.exports.getFrLen()>>2)-2;const i=this.instance.exports.getPRawPrime(),o=Array(this.n32);for(let t=0;t<this.n32;t++)o[this.n32-1-t]=this.i32[(i>>2)+t];this.prime=ts.fromArray(o,0x100000000),this.Fr=new ty(this.prime),this.mask32=ts.fromString("FFFFFFFF",16),this.NVars=this.instance.exports.getNVars(),this.n64=Math.floor((this.Fr.bitLength-1)/64)+1,this.R=this.Fr.e(ts.shiftLeft(1,64*this.n64)),this.RInv=this.Fr.inv(this.R),this.sanityCheck=a}circom_version(){return 1}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);let a=this.allocInt(),i=this.allocFr();Object.keys(t).forEach(e=>{let o=eH(e),l=parseInt(o.slice(0,8),16),n=parseInt(o.slice(8,16),16);try{this.instance.exports.getSignalOffset32(a,0,l,n)}catch(t){throw Error(`Signal ${e} is not an input of the circuit.`)}let c=this.getInt(a),r=eQ(t[e]);for(let t=0;t<r.length;t++)this.setFr(i,r[t]),this.instance.exports.setSignal(0,0,c+t,i)})}async calculateWitness(t,e){let a=this.i32[0],i=[];await this._doCalculateWitness(t,e);for(let t=0;t<this.NVars;t++){let e=this.instance.exports.getPWitness(t);i.push(this.getFr(e))}return this.i32[0]=a,i}async calculateBinWitness(t,e){let a=this.i32[0];await this._doCalculateWitness(t,e);let i=this.instance.exports.getWitnessBuffer();return this.i32[0]=a,new Uint8Array(this.memory.buffer.slice(i,i+this.NVars*this.n64*8))}allocInt(){let t=this.i32[0];return this.i32[0]=t+8,t}allocFr(){let t=this.i32[0];return this.i32[0]=t+4*this.n32+8,t}getInt(t){return this.i32[t>>2]}setInt(t,e){this.i32[t>>2]=e}getFr(t){let e=this,a=t>>2;if(0x80000000&e.i32[a+1]){var i;let t=Array(e.n32);for(let i=0;i<e.n32;i++)t[e.n32-1-i]=e.i32[a+2+i];let o=e.Fr.e(ts.fromArray(t,0x100000000));return 0x40000000&e.i32[a+1]?(i=o,e.Fr.mul(e.RInv,i)):o}return 0x80000000&e.i32[a]?e.Fr.e(e.i32[a]-0x100000000):e.Fr.e(e.i32[a])}setFr(t,e){e=this.Fr.e(e);let a=this.Fr.neg(this.Fr.e("80000000",16)),i=this.Fr.e("7FFFFFFF",16);if(this.Fr.geq(e,a)&&this.Fr.leq(e,i)){let i;i=this.Fr.geq(e,this.Fr.zero)?ts.toNumber(e):0x100000000+(i=ts.toNumber(this.Fr.sub(e,a))-0x80000000),this.i32[t>>2]=i,this.i32[(t>>2)+1]=0;return}this.i32[t>>2]=0,this.i32[(t>>2)+1]=0x80000000;let o=ts.toArray(e,0x100000000);for(let e=0;e<this.n32;e++){let a=o.length-1-e;a>=0?this.i32[(t>>2)+2+e]=o[a]:this.i32[(t>>2)+2+e]=0}}}class eY{constructor(t,e){this.instance=t,this.version=this.instance.exports.getVersion(),this.n32=this.instance.exports.getFieldNumLen32(),this.instance.exports.getRawPrime();const a=new Uint32Array(this.n32);for(let t=0;t<this.n32;t++)a[this.n32-1-t]=this.instance.exports.readSharedRWMemory(t);this.prime=ts.fromArray(a,0x100000000),this.witnessSize=this.instance.exports.getWitnessSize(),this.sanityCheck=e}circom_version(){return this.instance.exports.getVersion()}async _doCalculateWitness(t,e){this.instance.exports.init(this.sanityCheck||e?1:0);let a=Object.keys(t),i=0;if(a.forEach(e=>{let a=eH(e),o=parseInt(a.slice(0,8),16),l=parseInt(a.slice(8,16),16),n=eQ(t[e]);if("function"==typeof this.instance.exports.getInputSignalSize){let t=this.instance.exports.getInputSignalSize(o,l);if(t<0)throw Error(`Signal ${e} not found
`);if(n.length<t)throw Error(`Not enough values for input signal ${e}
`);if(n.length>t)throw Error(`Too many values for input signal ${e}
`)}for(let t=0;t<n.length;t++){let e=function(t,e){let a=[],i=BigInt(t),o=BigInt(0x100000000);for(;i;)a.unshift(Number(i%o)),i/=o;if(e){let t=e-a.length;for(;t>0;)a.unshift(0),t--}return a}(function(t,e){let a=BigInt(t)%e;return a<0&&(a+=e),a}(n[t],this.prime),this.n32);for(let t=0;t<this.n32;t++)this.instance.exports.writeSharedRWMemory(t,e[this.n32-1-t]);try{this.instance.exports.setInputSignal(o,l,t),i++}catch(t){throw Error(t)}}}),i<this.instance.exports.getInputSize())throw Error(`Not all inputs have been set. Only ${i} out of ${this.instance.exports.getInputSize()}`)}async calculateWitness(t,e){let a=[];await this._doCalculateWitness(t,e);for(let t=0;t<this.witnessSize;t++){this.instance.exports.getWitness(t);let e=new Uint32Array(this.n32);for(let t=0;t<this.n32;t++)e[this.n32-1-t]=this.instance.exports.readSharedRWMemory(t);a.push(ts.fromArray(e,0x100000000))}return a}async calculateWTNSBin(t,e){let a=new Uint32Array(this.witnessSize*this.n32+this.n32+11),i=new Uint8Array(a.buffer);await this._doCalculateWitness(t,e),i[0]=119,i[1]=116,i[2]=110,i[3]=115,a[1]=2,a[2]=2,a[3]=1;let o=4*this.n32,l=(8+o).toString(16);a[4]=parseInt(l.slice(0,8),16),a[5]=parseInt(l.slice(8,16),16),a[6]=o,this.instance.exports.getRawPrime();let n=7;for(let t=0;t<this.n32;t++)a[n+t]=this.instance.exports.readSharedRWMemory(t);a[n+=this.n32]=this.witnessSize,a[++n]=2,n++;let c=(o*this.witnessSize).toString(16);a[n]=parseInt(c.slice(0,8),16),a[n+1]=parseInt(c.slice(8,16),16),n+=2;for(let t=0;t<this.witnessSize;t++){this.instance.exports.getWitness(t);for(let t=0;t<this.n32;t++)a[n+t]=this.instance.exports.readSharedRWMemory(t);n+=this.n32}return i}}let{unstringifyBigInts:e2}=ee;async function e3(t,e,a,i){let o=e2(t),l=await eL(e),n=await l.read(l.totalSize);await l.close();let c=await eK(n,i);if(1===c.circom_version()){let t=await c.calculateBinWitness(o),e=await eb(a,"wtns",2,2);await e$(e,t,c.prime),await e.close()}else{let t=await eh(a),e=await c.calculateWTNSBin(o);await t.write(e),await t.close()}}let{unstringifyBigInts:e0}=ee;async function e1(t,e,a,i,o,l){let n=e0(t),c={type:"mem"};return await e3(n,e,c,o),await eZ(a,c,i,l)}let{unstringifyBigInts:e4}=ee;async function e6(t,e,a,i){var o,l;let n,c,r=e4(t),s=e4(a),d=e4(e),_=await eP(r.curve),f=_.G1.fromObject(r.IC[0]),u=new Uint8Array(2*_.G1.F.n8*d.length),g=new Uint8Array(_.Fr.n8*d.length);if(!function(t,e){for(let i=0;i<e.length;i++){var a;if(a=e[i],!(ts.geq(a,0)&&ts.lt(a,t.r)))return!1}return!0}(_,d))return i&&i.error("Public inputs are not valid."),!1;for(let t=0;t<d.length;t++){let e=_.G1.fromObject(r.IC[t+1]);u.set(e,t*_.G1.F.n8*2),ts.toRprLE(g,_.Fr.n8*t,d[t],_.Fr.n8)}let p=await _.G1.multiExpAffine(u,g);p=_.G1.add(p,f);let h=_.G1.fromObject(s.pi_a),L=_.G2.fromObject(s.pi_b),m=_.G1.fromObject(s.pi_c);if(o=_,l={pi_a:h,pi_b:L,pi_c:m},n=o.G1,c=o.G2,!(n.isValid(l.pi_a)&&c.isValid(l.pi_b)&&n.isValid(l.pi_c)))return i&&i.error("Proof commitments are not valid."),!1;let b=_.G2.fromObject(r.vk_gamma_2),x=_.G2.fromObject(r.vk_delta_2),y=_.G1.fromObject(r.vk_alpha_1),F=_.G2.fromObject(r.vk_beta_2);return await _.pairingEq(_.G1.neg(h),L,p,b,m,x,y,F)?(i&&i.info("OK!"),!0):(i&&i.error("Invalid proof"),!1)}let{unstringifyBigInts:e8}=ee;function e7(t){let e=t.toString(16);for(;e.length<64;)e="0"+e;return`"0x${e}"`}async function e5(t,e){let a=e8(t),i=e8(e),o="";for(let t=0;t<i.length;t++)""!=o&&(o+=","),o+=e7(i[t]);return`[${e7(a.pi_a[0])}, ${e7(a.pi_a[1])}],[[${e7(a.pi_b[0][1])}, ${e7(a.pi_b[0][0])}],[${e7(a.pi_b[1][1])}, ${e7(a.pi_b[1][0])}]],[${e7(a.pi_c[0])}, ${e7(a.pi_c[1])}],[${o}]`}t.s([],8076);let e9=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];function at(t,e){if(!e||10==e)return BigInt(t);if(16==e)if("0x"==t.slice(0,2))return BigInt(t);else return BigInt("0x"+t)}function ae(t,e){let a=BigInt(0);e=BigInt(e);for(let i=0;i<t.length;i++)a=a*e+BigInt(t[i]);return a}function aa(t){let e=t.toString(16);return(e.length-1)*4+e9[parseInt(e[0],16)]}function ai(t){return BigInt(t)<BigInt(0)}function ao(t){return!t}function al(t,e){return BigInt(t)<<BigInt(e)}function an(t,e){return BigInt(t)>>BigInt(e)}function ac(t){return(BigInt(t)&BigInt(1))==BigInt(1)}function ar(t){let e=BigInt(t),a=[];for(;e;){if(e&BigInt(1)){let t=2-Number(e%BigInt(4));a.push(t),e-=BigInt(t)}else a.push(0);e>>=BigInt(1)}return a}function as(t){let e=BigInt(t),a=[];for(;e;)e&BigInt(1)?a.push(1):a.push(0),e>>=BigInt(1);return a}function ad(t){if(t>BigInt(Number.MAX_SAFE_INTEGER))throw Error("Number too big");return Number(t)}function a_(t,e){let a=[],i=BigInt(t);for(e=BigInt(e);i;)a.unshift(Number(i%e)),i/=e;return a}function af(t,e){return BigInt(t)+BigInt(e)}function au(t,e){return BigInt(t)-BigInt(e)}function ag(t){return-BigInt(t)}function ap(t,e){return BigInt(t)*BigInt(e)}function ah(t){return BigInt(t)*BigInt(t)}function aL(t,e){return BigInt(t)**BigInt(e)}function am(t,e){return BigInt(t)**BigInt(e)}function ab(t){return BigInt(t)>=0?BigInt(t):-BigInt(t)}function ax(t,e){return BigInt(t)/BigInt(e)}function ay(t,e){return BigInt(t)%BigInt(e)}function aF(t,e){return BigInt(t)==BigInt(e)}function aw(t,e){return BigInt(t)!=BigInt(e)}function aB(t,e){return BigInt(t)<BigInt(e)}function aC(t,e){return BigInt(t)>BigInt(e)}function av(t,e){return BigInt(t)<=BigInt(e)}function aA(t,e){return BigInt(t)>=BigInt(e)}function aI(t,e){return BigInt(t)&BigInt(e)}function aE(t,e){return BigInt(t)|BigInt(e)}function aP(t,e){return BigInt(t)^BigInt(e)}function aO(t,e){return BigInt(t)&&BigInt(e)}function aS(t,e){return BigInt(t)||BigInt(e)}function aq(t){return!BigInt(t)}function az(t,e,a,i){let o="0000000"+a.toString(16),l=new Uint32Array(t.buffer,t.byteOffset+e,i/4),n=((o.length-7)*4-1>>5)+1;for(let t=0;t<n;t++)l[t]=parseInt(o.substring(o.length-8*t-8,o.length-8*t),16);for(let t=n;t<l.length;t++)l[t]=0;for(let e=4*l.length;e<i;e++)t[e]=ad(aI(an(a,8*e),255))}function aM(t,e,a,i){let o="0000000"+a.toString(16),l=new DataView(t.buffer,t.byteOffset+e,i),n=((o.length-7)*4-1>>5)+1;for(let t=0;t<n;t++)l.setUint32(i-4*t-4,parseInt(o.substring(o.length-8*t-8,o.length-8*t),16),!1);for(let t=0;t<i/4-n;t++)l[t]=0}function aT(t,e,a){a=a||t.byteLength,e=e||0;let i=new Uint32Array(t.buffer,t.byteOffset+e,a/4),o=Array(a/4);return i.forEach((t,e)=>o[o.length-e-1]=t.toString(16).padStart(8,"0")),at(o.join(""),16)}function aR(t,e,a){a=a||t.byteLength,e=e||0;let i=new DataView(t.buffer,t.byteOffset+e,a),o=Array(a/4);for(let t=0;t<a/4;t++)o[t]=i.getUint32(4*t,!1).toString(16).padStart(8,"0");return at(o.join(""),16)}function aU(t,e){return t.toString(e)}function aN(t){let e=new Uint8Array(Math.floor((aa(t)-1)/8)+1);return az(e,0,t,e.byteLength),e}let ak=at(0),aj=at(1);t.s(["abs",()=>ab,"add",()=>af,"band",()=>aI,"bitLength",()=>aa,"bits",()=>as,"bor",()=>aE,"bxor",()=>aP,"div",()=>ax,"e",0,at,"eq",()=>aF,"exp",()=>am,"fromArray",()=>ae,"fromRprBE",()=>aR,"fromRprLE",()=>aT,"fromString",()=>at,"geq",()=>aA,"gt",()=>aC,"isNegative",()=>ai,"isOdd",()=>ac,"isZero",()=>ao,"land",()=>aO,"leq",()=>av,"lnot",()=>aq,"lor",()=>aS,"lt",()=>aB,"mod",()=>ay,"mul",()=>ap,"naf",()=>ar,"neg",()=>ag,"neq",()=>aw,"one",0,aj,"pow",()=>aL,"shiftLeft",()=>al,"shiftRight",()=>an,"shl",0,al,"shr",0,an,"square",()=>ah,"sub",()=>au,"toArray",()=>a_,"toLEBuff",()=>aN,"toNumber",()=>ad,"toRprBE",()=>aM,"toRprLE",()=>az,"toString",()=>aU,"zero",0,ak],5733),t.i(5733);let aG=[];for(let t=0;t<256;t++)aG[t]=function(t,e){let a=0,i=t;for(let t=0;t<8;t++)a<<=1,a|=1&i,i>>=1;return a}(t,8);function a$(t){let e=BigInt(0),a=t.length,i=0,o=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;a>0;)a>=4?(a-=4,e+=BigInt(o.getUint32(a))<<BigInt(8*i),i+=4):a>=2?(a-=2,e+=BigInt(o.getUint16(a))<<BigInt(8*i),i+=2):(a-=1,e+=BigInt(o.getUint8(a))<<BigInt(8*i),i+=1);return e}function aD(t,e){let a=t,i=new Uint8Array(e),o=new DataView(i.buffer),l=e;for(;l>0;)l-4>=0?(l-=4,o.setUint32(l,Number(a&BigInt(0xffffffff))),a>>=BigInt(32)):l-2>=0?(l-=2,o.setUint16(l,Number(a&BigInt(65535))),a>>=BigInt(16)):(l-=1,o.setUint8(l,Number(a&BigInt(255))),a>>=BigInt(8));if(a)throw Error("Number does not fit in this length");return i}function aW(t){let e=BigInt(0),a=0,i=new DataView(t.buffer,t.byteOffset,t.byteLength);for(;a<t.length;)a+4<=t.length?(e+=BigInt(i.getUint32(a,!0))<<BigInt(8*a),a+=4):a+2<=t.length?(e+=BigInt(i.getUint16(a,!0))<<BigInt(8*a),a+=2):(e+=BigInt(i.getUint8(a,!0))<<BigInt(8*a),a+=1);return e}function aZ(t,e){let a=t;void 0===e&&0==(e=Math.floor((aa(t)-1)/8)+1)&&(e=1);let i=new Uint8Array(e),o=new DataView(i.buffer),l=0;for(;l<e;)l+4<=e?(o.setUint32(l,Number(a&BigInt(0xffffffff)),!0),l+=4,a>>=BigInt(32)):l+2<=e?(o.setUint16(l,Number(a&BigInt(65535)),!0),l+=2,a>>=BigInt(16)):(o.setUint8(l,Number(a&BigInt(255)),!0),l+=1,a>>=BigInt(8));if(a)throw Error("Number does not fit in this length");return i}let aV=[];for(let t=0;t<256;t++)aV[t]=function(t,e){let a=0,i=t;for(let t=0;t<8;t++)a<<=1,a|=1&i,i>>=1;return a}(t,8);function aJ(t,e){return(aV[t>>>24]|aV[t>>>16&255]<<8|aV[t>>>8&255]<<16|aV[255&t]<<24)>>>32-e}function aQ(t){return((0xffff0000&t)!=0?(t&=0xffff0000,16):0)|((0xff00ff00&t)!=0?(t&=0xff00ff00,8):0)|((0xf0f0f0f0&t)!=0?(t&=0xf0f0f0f0,4):0)|((0xcccccccc&t)!=0?(t&=0xcccccccc,2):0)|(0xaaaaaaaa&t)!=0}function aH(t,e){let a=t.byteLength/e,i=aQ(a);if(a!=1<<i)throw Error("Invalid number of pointers");for(let o=0;o<a;o++){let a=aJ(o,i);if(o>a){let i=t.slice(o*e,(o+1)*e);t.set(t.slice(a*e,(a+1)*e),o*e),t.set(i,a*e)}}}function aK(t,e){let a=new Uint8Array(e*t.length);for(let i=0;i<t.length;i++)a.set(t[i],i*e);return a}function aX(t,e){let a=t.byteLength/e,i=Array(a);for(let o=0;o<a;o++)i[o]=t.slice(o*e,o*e+e);return i}t.s(["array2buffer",()=>aK,"beBuff2int",()=>a$,"beInt2Buff",()=>aD,"bitReverse",()=>aJ,"buffReverseBits",()=>aH,"buffer2array",()=>aX,"leBuff2int",()=>aW,"leInt2Buff",()=>aZ,"log2",()=>aQ,"stringifyBigInts",()=>function t(e){if("bigint"==typeof e||void 0!==e.eq)return e.toString(10);if(e instanceof Uint8Array)return aT(e,0);if(Array.isArray(e))return e.map(t);{if("object"!=typeof e)return e;let a={};return Object.keys(e).forEach(i=>{a[i]=t(e[i])}),a}},"stringifyFElements",()=>function t(e,a){if("bigint"==typeof a||void 0!==a.eq)return a.toString(10);if(a instanceof Uint8Array)return e.toString(e.e(a));if(Array.isArray(a))return a.map(t.bind(this,e));{if("object"!=typeof a)return a;let i={};return Object.keys(a).forEach(o=>{i[o]=t(e,a[o])}),i}},"unstringifyBigInts",()=>function t(e){if("string"==typeof e&&/^[0-9]+$/.test(e)||"string"==typeof e&&/^0x[0-9a-fA-F]+$/.test(e))return BigInt(e);if(Array.isArray(e))return e.map(t);{if("object"!=typeof e)return e;if(null===e)return null;let a={};return Object.keys(e).forEach(i=>{a[i]=t(e[i])}),a}},"unstringifyFElements",()=>function t(e,a){if("string"==typeof a&&/^[0-9]+$/.test(a)||"string"==typeof a&&/^0x[0-9a-fA-F]+$/.test(a))return e.e(a);if(Array.isArray(a))return a.map(t.bind(this,e));{if("object"!=typeof a)return a;if(null===a)return null;let i={};return Object.keys(a).forEach(o=>{i[o]=t(e,a[o])}),i}}],29599);let aY=`(${(function(t){let e,a;async function i(t){let i=new Uint8Array(t.code),o=await WebAssembly.compile(i);a=new WebAssembly.Memory({initial:t.init,maximum:32767}),e=await WebAssembly.instantiate(o,{env:{memory:a}})}function o(t){let e=new Uint32Array(a.buffer,0,1);for(;3&e[0];)e[0]++;let i=e[0];if(e[0]+=t,e[0]+t>a.buffer.byteLength){let i=a.buffer.byteLength/65536,o=Math.floor((e[0]+t)/65536)+1;o>32767&&(o=32767),a.grow(o-i)}return i}function l(t,e){new Uint8Array(a.buffer).set(new Uint8Array(e),t)}function n(t){if("INIT"==t[0].cmd)return i(t[0]);let n=[],c=[],r=new Uint32Array(a.buffer,0,1)[0];for(let i=0;i<t.length;i++)switch(t[i].cmd){case"ALLOCSET":n[t[i].var]=function(t){let e=o(t.byteLength);return l(e,t),e}(t[i].buff);break;case"ALLOC":n[t[i].var]=o(t[i].len);break;case"SET":l(n[t[i].var],t[i].buff);break;case"CALL":{let a=[];for(let e=0;e<t[i].params.length;e++){let o=t[i].params[e];void 0!==o.var?a.push(n[o.var]+(o.offset||0)):void 0!==o.val&&a.push(o.val)}e.exports[t[i].fnName](...a);break}case"GET":c[t[i].out]=(function(t,e){let i=new Uint8Array(a.buffer);return new Uint8Array(i.buffer,i.byteOffset+t,e)})(n[t[i].var],t[i].len).slice();break;default:throw Error("Invalid cmd")}return new Uint32Array(a.buffer,0,1)[0]=r,c}return t&&(t.onmessage=function(e){let a;if("INIT"==(a=e.data?e.data:e)[0].cmd)i(a[0]).then(function(){t.postMessage(a.result)});else if("TERMINATE"==a[0].cmd)t.close();else{let e=n(a);t.postMessage(e)}}),n}).toString()})(self)`;Buffer.from(aY).toString("base64"),globalThis.curve_bn128=null,globalThis.curve_bls12381=null,t.i(29599),at("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),at("21888242871839275222246405745257275088548364400416034343698204186575808495617"),at("1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab",16),at("21888242871839275222246405745257275088696311157297823662689037894645226208583");ts.e("73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001",16),ts.e("21888242871839275222246405745257275088548364400416034343698204186575808495617");let{unstringifyBigInts:a2}=ee,{stringifyBigInts:a3}=ee;t.i(68365);let{unstringifyBigInts:a0,stringifyBigInts:a1}=ee,a4=BigInt(0),a6=BigInt(1),a8=BigInt(2),a7=BigInt(7),a5=BigInt(256),a9=BigInt(113),it=[],ie=[],ia=[];for(let t=0,e=a6,a=1,i=0;t<24;t++){[a,i]=[i,(2*a+3*i)%5],it.push(2*(5*i+a)),ie.push((t+1)*(t+2)/2%64);let o=a4;for(let t=0;t<7;t++)(e=(e<<a6^(e>>a7)*a9)%a5)&a8&&(o^=a6<<(a6<<BigInt(t))-a6);ia.push(o)}let ii=function(t,e=!1){let a=t.length,i=new Uint32Array(a),o=new Uint32Array(a);for(let l=0;l<a;l++){let{h:a,l:n}=ez(t[l],e);[i[l],o[l]]=[a,n]}return[i,o]}(ia,!0),io=ii[0],il=ii[1],{stringifyBigInts:ic}=ee,{unstringifyBigInts:ir}=ee,{unstringifyBigInts:is}=ee,{unstringifyBigInts:id}=ee,{stringifyBigInts:i_}=ee,{unstringifyBigInts:iu}=ee,{unstringifyBigInts:ig}=ee,{unstringifyBigInts:ip}=ee;t.i(8076),t.s(["exportSolidityCallData",()=>e5,"fullProve",()=>e1,"prove",()=>eZ,"verify",()=>e6],77994);var ih=t.i(77994),ih=ih,iL=t.i(24868),im=t.i(14747);let ib=null;async function ix(){if(ib)return ib;let t=im.default.join(process.cwd(),"public","zk","verification_key.json");return ib=JSON.parse(await (0,iL.readFile)(t,"utf-8"))}async function iy(t){try{let{proof:e,publicSignals:a}=await t.json();if(!e||!Array.isArray(a))return b.NextResponse.json({verified:!1,error:"Missing proof or publicSignals"},{status:400});let i=await ix(),o=await ih.verify(i,a,e)&&"1"===a[0];return b.NextResponse.json({verified:o})}catch(e){let t=e instanceof Error?e.message:String(e);return b.NextResponse.json({verified:!1,error:t},{status:500})}}t.s(["POST",()=>iy,"runtime",0,"nodejs"],92646);var iF=t.i(92646);let iw=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/validate/route",pathname:"/api/validate",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/packages/web/app/api/validate/route.ts",nextConfigOutput:"",userland:iF}),{workAsyncStorage:iB,workUnitAsyncStorage:iC,serverHooks:iv}=iw;function iA(){return(0,o.patchFetch)({workAsyncStorage:iB,workUnitAsyncStorage:iC})}async function iI(t,e,a){iw.isDev&&(0,l.addRequestMeta)(t,"devRequestTimingInternalsEnd",process.hrtime.bigint());let o="/api/validate/route";o=o.replace(/\/index$/,"")||"/";let b=await iw.prepare(t,e,{srcPage:o,multiZoneDraftMode:!1});if(!b)return e.statusCode=400,e.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:x,params:y,nextConfig:F,parsedUrl:w,isDraftMode:B,prerenderManifest:C,routerServerContext:v,isOnDemandRevalidate:A,revalidateOnlyGenerated:I,resolvedPathname:E,clientReferenceManifest:P,serverActionsManifest:O}=b,S=(0,r.normalizeAppPath)(o),q=!!(C.dynamicRoutes[S]||C.routes[E]),z=async()=>((null==v?void 0:v.render404)?await v.render404(t,e,w,!1):e.end("This page could not be found"),null);if(q&&!B){let t=!!C.routes[E],e=C.dynamicRoutes[S];if(e&&!1===e.fallback&&!t){if(F.experimental.adapterPath)return await z();throw new L.NoFallbackError}}let M=null;!q||iw.isDev||B||(M="/index"===(M=E)?"/":M);let T=!0===iw.isDev||!q,R=q&&!T;O&&P&&(0,c.setManifestsSingleton)({page:o,clientReferenceManifest:P,serverActionsManifest:O});let U=t.method||"GET",N=(0,n.getTracer)(),k=N.getActiveScopeSpan(),j={params:y,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!F.experimental.authInterrupts},cacheComponents:!!F.cacheComponents,supportsDynamicResponse:T,incrementalCache:(0,l.getRequestMeta)(t,"incrementalCache"),cacheLifeProfiles:F.cacheLife,waitUntil:a.waitUntil,onClose:t=>{e.on("close",t)},onAfterTaskError:void 0,onInstrumentationRequestError:(e,a,i,o)=>iw.onRequestError(t,e,i,o,v)},sharedContext:{buildId:x}},G=new s.NodeNextRequest(t),$=new s.NodeNextResponse(e),D=d.NextRequestAdapter.fromNodeNextRequest(G,(0,d.signalFromNodeResponse)(e));try{let c=async t=>iw.handle(D,j).finally(()=>{if(!t)return;t.setAttributes({"http.status_code":e.statusCode,"next.rsc":!1});let a=N.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==_.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=a.get("next.route");if(i){let e=`${U} ${i}`;t.setAttributes({"next.route":i,"http.route":i,"next.span_name":e}),t.updateName(e)}else t.updateName(`${U} ${o}`)}),r=!!(0,l.getRequestMeta)(t,"minimalMode"),s=async l=>{var n,s;let d=async({previousCacheEntry:i})=>{try{if(!r&&A&&I&&!i)return e.statusCode=404,e.setHeader("x-nextjs-cache","REVALIDATED"),e.end("This page could not be found"),null;let o=await c(l);t.fetchMetrics=j.renderOpts.fetchMetrics;let n=j.renderOpts.pendingWaitUntil;n&&a.waitUntil&&(a.waitUntil(n),n=void 0);let s=j.renderOpts.collectedTags;if(!q)return await (0,u.sendResponse)(G,$,o,j.renderOpts.pendingWaitUntil),null;{let t=await o.blob(),e=(0,g.toNodeOutgoingHttpHeaders)(o.headers);s&&(e[h.NEXT_CACHE_TAGS_HEADER]=s),!e["content-type"]&&t.type&&(e["content-type"]=t.type);let a=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,i=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:m.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await t.arrayBuffer()),headers:e},cacheControl:{revalidate:a,expire:i}}}}catch(e){throw(null==i?void 0:i.isStale)&&await iw.onRequestError(t,e,{routerKind:"App Router",routePath:o,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isStaticGeneration:R,isOnDemandRevalidate:A})},!1,v),e}},_=await iw.handleResponse({req:t,nextConfig:F,cacheKey:M,routeKind:i.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:I,responseGenerator:d,waitUntil:a.waitUntil,isMinimalMode:r});if(!q)return null;if((null==_||null==(n=_.value)?void 0:n.kind)!==m.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==_||null==(s=_.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});r||e.setHeader("x-nextjs-cache",A?"REVALIDATED":_.isMiss?"MISS":_.isStale?"STALE":"HIT"),B&&e.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let L=(0,g.fromNodeOutgoingHttpHeaders)(_.value.headers);return r&&q||L.delete(h.NEXT_CACHE_TAGS_HEADER),!_.cacheControl||e.getHeader("Cache-Control")||L.get("Cache-Control")||L.set("Cache-Control",(0,p.getCacheControlHeader)(_.cacheControl)),await (0,u.sendResponse)(G,$,new Response(_.value.body,{headers:L,status:_.value.status||200})),null};k?await s(k):await N.withPropagatedContext(t.headers,()=>N.trace(_.BaseServerSpan.handleRequest,{spanName:`${U} ${o}`,kind:n.SpanKind.SERVER,attributes:{"http.method":U,"http.target":t.url}},s))}catch(e){if(e instanceof L.NoFallbackError||await iw.onRequestError(t,e,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isStaticGeneration:R,isOnDemandRevalidate:A})},!1,v),q)throw e;return await (0,u.sendResponse)(G,$,new Response(null,{status:500})),null}}t.s(["handler",()=>iI,"patchFetch",()=>iA,"routeModule",()=>iw,"serverHooks",()=>iv,"workAsyncStorage",()=>iB,"workUnitAsyncStorage",()=>iC],74869)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3b9a1222._.js.map