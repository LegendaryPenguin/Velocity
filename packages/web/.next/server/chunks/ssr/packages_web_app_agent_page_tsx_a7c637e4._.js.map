{"version":3,"sources":["../../../../../../packages/web/app/agent/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\n\nfunction isValidAddress(value: string): boolean {\n  return /^0x[a-fA-F0-9]{40}$/.test(value.trim());\n}\n\ntype AgentStatus = {\n  ok: boolean;\n  tokenId?: string;\n  verified?: boolean;\n  encryptedURI?: string;\n  metadataHash?: string;\n  cooldownRemainingSec?: number;\n  error?: string;\n};\n\nexport default function AgentPage() {\n  const [wallet, setWallet] = useState(\"\");\n  const [status, setStatus] = useState<AgentStatus | null>(null);\n\n  const validWallet = useMemo(() => isValidAddress(wallet), [wallet]);\n\n  const loadStatus = async () => {\n    if (!validWallet) return;\n    const res = await fetch(`/api/agent-status?wallet=${encodeURIComponent(wallet.trim())}`);\n    const data = (await res.json()) as AgentStatus;\n    setStatus(data);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <section className=\"glass rounded-2xl p-6\">\n        <h1 className=\"text-2xl font-semibold\">Agent Console</h1>\n        <p className=\"mt-1 text-sm text-white/65\">View token identity, status, expiry context and action controls.</p>\n        <div className=\"mt-4 flex flex-wrap gap-3\">\n          <input\n            placeholder=\"Wallet 0x...\"\n            value={wallet}\n            onChange={(e) => setWallet(e.target.value)}\n            className=\"min-w-[320px] flex-1 rounded-lg border border-white/20 bg-black/20 px-3 py-2 text-sm\"\n          />\n          <button\n            onClick={loadStatus}\n            disabled={!validWallet}\n            className=\"rounded-lg bg-indigo-500 px-4 py-2 text-sm font-semibold disabled:cursor-not-allowed disabled:opacity-50\"\n          >\n            Refresh Status\n          </button>\n        </div>\n      </section>\n\n      <section className=\"glass rounded-2xl p-6 text-sm\">\n        {!status && <p className=\"text-white/60\">No agent status loaded yet.</p>}\n        {status?.ok && (\n          <div className=\"space-y-2\">\n            <p>Token ID: {status.tokenId}</p>\n            <p>Status: {status.verified ? \"Agent Active\" : \"Not Verified\"}</p>\n            <p>Expires: policy-driven (from metadata payload)</p>\n            <p>Encrypted URI: {status.encryptedURI}</p>\n            <p>Metadata Hash: {status.metadataHash}</p>\n            <p>Cooldown remaining: {status.cooldownRemainingSec}s</p>\n          </div>\n        )}\n        {status && !status.ok && <p className=\"text-rose-300\">Error: {status.error}</p>}\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAgBe,SAAS,IACtB,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAEnD,EAAc,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,AAjB3B,sBAAsB,IAAI,CAAC,AAiBe,EAjBT,IAAI,IAiBc,CAAC,EAAO,EAE5D,EAAa,UACjB,GAAI,CAAC,EAAa,OAClB,IAAM,EAAM,MAAM,MAAM,CAAC,yBAAyB,EAAE,mBAAmB,EAAO,IAAI,IAAA,CAAK,EAEvF,EADc,MAAM,EAAI,AACd,IADkB,GAE9B,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,kBACvC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,qEAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAY,eACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,EACzC,UAAU,yFAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,CAAC,EACX,UAAU,oHACX,yBAML,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,0CAChB,CAAC,GAAU,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,gCACxC,GAAQ,IACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,aAAW,EAAO,OAAO,IAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,WAAS,EAAO,QAAQ,CAAG,eAAiB,kBAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,mDACH,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,kBAAgB,EAAO,YAAY,IACtC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,kBAAgB,EAAO,YAAY,IACtC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,uBAAqB,EAAO,oBAAoB,CAAC,UAGvD,GAAU,CAAC,EAAO,EAAE,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0BAAgB,UAAQ,EAAO,KAAK,SAIlF"}