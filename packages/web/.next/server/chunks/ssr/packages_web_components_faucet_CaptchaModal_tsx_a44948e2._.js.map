{"version":3,"sources":["../../../../../../packages/web/components/faucet/CaptchaModal.tsx","../../../../../../packages/web/components/faucet/PatternIcon.tsx","../../../../../../packages/web/hooks/useReducedMotionPref.ts","../../../../../../packages/web/lib/captchaModel.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport { PatternIcon } from \"@/components/faucet/PatternIcon\";\nimport { useReducedMotionPref } from \"@/hooks/useReducedMotionPref\";\nimport {\n  BOT_STEP_INTERVAL_MS,\n  ExportedJson,\n  Features,\n  generateBotPath,\n  generatePuzzle,\n  INITIAL_SEED,\n  MouseSample,\n  Puzzle,\n  runModel,\n  computeFeatures,\n  toExportJson,\n  ZERO_FEATURES,\n} from \"@/lib/captchaModel\";\n\ntype Props = {\n  isOpen: boolean;\n  onClose: () => void;\n  onVerifiedHuman: (payload: ExportedJson, score: number) => void;\n};\n\nexport function CaptchaModal({ isOpen, onClose, onVerifiedHuman }: Props) {\n  const reducedMotion = useReducedMotionPref();\n  const [puzzle, setPuzzle] = useState<Puzzle>(() => generatePuzzle(INITIAL_SEED));\n  const [selected, setSelected] = useState<Set<number>>(new Set());\n  const [simulateBot, setSimulateBot] = useState(false);\n  const [features, setFeatures] = useState<Features>(ZERO_FEATURES);\n  const [modelScore, setModelScore] = useState(0);\n  const [modelLabel, setModelLabel] = useState<\"HUMAN\" | \"BOT\">(\"BOT\");\n  const [solved, setSolved] = useState(false);\n  const [verified, setVerified] = useState(false);\n  const [incorrectTiles, setIncorrectTiles] = useState<Set<number>>(new Set());\n  const [missedTiles, setMissedTiles] = useState<Set<number>>(new Set());\n  const [verifyLoading, setVerifyLoading] = useState(false);\n\n  const [botCursorPos, setBotCursorPos] = useState<{ x: number; y: number } | null>(null);\n  const [botCursorVisible, setBotCursorVisible] = useState(false);\n\n  const clickTsRef = useRef<number[]>([]);\n  const uniqueTilesRef = useRef<Set<number>>(new Set());\n  const verifyAttRef = useRef(0);\n  const mistakesRef = useRef(0);\n  const blurCountRef = useRef(0);\n  const resetCountRef = useRef(0);\n  const startTimeRef = useRef<number | null>(null);\n  const activeRef = useRef(false);\n  const botTimersRef = useRef<ReturnType<typeof setTimeout>[]>([]);\n  const botRafRef = useRef<number[]>([]);\n  const mousePathRef = useRef<MouseSample[]>([]);\n  const clickPosRef = useRef<{ x: number; y: number; tileCenterX: number; tileCenterY: number }[]>([]);\n  const pausesRef = useRef<number[]>([]);\n  const lastMoveRef = useRef<number | null>(null);\n  const gridRef = useRef<HTMLDivElement>(null);\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const tileClickRef = useRef<(index: number, cx?: number, cy?: number) => void>(() => {});\n  const verifyRef = useRef<() => void>(() => {});\n\n  const clearBotTimers = () => {\n    botTimersRef.current.forEach(clearTimeout);\n    botTimersRef.current = [];\n    botRafRef.current.forEach(cancelAnimationFrame);\n    botRafRef.current = [];\n  };\n\n  useEffect(() => () => clearBotTimers(), []);\n\n  const resetTelemetry = () => {\n    clickTsRef.current = [];\n    uniqueTilesRef.current = new Set();\n    verifyAttRef.current = 0;\n    mistakesRef.current = 0;\n    startTimeRef.current = null;\n    activeRef.current = false;\n    mousePathRef.current = [];\n    clickPosRef.current = [];\n    pausesRef.current = [];\n    lastMoveRef.current = null;\n  };\n\n  const refreshFeatures = useCallback((endTime: number | null) => {\n    const f = computeFeatures(\n      clickTsRef.current,\n      uniqueTilesRef.current,\n      verifyAttRef.current,\n      mistakesRef.current,\n      blurCountRef.current,\n      resetCountRef.current,\n      startTimeRef.current,\n      endTime,\n      mousePathRef.current,\n      clickPosRef.current,\n      pausesRef.current,\n    );\n    const m = runModel(f);\n    setFeatures(f);\n    setModelScore(m.score);\n    setModelLabel(m.label);\n    return { features: f, model: m };\n  }, []);\n\n  const newPuzzle = useCallback(() => {\n    clearBotTimers();\n    setBotCursorVisible(false);\n    setBotCursorPos(null);\n    const seed = Date.now();\n    setPuzzle(generatePuzzle(seed));\n    setSelected(new Set());\n    setSolved(false);\n    setVerified(false);\n    setVerifyLoading(false);\n    setIncorrectTiles(new Set());\n    setMissedTiles(new Set());\n    resetCountRef.current += 1;\n    resetTelemetry();\n    refreshFeatures(null);\n  }, [refreshFeatures]);\n\n  useEffect(() => {\n    const onBlur = () => {\n      if (activeRef.current) blurCountRef.current += 1;\n    };\n    window.addEventListener(\"blur\", onBlur);\n    window.addEventListener(\"focus\", onBlur);\n    return () => {\n      window.removeEventListener(\"blur\", onBlur);\n      window.removeEventListener(\"focus\", onBlur);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    newPuzzle();\n    const t = setTimeout(() => dialogRef.current?.focus(), 40);\n    return () => clearTimeout(t);\n  }, [isOpen, newPuzzle]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && !simulateBot) onClose();\n      if (e.key !== \"Tab\") return;\n      const root = dialogRef.current;\n      if (!root) return;\n      const focusables = Array.from(\n        root.querySelectorAll<HTMLElement>(\"button,input,[tabindex]:not([tabindex='-1'])\"),\n      ).filter((el) => !el.hasAttribute(\"disabled\"));\n      if (focusables.length === 0) return;\n      const first = focusables[0];\n      const last = focusables[focusables.length - 1];\n      if (!e.shiftKey && document.activeElement === last) {\n        e.preventDefault();\n        first.focus();\n      } else if (e.shiftKey && document.activeElement === first) {\n        e.preventDefault();\n        last.focus();\n      }\n    };\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, [isOpen, onClose, simulateBot]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    const grid = gridRef.current;\n    if (!grid || simulateBot) return;\n    const onMove = (e: MouseEvent) => {\n      if (!activeRef.current && startTimeRef.current === null) return;\n      const now = performance.now();\n      const r = grid.getBoundingClientRect();\n      mousePathRef.current.push({ x: e.clientX - r.left, y: e.clientY - r.top, t: now });\n      lastMoveRef.current = now;\n    };\n    grid.addEventListener(\"mousemove\", onMove);\n    return () => grid.removeEventListener(\"mousemove\", onMove);\n  }, [simulateBot, isOpen]);\n\n  const getTileCenter = useCallback((idx: number) => {\n    const grid = gridRef.current;\n    if (!grid) return null;\n    const tile = grid.children[idx] as HTMLElement | undefined;\n    if (!tile) return null;\n    const gr = grid.getBoundingClientRect();\n    const tr = tile.getBoundingClientRect();\n    return { x: tr.left - gr.left + tr.width / 2, y: tr.top - gr.top + tr.height / 2 };\n  }, []);\n\n  const handleTileClick = useCallback(\n    (index: number, cx?: number, cy?: number) => {\n      if (solved && verified) return;\n      if (incorrectTiles.size > 0 || missedTiles.size > 0) {\n        setIncorrectTiles(new Set());\n        setMissedTiles(new Set());\n      }\n      const now = performance.now();\n      if (startTimeRef.current === null) {\n        startTimeRef.current = now;\n        activeRef.current = true;\n      }\n      clickTsRef.current.push(now);\n      uniqueTilesRef.current.add(index);\n\n      if (lastMoveRef.current !== null) pausesRef.current.push(now - lastMoveRef.current);\n\n      const center = getTileCenter(index);\n      if (center && cx !== undefined && cy !== undefined) {\n        clickPosRef.current.push({ x: cx, y: cy, tileCenterX: center.x, tileCenterY: center.y });\n      } else if (center) {\n        const off = 5 + Math.random() * 15;\n        const ang = Math.random() * Math.PI * 2;\n        clickPosRef.current.push({\n          x: center.x + Math.cos(ang) * off,\n          y: center.y + Math.sin(ang) * off,\n          tileCenterX: center.x,\n          tileCenterY: center.y,\n        });\n      }\n      setSelected((prev) => {\n        const next = new Set(prev);\n        if (next.has(index)) next.delete(index);\n        else next.add(index);\n        return next;\n      });\n      refreshFeatures(now);\n    },\n    [solved, verified, incorrectTiles, missedTiles, getTileCenter, refreshFeatures],\n  );\n\n  const handleHumanTileClick = useCallback(\n    (idx: number, e: React.MouseEvent) => {\n      const grid = gridRef.current;\n      if (!grid) return handleTileClick(idx);\n      const r = grid.getBoundingClientRect();\n      handleTileClick(idx, e.clientX - r.left, e.clientY - r.top);\n    },\n    [handleTileClick],\n  );\n\n  const handleVerify = useCallback(() => {\n    if (solved && verified) return;\n    setVerifyLoading(true);\n    const timer = setTimeout(() => {\n      const now = performance.now();\n      verifyAttRef.current += 1;\n      const fp = new Set([...selected].filter((i) => !puzzle.targetIndices.has(i)));\n      const fn = new Set([...puzzle.targetIndices].filter((i) => !selected.has(i)));\n      mistakesRef.current += fp.size + fn.size;\n      const correct = fp.size === 0 && fn.size === 0;\n      if (!correct && !simulateBot) {\n        setIncorrectTiles(fp);\n        setMissedTiles(fn);\n        refreshFeatures(now);\n        setVerifyLoading(false);\n        return;\n      }\n\n      setIncorrectTiles(new Set());\n      setMissedTiles(new Set());\n      setSolved(true);\n      setVerified(true);\n      const { features: f, model } = refreshFeatures(now);\n      if (simulateBot) {\n        setModelLabel(\"BOT\");\n      } else {\n        setModelLabel(\"HUMAN\");\n        onVerifiedHuman(toExportJson(model.score), model.score);\n      }\n      setFeatures(f);\n      setModelScore(model.score);\n      setVerifyLoading(false);\n    }, 450);\n    botTimersRef.current.push(timer);\n  }, [solved, verified, selected, puzzle, simulateBot, onVerifiedHuman, refreshFeatures]);\n\n  useEffect(() => {\n    tileClickRef.current = handleTileClick;\n    verifyRef.current = handleVerify;\n  }, [handleTileClick, handleVerify]);\n\n  const startBotSim = useCallback(() => {\n    clearBotTimers();\n    const seed = Date.now();\n    const p = generatePuzzle(seed);\n    setPuzzle(p);\n    setSelected(new Set());\n    setSolved(false);\n    setVerified(false);\n    resetTelemetry();\n    resetCountRef.current = 0;\n    refreshFeatures(null);\n\n    const targets = [...p.targetIndices];\n    const schedule = setTimeout(() => {\n      setBotCursorVisible(true);\n      const g = gridRef.current;\n      if (!g) return;\n      const gr = g.getBoundingClientRect();\n      const center = (idx: number) => {\n        const el = g.children[idx] as HTMLElement | undefined;\n        if (!el) return { x: gr.width / 2, y: gr.height / 2 };\n        const r = el.getBoundingClientRect();\n        return { x: r.left - gr.left + r.width / 2, y: r.top - gr.top + r.height / 2 };\n      };\n\n      let cx = gr.width / 2;\n      let cy = -20;\n      let totalDelay = 0;\n      startTimeRef.current = performance.now();\n      activeRef.current = true;\n\n      targets.forEach((tileIdx) => {\n        const moveDuration = 220 + Math.random() * 60;\n        const pauseBefore = 30 + Math.random() * 30;\n        const stepStart = totalDelay;\n        const fromX = cx;\n        const fromY = cy;\n        const tm = setTimeout(() => {\n          const tgt = center(tileIdx);\n          const path = generateBotPath(fromX, fromY, tgt.x, tgt.y, moveDuration);\n          const animStart = performance.now();\n          path.forEach((s) => mousePathRef.current.push({ x: s.x, y: s.y, t: animStart + s.t }));\n          const totalPathTime = path[path.length - 1].t;\n          const animate = () => {\n            const elapsed = performance.now() - animStart;\n            if (elapsed >= totalPathTime) {\n              setBotCursorPos({ x: path[path.length - 1].x, y: path[path.length - 1].y });\n              return;\n            }\n            const frac = elapsed / totalPathTime;\n            const idx = Math.min(Math.floor(frac * path.length), path.length - 1);\n            setBotCursorPos({ x: path[idx].x, y: path[idx].y });\n            botRafRef.current.push(requestAnimationFrame(animate));\n          };\n          botRafRef.current.push(requestAnimationFrame(animate));\n          const clickTm = setTimeout(() => {\n            const c = center(tileIdx);\n            const clx = c.x + (Math.random() - 0.5) * 1.5;\n            const cly = c.y + (Math.random() - 0.5) * 1.5;\n            setBotCursorPos({ x: clx, y: cly });\n            lastMoveRef.current = performance.now() - pauseBefore;\n            tileClickRef.current(tileIdx, clx, cly);\n          }, moveDuration + pauseBefore);\n          botTimersRef.current.push(clickTm);\n        }, 300 + stepStart);\n        botTimersRef.current.push(tm);\n        const tgt = center(tileIdx);\n        cx = tgt.x;\n        cy = tgt.y;\n        totalDelay += moveDuration + pauseBefore + BOT_STEP_INTERVAL_MS;\n      });\n\n      const verifyTm = setTimeout(() => {\n        setBotCursorVisible(false);\n        verifyRef.current();\n      }, 300 + totalDelay + 220);\n      botTimersRef.current.push(verifyTm);\n    }, 120);\n    botTimersRef.current.push(schedule);\n  }, [refreshFeatures]);\n\n  const handleBotToggle = useCallback(\n    (next: boolean) => {\n      setSimulateBot(next);\n      if (next) startBotSim();\n      else {\n        clearBotTimers();\n        setBotCursorVisible(false);\n        setBotCursorPos(null);\n        newPuzzle();\n      }\n    },\n    [newPuzzle, startBotSim],\n  );\n\n  const modalTone = useMemo(() => {\n    if (incorrectTiles.size > 0 || missedTiles.size > 0) return \"bg-red-500/80\";\n    if (verified && solved) return modelLabel === \"HUMAN\" ? \"bg-emerald-500/80\" : \"bg-red-500/80\";\n    return \"bg-purple-600/65\";\n  }, [incorrectTiles, missedTiles, verified, solved, modelLabel]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className={`fixed inset-0 z-50 flex items-center justify-center bg-black/62 ${\n        reducedMotion ? \"\" : \"animate-[fadeIn_0.3s_ease-out]\"\n      }`}\n      onClick={(e) => {\n        if (e.target === e.currentTarget && !simulateBot) onClose();\n      }}\n    >\n      <div\n        ref={dialogRef}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabIndex={-1}\n        className={`relative mx-4 w-[92vw] max-w-[420px] overflow-hidden rounded-2xl border border-white/12 bg-[#1e1033] shadow-2xl outline-none ${\n          reducedMotion ? \"\" : \"animate-[zoomIn_0.3s_ease-out]\"\n        }`}\n      >\n        {!simulateBot && (\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"absolute right-3 top-3 z-10 flex h-8 w-8 items-center justify-center rounded-full text-white/50 transition hover:bg-white/10 hover:text-white\"\n          >\n            <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}>\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        )}\n\n        <div className={`px-5 pb-4 pt-5 transition-colors duration-300 ${modalTone}`}>\n          <p className=\"mb-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-white/70\">\n            Step 1: Prove humanity\n          </p>\n          {incorrectTiles.size > 0 || missedTiles.size > 0 ? (\n            <>\n              <h2 className=\"text-xl font-bold text-white\">Try Again</h2>\n              <p className=\"mt-1 text-[13px] text-white/80\">Adjust your selection and verify again.</p>\n            </>\n          ) : verified && solved ? (\n            <>\n              <h2 className=\"text-xl font-bold text-white\">\n                {modelLabel === \"HUMAN\" ? \"Access Granted\" : \"Classified as Bot\"}\n              </h2>\n              <p className=\"mt-1 text-[13px] text-white/80\">\n                {modelLabel === \"HUMAN\"\n                  ? `Behavioral score ${modelScore} accepted.`\n                  : \"Behavior did not meet the human threshold.\"}\n              </p>\n            </>\n          ) : (\n            <>\n              <p className=\"text-[13px] text-white/65\">Select all squares with</p>\n              <h2 className=\"mt-0.5 text-2xl font-bold capitalize text-white\">{puzzle.target}s</h2>\n              <p className=\"mt-1 text-[13px] text-white/55\">If there are none, click skip</p>\n            </>\n          )}\n        </div>\n\n        <div className=\"relative max-h-[54vh] overflow-y-auto\">\n          <div ref={gridRef} className=\"grid grid-cols-4 gap-[2px] bg-white/6 p-[2px]\">\n            {puzzle.tiles.map((pattern, i) => {\n              const isSel = selected.has(i);\n              const isWrong = incorrectTiles.has(i);\n              const isMissed = missedTiles.has(i);\n              const hasErr = isWrong || isMissed;\n              return (\n                <button\n                  key={i}\n                  type=\"button\"\n                  disabled={simulateBot}\n                  onClick={(e) => handleHumanTileClick(i, e)}\n                  className={`relative flex aspect-square min-h-11 items-center justify-center transition-all duration-150 ${\n                    hasErr\n                      ? \"bg-red-500/20 ring-2 ring-inset ring-red-400\"\n                      : isSel\n                        ? \"scale-[0.92] bg-purple-500/20 ring-[3px] ring-inset ring-purple-400\"\n                        : \"bg-white/6 hover:bg-white/14\"\n                  } ${simulateBot ? \"cursor-not-allowed\" : \"cursor-pointer active:scale-95\"}`}\n                >\n                  <div className=\"flex h-full w-full items-center justify-center p-2\">\n                    <PatternIcon type={pattern} />\n                  </div>\n                  {isSel && !hasErr && (\n                    <div className=\"absolute bottom-1 left-1 flex h-5 w-5 items-center justify-center rounded-full bg-purple-500 shadow\">\n                      <svg className=\"h-3 w-3 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3.5}>\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                    </div>\n                  )}\n                  {isWrong && (\n                    <div className=\"absolute bottom-1 left-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 shadow\">\n                      <svg className=\"h-3 w-3 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3.5}>\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n                      </svg>\n                    </div>\n                  )}\n                  {isMissed && (\n                    <div className=\"absolute bottom-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500/80 shadow\">\n                      <span className=\"text-[9px] font-bold text-white\">!</span>\n                    </div>\n                  )}\n                </button>\n              );\n            })}\n          </div>\n\n          {botCursorVisible && botCursorPos && (\n            <div\n              className=\"pointer-events-none absolute z-50\"\n              style={{\n                left: botCursorPos.x - 4,\n                top: botCursorPos.y - 4,\n                transition: \"left 0.016s linear, top 0.016s linear\",\n              }}\n            >\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path d=\"M3 3L10.5 21L13 13L21 10.5L3 3Z\" fill=\"#ef4444\" stroke=\"#991b1b\" strokeWidth=\"1.5\" strokeLinejoin=\"round\" />\n              </svg>\n              <span className=\"absolute -right-8 -top-1 rounded bg-red-600 px-1.5 py-0.5 text-[9px] font-bold text-white shadow\">\n                BOT\n              </span>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-center justify-between border-t border-white/12 bg-white/5 px-3 py-2.5\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              type=\"button\"\n              onClick={newPuzzle}\n              className=\"flex h-8 w-8 items-center justify-center rounded-full text-white/50 transition hover:bg-white/10 hover:text-white/80\"\n              title=\"New challenge\"\n            >\n              <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n            </button>\n            <label className=\"flex cursor-pointer items-center gap-1.5 text-[11px] font-medium text-white/65\">\n              <input\n                type=\"checkbox\"\n                className=\"h-3.5 w-3.5 rounded accent-purple-500\"\n                checked={simulateBot}\n                onChange={(e) => handleBotToggle(e.target.checked)}\n              />\n              Bot\n            </label>\n          </div>\n          <button\n            type=\"button\"\n            onClick={handleVerify}\n            disabled={simulateBot || verifyLoading}\n            className=\"btn-primary min-h-10 rounded-lg px-5 py-1.5 text-sm font-semibold\"\n          >\n            {verifyLoading ? \"Verifying...\" : \"Verify Access\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { PatternType } from \"@/lib/captchaModel\";\n\nexport function PatternIcon({ type }: { type: PatternType }) {\n  const s = 48;\n  const h = s / 2;\n  switch (type) {\n    case \"circle\":\n      return (\n        <svg viewBox={`0 0 ${s} ${s}`} className=\"h-full w-full drop-shadow-sm\">\n          <defs>\n            <radialGradient id=\"cg\" cx=\"40%\" cy=\"35%\">\n              <stop offset=\"0%\" stopColor=\"#c4b5fd\" />\n              <stop offset=\"100%\" stopColor=\"#7c3aed\" />\n            </radialGradient>\n          </defs>\n          <circle cx={h} cy={h} r={16} fill=\"url(#cg)\" />\n          <circle cx={h - 4} cy={h - 5} r={4} fill=\"white\" opacity={0.3} />\n        </svg>\n      );\n    case \"triangle\":\n      return (\n        <svg viewBox={`0 0 ${s} ${s}`} className=\"h-full w-full drop-shadow-sm\">\n          <defs>\n            <linearGradient id=\"tg\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n              <stop offset=\"0%\" stopColor=\"#f0abfc\" />\n              <stop offset=\"100%\" stopColor=\"#a855f7\" />\n            </linearGradient>\n          </defs>\n          <polygon points=\"24,6 42,42 6,42\" fill=\"url(#tg)\" />\n        </svg>\n      );\n    case \"plus\":\n      return (\n        <svg viewBox={`0 0 ${s} ${s}`} className=\"h-full w-full drop-shadow-sm\">\n          <defs>\n            <linearGradient id=\"pg\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"1\">\n              <stop offset=\"0%\" stopColor=\"#67e8f9\" />\n              <stop offset=\"100%\" stopColor=\"#06b6d4\" />\n            </linearGradient>\n          </defs>\n          <rect x={18} y={6} width={12} height={36} rx={3} fill=\"url(#pg)\" />\n          <rect x={6} y={18} width={36} height={12} rx={3} fill=\"url(#pg)\" />\n        </svg>\n      );\n    case \"waves\":\n      return (\n        <svg viewBox={`0 0 ${s} ${s}`} className=\"h-full w-full drop-shadow-sm\">\n          <path d=\"M6 16 Q14 8 24 16 Q34 24 42 16\" fill=\"none\" stroke=\"#c084fc\" strokeWidth={3.5} strokeLinecap=\"round\" />\n          <path d=\"M6 26 Q14 18 24 26 Q34 34 42 26\" fill=\"none\" stroke=\"#a855f7\" strokeWidth={3.5} strokeLinecap=\"round\" />\n          <path d=\"M6 36 Q14 28 24 36 Q34 44 42 36\" fill=\"none\" stroke=\"#7c3aed\" strokeWidth={3.5} strokeLinecap=\"round\" />\n        </svg>\n      );\n    case \"stripes\":\n      return (\n        <svg viewBox={`0 0 ${s} ${s}`} className=\"h-full w-full drop-shadow-sm\">\n          {[10, 18, 26, 34].map((y, i) => (\n            <rect key={y} x={6} y={y} width={36} height={4} rx={2} fill={i % 2 === 0 ? \"#e879f9\" : \"#c026d3\"} />\n          ))}\n        </svg>\n      );\n    case \"star\":\n      return (\n        <svg viewBox={`0 0 ${s} ${s}`} className=\"h-full w-full drop-shadow-sm\">\n          <defs>\n            <linearGradient id=\"sg\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n              <stop offset=\"0%\" stopColor=\"#fbbf24\" />\n              <stop offset=\"100%\" stopColor=\"#f59e0b\" />\n            </linearGradient>\n          </defs>\n          <polygon points=\"24,4 29,18 44,18 32,27 36,42 24,33 12,42 16,27 4,18 19,18\" fill=\"url(#sg)\" />\n        </svg>\n      );\n  }\n}\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nexport function useReducedMotionPref(): boolean {\n  const [reduced, setReduced] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    const update = () => setReduced(media.matches);\n    update();\n    media.addEventListener(\"change\", update);\n    return () => media.removeEventListener(\"change\", update);\n  }, []);\n\n  return reduced;\n}\n","export type PatternType = \"circle\" | \"triangle\" | \"plus\" | \"waves\" | \"stripes\" | \"star\";\n\nexport type FeatureName =\n  | \"time_ms\" | \"click_count\" | \"unique_tiles_clicked\" | \"verify_attempts\"\n  | \"mistakes\" | \"avg_click_delta_ms\" | \"std_click_delta_ms\" | \"hesitations\"\n  | \"blur_count\" | \"reset_count\" | \"path_len_px\" | \"avg_speed\" | \"speed_std\"\n  | \"avg_acceleration\" | \"acc_std\" | \"curvature\" | \"direction_changes\"\n  | \"click_precision_px\" | \"path_straightness\" | \"movement_efficiency\"\n  | \"micro_corrections\" | \"velocity_consistency\" | \"pause_before_click_ms\"\n  | \"angular_velocity_std\";\n\nexport type Features = Record<FeatureName, number>;\nexport type MouseSample = { x: number; y: number; t: number };\n\nexport type ExportedJson = {\n  score: number;\n};\n\nexport type Puzzle = {\n  seed: number;\n  id: string;\n  target: PatternType;\n  tiles: PatternType[];\n  targetIndices: Set<number>;\n};\n\nexport const PATTERN_TYPES: PatternType[] = [\"circle\", \"triangle\", \"plus\", \"waves\", \"stripes\", \"star\"];\nexport const GRID_SIZE = 4;\nexport const TILE_COUNT = GRID_SIZE * GRID_SIZE;\nexport const MIN_TARGETS = 4;\nexport const MAX_TARGETS = 7;\nexport const HESITATION_THRESHOLD_MS = 1200;\nexport const BOT_STEP_INTERVAL_MS = 180;\nexport const MOUSE_SAMPLE_INTERVAL_MS = 8;\nexport const INITIAL_SEED = 42;\n\nexport const FEATURE_ORDER: FeatureName[] = [\n  \"time_ms\", \"click_count\", \"unique_tiles_clicked\", \"verify_attempts\",\n  \"mistakes\", \"avg_click_delta_ms\", \"std_click_delta_ms\", \"hesitations\",\n  \"blur_count\", \"reset_count\", \"path_len_px\", \"avg_speed\", \"speed_std\",\n  \"avg_acceleration\", \"acc_std\", \"curvature\", \"direction_changes\",\n  \"click_precision_px\", \"path_straightness\", \"movement_efficiency\",\n  \"micro_corrections\", \"velocity_consistency\", \"pause_before_click_ms\",\n  \"angular_velocity_std\",\n];\n\nexport const WEIGHTS: number[] = [\n  0.3, -15, 60, -400, -80, 0.8, 2, 200, -500, -250,\n  0.05, 0, 0.5, 0, 0, 0, 12, -40, -5, 4,\n  40, -5, 1.5, 0,\n];\n\nexport const BIAS = -1500;\nexport const THRESHOLD = 0;\n\nexport const ZERO_FEATURES: Features = Object.fromEntries(FEATURE_ORDER.map((k) => [k, 0])) as Features;\n\nconst FEATURE_CLAMPS: Record<FeatureName, [number, number]> = {\n  time_ms: [0, 60000], click_count: [0, 500], unique_tiles_clicked: [0, 16],\n  verify_attempts: [0, 50], mistakes: [0, 500], avg_click_delta_ms: [0, 10000],\n  std_click_delta_ms: [0, 10000], hesitations: [0, 200], blur_count: [0, 100],\n  reset_count: [0, 200], path_len_px: [0, 100000], avg_speed: [0, 50000],\n  speed_std: [0, 50000], avg_acceleration: [0, 100000], acc_std: [0, 100000],\n  curvature: [0, 100000], direction_changes: [0, 5000], click_precision_px: [0, 200],\n  path_straightness: [0, 1000], movement_efficiency: [0, 1000],\n  micro_corrections: [0, 2000], velocity_consistency: [0, 1000],\n  pause_before_click_ms: [0, 10000], angular_velocity_std: [0, 50000],\n};\n\nfunction clampVal(v: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, v));\n}\n\nfunction ptDist(a: MouseSample, b: MouseSample) {\n  return Math.sqrt((b.x - a.x) ** 2 + (b.y - a.y) ** 2);\n}\n\nfunction angleBetween(a: MouseSample, b: MouseSample, c: MouseSample) {\n  const v1x = b.x - a.x;\n  const v1y = b.y - a.y;\n  const v2x = c.x - b.x;\n  const v2y = c.y - b.y;\n  return Math.abs(Math.atan2(v1x * v2y - v1y * v2x, v1x * v2x + v1y * v2y));\n}\n\nfunction mean(a: number[]) {\n  return a.length === 0 ? 0 : a.reduce((s, v) => s + v, 0) / a.length;\n}\n\nfunction stddev(a: number[]) {\n  if (a.length < 2) return 0;\n  const m = mean(a);\n  return Math.sqrt(a.reduce((s, v) => s + (v - m) ** 2, 0) / a.length);\n}\n\nfunction mulberry32(seed: number): () => number {\n  let s = seed | 0;\n  return () => {\n    s = (s + 0x6d2b79f5) | 0;\n    let t = Math.imul(s ^ (s >>> 15), 1 | s);\n    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;\n    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;\n  };\n}\n\nexport function generatePuzzle(seed: number): Puzzle {\n  const rng = mulberry32(seed);\n  const target = PATTERN_TYPES[Math.floor(rng() * PATTERN_TYPES.length)];\n  const targetCount = MIN_TARGETS + Math.floor(rng() * (MAX_TARGETS - MIN_TARGETS + 1));\n  const indices = Array.from({ length: TILE_COUNT }, (_, i) => i);\n  for (let i = indices.length - 1; i > 0; i--) {\n    const j = Math.floor(rng() * (i + 1));\n    [indices[i], indices[j]] = [indices[j], indices[i]];\n  }\n  const targetIndices = new Set(indices.slice(0, targetCount));\n  const distractors = PATTERN_TYPES.filter((p) => p !== target);\n  const tiles: PatternType[] = [];\n  for (let i = 0; i < TILE_COUNT; i++) {\n    tiles.push(targetIndices.has(i) ? target : distractors[Math.floor(rng() * distractors.length)]);\n  }\n  return { seed, id: `pzl_${seed.toString(16).padStart(8, \"0\")}`, target, tiles, targetIndices };\n}\n\nexport function computeFeatures(\n  clickTs: number[],\n  uniqueTiles: Set<number>,\n  verifyAttempts: number,\n  mistakes: number,\n  blurCount: number,\n  resetCount: number,\n  startTime: number | null,\n  endTime: number | null,\n  mousePath: MouseSample[],\n  clickPos: { x: number; y: number; tileCenterX: number; tileCenterY: number }[],\n  pausesBefore: number[],\n): Features {\n  const t0 = startTime ?? 0;\n  const timeMs = Math.round(Math.max(0, (endTime ?? t0) - t0));\n  const deltas: number[] = [];\n  for (let i = 1; i < clickTs.length; i++) deltas.push(Math.max(0, clickTs[i] - clickTs[i - 1]));\n  const avgDelta = mean(deltas);\n  const stdDelta = stddev(deltas);\n  const hesitations = deltas.filter((d) => d > HESITATION_THRESHOLD_MS).length;\n\n  let pathLen = 0;\n  const speeds: number[] = [];\n  const accelerations: number[] = [];\n  const angles: number[] = [];\n  let dirChanges = 0;\n  let microCorr = 0;\n\n  for (let i = 1; i < mousePath.length; i++) {\n    const d = ptDist(mousePath[i - 1], mousePath[i]);\n    pathLen += d;\n    speeds.push((d / Math.max(1, mousePath[i].t - mousePath[i - 1].t)) * 1000);\n  }\n  for (let i = 1; i < speeds.length; i++) {\n    const dt = Math.max(1, (mousePath[i + 1]?.t ?? mousePath[i].t) - mousePath[i].t || 1);\n    accelerations.push((Math.abs(speeds[i] - speeds[i - 1]) / dt) * 1000);\n  }\n  for (let i = 1; i < mousePath.length - 1; i++) {\n    const ang = angleBetween(mousePath[i - 1], mousePath[i], mousePath[i + 1]);\n    angles.push(ang);\n    if (ang > Math.PI / 6) dirChanges++;\n    if (ang > Math.PI / 4 && ptDist(mousePath[i - 1], mousePath[i]) < 15) microCorr++;\n  }\n  const angVels: number[] = [];\n  for (let i = 0; i < angles.length; i++) {\n    angVels.push((angles[i] / Math.max(1, mousePath[i + 1].t - mousePath[i].t)) * 1000);\n  }\n\n  let clickPrec = 0;\n  if (clickPos.length > 0) {\n    clickPrec = mean(clickPos.map((c) => Math.sqrt((c.x - c.tileCenterX) ** 2 + (c.y - c.tileCenterY) ** 2)));\n  }\n\n  let pathStr = 0;\n  let moveEff = 500;\n  if (clickTs.length >= 2 && mousePath.length >= 2) {\n    const ratios: number[] = [];\n    for (let c = 1; c < clickTs.length; c++) {\n      const seg = mousePath.filter((s) => s.t >= clickTs[c - 1] - 50 && s.t <= clickTs[c] + 50);\n      if (seg.length >= 2) {\n        let segLen = 0;\n        for (let j = 1; j < seg.length; j++) segLen += ptDist(seg[j - 1], seg[j]);\n        const direct = ptDist(seg[0], seg[seg.length - 1]);\n        if (segLen > 0) ratios.push(direct / segLen);\n      }\n    }\n    if (ratios.length > 0) {\n      pathStr = Math.round(mean(ratios) * 1000);\n      moveEff = Math.round((1 - mean(ratios)) * 1000);\n    }\n  } else if (mousePath.length >= 2) {\n    const dd = ptDist(mousePath[0], mousePath[mousePath.length - 1]);\n    if (pathLen > 0) {\n      pathStr = Math.round((dd / pathLen) * 1000);\n      moveEff = Math.round((1 - dd / pathLen) * 1000);\n    }\n  }\n\n  const velCon = speeds.length > 1\n    ? Math.round((1 - Math.min(1, stddev(speeds) / (mean(speeds) || 1))) * 1000)\n    : 500;\n  const cl = (n: FeatureName, v: number) => Math.round(clampVal(v, ...FEATURE_CLAMPS[n]));\n\n  return {\n    time_ms: cl(\"time_ms\", timeMs),\n    click_count: cl(\"click_count\", clickTs.length),\n    unique_tiles_clicked: cl(\"unique_tiles_clicked\", uniqueTiles.size),\n    verify_attempts: cl(\"verify_attempts\", verifyAttempts),\n    mistakes: cl(\"mistakes\", mistakes),\n    avg_click_delta_ms: cl(\"avg_click_delta_ms\", avgDelta),\n    std_click_delta_ms: cl(\"std_click_delta_ms\", stdDelta),\n    hesitations: cl(\"hesitations\", hesitations),\n    blur_count: cl(\"blur_count\", blurCount),\n    reset_count: cl(\"reset_count\", resetCount),\n    path_len_px: cl(\"path_len_px\", pathLen),\n    avg_speed: cl(\"avg_speed\", mean(speeds)),\n    speed_std: cl(\"speed_std\", stddev(speeds)),\n    avg_acceleration: cl(\"avg_acceleration\", mean(accelerations)),\n    acc_std: cl(\"acc_std\", stddev(accelerations)),\n    curvature: cl(\"curvature\", angles.reduce((a, b) => a + b, 0) * 100),\n    direction_changes: cl(\"direction_changes\", dirChanges),\n    click_precision_px: cl(\"click_precision_px\", clickPrec),\n    path_straightness: cl(\"path_straightness\", pathStr),\n    movement_efficiency: cl(\"movement_efficiency\", moveEff),\n    micro_corrections: cl(\"micro_corrections\", microCorr),\n    velocity_consistency: cl(\"velocity_consistency\", velCon),\n    pause_before_click_ms: cl(\"pause_before_click_ms\", mean(pausesBefore)),\n    angular_velocity_std: cl(\"angular_velocity_std\", stddev(angVels) * 100),\n  };\n}\n\nexport function runModel(features: Features): { score: number; label: \"HUMAN\" | \"BOT\" } {\n  const score = FEATURE_ORDER.reduce((acc, name, i) => acc + WEIGHTS[i] * features[name], BIAS);\n  return { score: Math.round(score), label: score >= THRESHOLD ? \"HUMAN\" : \"BOT\" };\n}\n\nexport function generateBotPath(\n  sx: number,\n  sy: number,\n  ex: number,\n  ey: number,\n  dur: number,\n): MouseSample[] {\n  const steps = Math.max(12, Math.round(dur / MOUSE_SAMPLE_INTERVAL_MS));\n  const path: MouseSample[] = [];\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    path.push({\n      x: sx + (ex - sx) * t + (Math.random() - 0.5) * 0.15,\n      y: sy + (ey - sy) * t + (Math.random() - 0.5) * 0.15,\n      t: i * MOUSE_SAMPLE_INTERVAL_MS,\n    });\n  }\n  return path;\n}\n\nexport function toExportJson(score: number): ExportedJson {\n  return {\n    score,\n  };\n}\n"],"names":[],"mappings":"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"}