module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},92509,(e,t,r)=>{t.exports=e.x("url",()=>require("url"))},22734,(e,t,r)=>{t.exports=e.x("fs",()=>require("fs"))},46786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},66680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},14218,e=>{"use strict";e.s(["FAUCET_ABI",0,["function claim(address caller, address recipient)","function cooldownRemaining(address wallet) view returns (uint256)"],"HUMAN_AGENT_INFT_ABI",0,["event Minted(uint256 indexed tokenId, address indexed owner, string encryptedURI, bytes32 metadataHash)","function mint(address to, string encryptedURI, bytes32 metadataHash) returns (uint256)","function ownerToTokenId(address owner) view returns (uint256)","function getEncryptedURI(uint256 tokenId) view returns (string)","function getMetadataHash(uint256 tokenId) view returns (bytes32)","function authorizeUsage(uint256 tokenId, address executor, bool allowed)","function isVerified(address wallet) view returns (bool)"]])},8068,e=>{"use strict";var t=e.i(47909),r=e.i(74017),n=e.i(96250),a=e.i(59756),s=e.i(61916),i=e.i(74677),o=e.i(69741),l=e.i(16795),d=e.i(87718),u=e.i(95169),c=e.i(47587),p=e.i(66012),h=e.i(70101),x=e.i(26937),f=e.i(10372),g=e.i(93695);e.i(52474);var v=e.i(220),R=e.i(89171),m=e.i(89383),w=e.i(29974),y=e.i(82942),E=e.i(74460),A=e.i(54799),_=e.i(14218);async function b(t){try{let r=(await e.A(23734)).createStorageClient;if(!r||!process.env.OG_STORAGE_URL)throw Error("0G storage client unavailable");let n=await r({url:process.env.OG_STORAGE_URL,apiKey:process.env.OG_STORAGE_API_KEY}),a=await n.store(t);return a.uri??`0g://${a.rootHash??"unknown"}`}catch{let e=A.default.createHash("sha256").update(t).digest("hex");return`demo://encrypted/${e}`}}let C=new Map;function T(e){return/^0x[a-fA-F0-9]{40}$/.test(e)}async function k(e){try{let t,r,n,a,s,i,o=e.headers.get("x-forwarded-for")??"local",l=Date.now(),d=C.get(o)??0;if(l-d<15e3)return R.NextResponse.json({ok:!1,error:"Rate limit: wait a few seconds."},{status:429});C.set(o,l);let{to_address:u,verificationPassed:c}=await e.json();if(!0!==c)return R.NextResponse.json({ok:!1,error:"Verification required."},{status:403});if(!T(u))return R.NextResponse.json({ok:!1,error:"Invalid wallet address."},{status:400});let p=process.env.OG_RPC_URL??"https://evmrpc-testnet.0g.ai",h=process.env.PRIVATE_KEY??"",x="0xEbf8088636FF56497130784320286a05165481e3";if(!h.startsWith("0x")||!T(x))return R.NextResponse.json({ok:!1,error:"Missing deployment env vars."},{status:500});let f=JSON.stringify({type:"human-agent",issuer:"0G Trust Studio",verified:!0,verifiedAt:l,expiresAt:l+2592e6,policy:{cooldownSec:86400},model:{name:"demo-classifier"}}),g=JSON.stringify((t=A.default.randomBytes(32),r=A.default.randomBytes(12),n=A.default.createCipheriv("aes-256-gcm",t,r),a=Buffer.concat([n.update(f,"utf8"),n.final()]),s=n.getAuthTag(),i=Buffer.from(`${process.env.DEMO_SEALING_SECRET??"demo-secret"}:${t.toString("base64")}`).toString("base64"),{algorithm:"aes-256-gcm",iv:r.toString("base64"),authTag:s.toString("base64"),ciphertext:a.toString("base64"),sealedKey:i})),v=await b(g),k=E.ethers.keccak256(E.ethers.toUtf8Bytes(f)),N=new w.JsonRpcProvider(p),S=new y.Wallet(h,N),I=new m.Contract(x,_.HUMAN_AGENT_INFT_ABI,S),O=await I.mint(u,v,k,{gasLimit:5e5}),P=await O.wait(),j=P?.logs.map(e=>{try{return I.interface.parseLog(e)}catch{return null}}).find(e=>e?.name==="Minted"),q=j?.args?.tokenId?.toString()??null;return R.NextResponse.json({ok:!0,tokenId:q,txHash:P?.hash,encryptedURI:v,metadataHash:k})}catch(t){let e=t instanceof Error?t.message:String(t);return R.NextResponse.json({ok:!1,error:e},{status:400})}}e.s(["POST",()=>k,"runtime",0,"nodejs"],744);var N=e.i(744);let S=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/mint/route",pathname:"/api/mint",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/packages/web/app/api/mint/route.ts",nextConfigOutput:"",userland:N}),{workAsyncStorage:I,workUnitAsyncStorage:O,serverHooks:P}=S;function j(){return(0,n.patchFetch)({workAsyncStorage:I,workUnitAsyncStorage:O})}async function q(e,t,n){S.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let R="/api/mint/route";R=R.replace(/\/index$/,"")||"/";let m=await S.prepare(e,t,{srcPage:R,multiZoneDraftMode:!1});if(!m)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:w,params:y,nextConfig:E,parsedUrl:A,isDraftMode:_,prerenderManifest:b,routerServerContext:C,isOnDemandRevalidate:T,revalidateOnlyGenerated:k,resolvedPathname:N,clientReferenceManifest:I,serverActionsManifest:O}=m,P=(0,o.normalizeAppPath)(R),j=!!(b.dynamicRoutes[P]||b.routes[N]),q=async()=>((null==C?void 0:C.render404)?await C.render404(e,t,A,!1):t.end("This page could not be found"),null);if(j&&!_){let e=!!b.routes[N],t=b.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await q();throw new g.NoFallbackError}}let U=null;!j||S.isDev||_||(U="/index"===(U=N)?"/":U);let H=!0===S.isDev||!j,M=j&&!H;O&&I&&(0,i.setManifestsSingleton)({page:R,clientReferenceManifest:I,serverActionsManifest:O});let D=e.method||"GET",G=(0,s.getTracer)(),F=G.getActiveScopeSpan(),$={params:y,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n,a)=>S.onRequestError(e,t,n,a,C)},sharedContext:{buildId:w}},B=new l.NodeNextRequest(e),K=new l.NodeNextResponse(t),L=d.NextRequestAdapter.fromNodeNextRequest(B,(0,d.signalFromNodeResponse)(t));try{let i=async e=>S.handle(L,$).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=G.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${D} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${D} ${R}`)}),o=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var s,l;let d=async({previousCacheEntry:r})=>{try{if(!o&&T&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(a);e.fetchMetrics=$.renderOpts.fetchMetrics;let l=$.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let d=$.renderOpts.collectedTags;if(!j)return await (0,p.sendResponse)(B,K,s,$.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(s.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==$.renderOpts.collectedRevalidate&&!($.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&$.renderOpts.collectedRevalidate,n=void 0===$.renderOpts.collectedExpire||$.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:$.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:R,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:T})},!1,C),t}},u=await S.handleResponse({req:e,nextConfig:E,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:k,responseGenerator:d,waitUntil:n.waitUntil,isMinimalMode:o});if(!j)return null;if((null==u||null==(s=u.value)?void 0:s.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",T?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),_&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return o&&j||g.delete(f.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,x.getCacheControlHeader)(u.cacheControl)),await (0,p.sendResponse)(B,K,new Response(u.value.body,{headers:g,status:u.value.status||200})),null};F?await l(F):await G.withPropagatedContext(e.headers,()=>G.trace(u.BaseServerSpan.handleRequest,{spanName:`${D} ${R}`,kind:s.SpanKind.SERVER,attributes:{"http.method":D,"http.target":e.url}},l))}catch(t){if(t instanceof g.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:T})},!1,C),j)throw t;return await (0,p.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>q,"patchFetch",()=>j,"routeModule",()=>S,"serverHooks",()=>P,"workAsyncStorage",()=>I,"workUnitAsyncStorage",()=>O],8068)},23734,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_util_be9989c7._.js","server/chunks/[root-of-the-server]__94700595._.js"].map(t=>e.l(t))).then(()=>t(31369)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cd15e3f3._.js.map