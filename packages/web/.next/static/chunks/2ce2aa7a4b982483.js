(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59002,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(22016);function r({title:e="What this does",children:r,learnMore:l,actionLink:n}){let[i,o]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:e}),(0,t.jsx)("div",{className:"mt-3 text-sm text-white/70 leading-relaxed",children:r}),n&&(0,t.jsxs)(s.default,{href:n.href,className:"mt-3 inline-block text-sm font-medium text-purple-300 hover:text-purple-200 transition",children:[n.label," →"]}),l&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>o(e=>!e),className:"text-xs font-medium text-purple-300 hover:text-purple-200 transition",children:i?"Hide details":"Learn more"}),i&&(0,t.jsx)("div",{className:"mt-2 text-sm text-white/60",children:l})]})]})}e.s(["ConceptCard",()=>r])},20544,e=>{"use strict";var t=e.i(43476);function a({nodes:e,icons:a,children:s}){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 overflow-x-auto",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90 mb-3",children:"Flow"}),e&&e.length>0?(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:e.map((s,r)=>{let l=a?.[r];return(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5 rounded-lg border border-white/20 bg-white/5 px-3 py-1.5 font-medium text-white/90",children:[l&&(0,t.jsx)("span",{className:"text-base","aria-hidden":!0,children:l}),s]}),r<e.length-1&&(0,t.jsx)("span",{className:"text-purple-400/80",children:"→"})]},r)})}):(0,t.jsx)("div",{className:"text-sm text-white/70 leading-relaxed",children:s})]})}e.s(["FlowDiagram",()=>a])},21863,29541,88333,41395,90472,e=>{"use strict";var t=e.i(43476);function a({steps:e}){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:"Add to your project"}),(0,t.jsx)("ol",{className:"mt-4 space-y-4",children:e.map(e=>(0,t.jsxs)("li",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-purple-500/30 text-xs font-semibold text-purple-200",children:e.num}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white/90",children:e.title}),e.filePath&&(0,t.jsx)("code",{className:"mt-1 block text-xs text-purple-300/90",children:e.filePath}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/60",children:e.body})]})]},e.num))})]})}e.s(["AddToProjectSteps",()=>a],21863);var s=e.i(71645);function r({title:e="Generated code",code:a,language:r="typescript"}){let[l,n]=(0,s.useState)(!1),i=(0,s.useCallback)(()=>{navigator.clipboard.writeText(a),n(!0),setTimeout(()=>n(!1),2e3)},[a]);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-2.5",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-white/70",children:e}),(0,t.jsx)("button",{type:"button",onClick:i,className:"btn-secondary rounded-lg px-3 py-1.5 text-xs font-medium",children:l?"Copied":"Copy"})]}),(0,t.jsx)("pre",{className:"overflow-x-auto p-4 text-sm text-emerald-200/90",children:(0,t.jsx)("code",{children:a})})]})}function l({title:e,fields:a}){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:e}),(0,t.jsx)("div",{className:"mt-4 space-y-4",children:a.map(e=>(0,t.jsxs)("label",{className:"block text-sm",children:[(0,t.jsx)("span",{className:"mb-1.5 block font-medium text-white/70",children:e.label}),e.helper&&(0,t.jsx)("span",{className:"mb-1.5 block text-xs text-white/50",children:e.helper}),"select"===e.type&&e.options?(0,t.jsx)("select",{value:String(e.value),onChange:t=>e.onChange(t.target.value),className:"glass-input w-full px-4 py-2.5 text-white/90 bg-[#1a1428] border border-white/10 focus:border-purple-400/50",style:{colorScheme:"dark"},children:e.options.map(e=>(0,t.jsx)("option",{value:e.value,className:"bg-[#1a1428] text-white",children:e.label},e.value))}):(0,t.jsx)("input",{type:e.type??"text",value:e.value,onChange:t=>e.onChange("number"===e.type?Number(t.target.value)||0:t.target.value),placeholder:e.placeholder,className:"glass-input w-full px-4 py-2.5 text-white/90 placeholder-white/40"})]},e.id))})]})}function n({filePath:e,description:a,code:r,insertMarker:l}){let[n,i]=(0,s.useState)(!1),o=(0,s.useCallback)(()=>{let e=l?r.replace(l,"").trim():r;navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)},[r,l]);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:"Where this goes"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/60",children:a}),(0,t.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,t.jsx)("code",{className:"rounded bg-white/10 px-2 py-1 text-xs font-mono text-purple-200",children:e})}),(0,t.jsxs)("div",{className:"mt-3 flex items-end justify-between gap-2",children:[(0,t.jsx)("pre",{className:"flex-1 overflow-x-auto rounded-lg border border-white/10 bg-black/20 p-4 text-xs text-emerald-200/90",children:(0,t.jsx)("code",{children:r})}),(0,t.jsx)("button",{type:"button",onClick:o,className:"btn-secondary shrink-0 rounded-lg px-3 py-1.5 text-xs font-medium",children:n?"Copied":"Copy"})]}),l&&(0,t.jsx)("p",{className:"mt-2 text-xs text-purple-300/90",children:"← insert here"})]})}function i({title:e="Full example",code:a}){let[r,l]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),o=(0,s.useCallback)(()=>{navigator.clipboard.writeText(a),i(!0),setTimeout(()=>i(!1),2e3)},[a]);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl overflow-hidden",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>l(e=>!e),className:"flex w-full items-center justify-between px-5 py-4 text-left transition hover:bg-white/5",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white/90",children:e}),(0,t.jsx)("span",{className:"text-purple-300 text-sm",children:r?"▼":"▶"})]}),r&&(0,t.jsxs)("div",{className:"border-t border-white/10",children:[(0,t.jsx)("div",{className:"flex items-center justify-end gap-2 px-4 py-2",children:(0,t.jsx)("button",{type:"button",onClick:o,className:"btn-secondary rounded-lg px-3 py-1.5 text-xs font-medium",children:n?"Copied":"Copy"})}),(0,t.jsx)("pre",{className:"overflow-x-auto p-4 text-xs text-emerald-200/90",children:(0,t.jsx)("code",{children:a})})]})]})}e.s(["CodeOutput",()=>r],29541),e.s(["ConfigPanel",()=>l],88333),e.s(["PlacementGuide",()=>n],41395),e.s(["WorkedExample",()=>i],90472)},99832,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(21863),r=e.i(29541),l=e.i(59002),n=e.i(88333),i=e.i(20544),o=e.i(41395),d=e.i(90472),c=e.i(22016);function p(){let[e,p]=(0,a.useState)("human-agent"),[m,x]=(0,a.useState)("encrypted"),[h,u]=(0,a.useState)("uri-hash"),[f,y]=(0,a.useState)(!0),[b,g]=(0,a.useState)("My App"),[j,N]=(0,a.useState)(30),[w,v]=(0,a.useState)(86400),S=(0,a.useMemo)(()=>({type:"human-agent",issuer:b,verified:!0,verifiedAt:"<<now>>",expiresAt:`<<now + ${24*j*36e5}>>`,policy:{cooldownSec:w},model:{name:"demo-classifier"}}),[b,j,w]),C=(0,a.useMemo)(()=>{if(f){let t="uri-hash"===h?"{ uri, metadataHash }":"{ uri, rootHash: metadataHash }";return`// lib/ogStorage.ts - storeEncryptedMetadata pattern
// Namespace: ${e}
// Store type: ${m}

import { storeEncryptedMetadata } from "@/lib/ogStorage";
import { encryptJson } from "@/lib/encrypt";
import { ethers } from "ethers";

export async function storeMetadataForMint(metadata: Record<string, unknown>) {
  const plaintext = JSON.stringify(metadata);
  const encryptedPayload = JSON.stringify(encryptJson(plaintext));
  const uri = await storeEncryptedMetadata(encryptedPayload);
  const metadataHash = ethers.keccak256(ethers.toUtf8Bytes(plaintext));
  return ${t};
}

// Metadata schema: issuer, expiryAt, policy.cooldownSec, type
// Prefill: ${JSON.stringify(S)}`}return`// lib/ogStorage.ts - public store (no encrypt)
// Namespace: ${e}

import { storeEncryptedMetadata } from "@/lib/ogStorage";
import { ethers } from "ethers";

export async function storeMetadata(metadata: Record<string, unknown>) {
  const plaintext = JSON.stringify(metadata);
  const uri = await storeEncryptedMetadata(plaintext);
  const hash = ethers.keccak256(ethers.toUtf8Bytes(plaintext));
  return { uri, hash };
}`},[e,m,h,f,S]),k=(0,a.useMemo)(()=>`// In mint API route
const metadata = {
  type: "human-agent",
  issuer: "My App",
  verified: true,
  verifiedAt: Date.now(),
  expiresAt: Date.now() + 30 * 24 * 60 * 60 * 1000,
  policy: { cooldownSec: 86400 },
};
const plaintext = JSON.stringify(metadata);
const encrypted = JSON.stringify(encryptJson(plaintext));
const encryptedURI = await storeEncryptedMetadata(encrypted);
const metadataHash = ethers.keccak256(ethers.toUtf8Bytes(plaintext));
await inft.mint(to, encryptedURI, metadataHash);`,[]);return(0,t.jsxs)("div",{className:"mx-auto max-w-3xl space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.default,{href:"/modules",className:"text-sm text-white/60 hover:text-white/90",children:"← Modules"}),(0,t.jsx)("h1",{className:"mt-2 text-2xl font-semibold",children:"Storage Builder"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/60",children:"Generate 0G storage helper code for iNFT metadata and encrypted payloads."})]}),(0,t.jsxs)(l.ConceptCard,{title:"0G Storage in the iNFT flow",actionLink:{href:"/faucet",label:"See full flow"},learnMore:(0,t.jsxs)("p",{children:["The mint API stores encrypted metadata on 0G and passes the resulting URI + hash to the iNFT contract. ",(0,t.jsx)("code",{className:"rounded bg-white/10 px-1",children:"storeEncryptedMetadata"})," uses ",(0,t.jsx)("code",{className:"rounded bg-white/10 px-1",children:"createStorageClient"})," and ",(0,t.jsx)("code",{className:"rounded bg-white/10 px-1",children:"store"})," from the 0G SDK."]}),children:["0G storage holds iNFT metadata (encrypted or public) before minting. Your mint API calls storeEncryptedMetadata with the payload, gets a URI, and passes it to ",(0,t.jsx)("code",{className:"rounded bg-white/10 px-1",children:"inft.mint"}),"."]}),(0,t.jsx)(i.FlowDiagram,{nodes:["Metadata JSON","Encrypt (optional)","storeEncryptedMetadata","URI","mint(to, uri, hash)"]}),(0,t.jsx)(n.ConfigPanel,{title:"Configure",fields:[{id:"namespace",label:"Namespace",value:e,onChange:p,placeholder:"human-agent"},{id:"storeType",label:"Store type",type:"select",value:m,onChange:x,options:[{value:"encrypted",label:"Encrypted (iNFT metadata)"},{value:"public",label:"Public"}]},{id:"returnFormat",label:"Return format",type:"select",value:h,onChange:u,options:[{value:"uri-hash",label:"{ uri, metadataHash }"},{value:"uri-rootHash",label:"{ uri, rootHash }"}]},{id:"issuer",label:"Metadata issuer",value:b,onChange:g},{id:"expiryDays",label:"Metadata expiry (days)",type:"number",value:j,onChange:N},{id:"policyCooldown",label:"Metadata policy cooldown (sec)",type:"number",value:w,onChange:v}]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"encrypt",checked:f,onChange:e=>y(e.target.checked),className:"h-4 w-4 rounded accent-purple-500"}),(0,t.jsx)("label",{htmlFor:"encrypt",className:"text-sm text-white/70",children:"Encrypt before store (recommended for iNFT metadata)"})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Generated helper"}),(0,t.jsx)(r.CodeOutput,{title:"Storage helper",code:C})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Where this goes"}),(0,t.jsx)(o.PlacementGuide,{filePath:"lib/ogStorage.ts",description:"Extend storeEncryptedMetadata or add a wrapper that builds metadata and returns uri + hash.",code:C})]}),(0,t.jsx)(s.AddToProjectSteps,{steps:[{num:1,title:"Set env",body:"OG_STORAGE_URL, OG_STORAGE_API_KEY for 0G SDK.",filePath:".env.local"},{num:2,title:"Add helper",body:"Copy storeEncryptedMetadata pattern from lib/ogStorage.",filePath:"lib/ogStorage.ts"},{num:3,title:"Use in mint flow",body:"Store metadata before minting; pass uri and metadataHash to inft.mint.",filePath:"app/api/mint/route.ts"}]}),(0,t.jsx)(d.WorkedExample,{title:"Show full example",code:k})]})}e.s(["default",()=>p])}]);