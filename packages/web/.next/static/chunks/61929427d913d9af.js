(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59002,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(22016);function l({title:e="What this does",children:l,learnMore:n,actionLink:i}){let[a,o]=(0,s.useState)(!1);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:e}),(0,t.jsx)("div",{className:"mt-3 text-sm text-white/70 leading-relaxed",children:l}),i&&(0,t.jsxs)(r.default,{href:i.href,className:"mt-3 inline-block text-sm font-medium text-purple-300 hover:text-purple-200 transition",children:[i.label," â†’"]}),n&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>o(e=>!e),className:"text-xs font-medium text-purple-300 hover:text-purple-200 transition",children:a?"Hide details":"Learn more"}),a&&(0,t.jsx)("div",{className:"mt-2 text-sm text-white/60",children:n})]})]})}e.s(["ConceptCard",()=>l])},20544,e=>{"use strict";var t=e.i(43476);function s({nodes:e,icons:s,children:r}){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 overflow-x-auto",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90 mb-3",children:"Flow"}),e&&e.length>0?(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:e.map((r,l)=>{let n=s?.[l];return(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5 rounded-lg border border-white/20 bg-white/5 px-3 py-1.5 font-medium text-white/90",children:[n&&(0,t.jsx)("span",{className:"text-base","aria-hidden":!0,children:n}),r]}),l<e.length-1&&(0,t.jsx)("span",{className:"text-purple-400/80",children:"â†’"})]},l)})}):(0,t.jsx)("div",{className:"text-sm text-white/70 leading-relaxed",children:r})]})}e.s(["FlowDiagram",()=>s])},21863,29541,88333,41395,90472,e=>{"use strict";var t=e.i(43476);function s({steps:e}){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:"Add to your project"}),(0,t.jsx)("ol",{className:"mt-4 space-y-4",children:e.map(e=>(0,t.jsxs)("li",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-purple-500/30 text-xs font-semibold text-purple-200",children:e.num}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-white/90",children:e.title}),e.filePath&&(0,t.jsx)("code",{className:"mt-1 block text-xs text-purple-300/90",children:e.filePath}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/60",children:e.body})]})]},e.num))})]})}e.s(["AddToProjectSteps",()=>s],21863);var r=e.i(71645);function l({title:e="Generated code",code:s,language:l="typescript"}){let[n,i]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>{navigator.clipboard.writeText(s),i(!0),setTimeout(()=>i(!1),2e3)},[s]);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-2.5",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-white/70",children:e}),(0,t.jsx)("button",{type:"button",onClick:a,className:"btn-secondary rounded-lg px-3 py-1.5 text-xs font-medium",children:n?"Copied":"Copy"})]}),(0,t.jsx)("pre",{className:"overflow-x-auto p-4 text-sm text-emerald-200/90",children:(0,t.jsx)("code",{children:s})})]})}function n({title:e,fields:s}){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:e}),(0,t.jsx)("div",{className:"mt-4 space-y-4",children:s.map(e=>(0,t.jsxs)("label",{className:"block text-sm",children:[(0,t.jsx)("span",{className:"mb-1.5 block font-medium text-white/70",children:e.label}),e.helper&&(0,t.jsx)("span",{className:"mb-1.5 block text-xs text-white/50",children:e.helper}),"select"===e.type&&e.options?(0,t.jsx)("select",{value:String(e.value),onChange:t=>e.onChange(t.target.value),className:"glass-input w-full px-4 py-2.5 text-white/90 bg-[#1a1428] border border-white/10 focus:border-purple-400/50",style:{colorScheme:"dark"},children:e.options.map(e=>(0,t.jsx)("option",{value:e.value,className:"bg-[#1a1428] text-white",children:e.label},e.value))}):(0,t.jsx)("input",{type:e.type??"text",value:e.value,onChange:t=>e.onChange("number"===e.type?Number(t.target.value)||0:t.target.value),placeholder:e.placeholder,className:"glass-input w-full px-4 py-2.5 text-white/90 placeholder-white/40"})]},e.id))})]})}function i({filePath:e,description:s,code:l,insertMarker:n}){let[i,a]=(0,r.useState)(!1),o=(0,r.useCallback)(()=>{let e=n?l.replace(n,"").trim():l;navigator.clipboard.writeText(e),a(!0),setTimeout(()=>a(!1),2e3)},[l,n]);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:"Where this goes"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/60",children:s}),(0,t.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,t.jsx)("code",{className:"rounded bg-white/10 px-2 py-1 text-xs font-mono text-purple-200",children:e})}),(0,t.jsxs)("div",{className:"mt-3 flex items-end justify-between gap-2",children:[(0,t.jsx)("pre",{className:"flex-1 overflow-x-auto rounded-lg border border-white/10 bg-black/20 p-4 text-xs text-emerald-200/90",children:(0,t.jsx)("code",{children:l})}),(0,t.jsx)("button",{type:"button",onClick:o,className:"btn-secondary shrink-0 rounded-lg px-3 py-1.5 text-xs font-medium",children:i?"Copied":"Copy"})]}),n&&(0,t.jsx)("p",{className:"mt-2 text-xs text-purple-300/90",children:"â† insert here"})]})}function a({title:e="Full example",code:s}){let[l,n]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),o=(0,r.useCallback)(()=>{navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)},[s]);return(0,t.jsxs)("div",{className:"glass-card rounded-2xl overflow-hidden",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>n(e=>!e),className:"flex w-full items-center justify-between px-5 py-4 text-left transition hover:bg-white/5",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white/90",children:e}),(0,t.jsx)("span",{className:"text-purple-300 text-sm",children:l?"â–¼":"â–¶"})]}),l&&(0,t.jsxs)("div",{className:"border-t border-white/10",children:[(0,t.jsx)("div",{className:"flex items-center justify-end gap-2 px-4 py-2",children:(0,t.jsx)("button",{type:"button",onClick:o,className:"btn-secondary rounded-lg px-3 py-1.5 text-xs font-medium",children:i?"Copied":"Copy"})}),(0,t.jsx)("pre",{className:"overflow-x-auto p-4 text-xs text-emerald-200/90",children:(0,t.jsx)("code",{children:s})})]})]})}e.s(["CodeOutput",()=>l],29541),e.s(["ConfigPanel",()=>n],88333),e.s(["PlacementGuide",()=>i],41395),e.s(["WorkedExample",()=>a],90472)},7815,65916,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({type:e}){switch(e){case"circle":return(0,t.jsxs)("svg",{viewBox:"0 0 48 48",className:"h-full w-full drop-shadow-sm",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("radialGradient",{id:"cg",cx:"40%",cy:"35%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#c4b5fd"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#7c3aed"})]})}),(0,t.jsx)("circle",{cx:24,cy:24,r:16,fill:"url(#cg)"}),(0,t.jsx)("circle",{cx:20,cy:19,r:4,fill:"white",opacity:.3})]});case"triangle":return(0,t.jsxs)("svg",{viewBox:"0 0 48 48",className:"h-full w-full drop-shadow-sm",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"tg",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#f0abfc"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#a855f7"})]})}),(0,t.jsx)("polygon",{points:"24,6 42,42 6,42",fill:"url(#tg)"})]});case"plus":return(0,t.jsxs)("svg",{viewBox:"0 0 48 48",className:"h-full w-full drop-shadow-sm",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"pg",x1:"0",y1:"0",x2:"1",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#67e8f9"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#06b6d4"})]})}),(0,t.jsx)("rect",{x:18,y:6,width:12,height:36,rx:3,fill:"url(#pg)"}),(0,t.jsx)("rect",{x:6,y:18,width:36,height:12,rx:3,fill:"url(#pg)"})]});case"waves":return(0,t.jsxs)("svg",{viewBox:"0 0 48 48",className:"h-full w-full drop-shadow-sm",children:[(0,t.jsx)("path",{d:"M6 16 Q14 8 24 16 Q34 24 42 16",fill:"none",stroke:"#c084fc",strokeWidth:3.5,strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M6 26 Q14 18 24 26 Q34 34 42 26",fill:"none",stroke:"#a855f7",strokeWidth:3.5,strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M6 36 Q14 28 24 36 Q34 44 42 36",fill:"none",stroke:"#7c3aed",strokeWidth:3.5,strokeLinecap:"round"})]});case"stripes":return(0,t.jsx)("svg",{viewBox:"0 0 48 48",className:"h-full w-full drop-shadow-sm",children:[10,18,26,34].map((e,s)=>(0,t.jsx)("rect",{x:6,y:e,width:36,height:4,rx:2,fill:s%2==0?"#e879f9":"#c026d3"},e))});case"star":return(0,t.jsxs)("svg",{viewBox:"0 0 48 48",className:"h-full w-full drop-shadow-sm",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"sg",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#fbbf24"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#f59e0b"})]})}),(0,t.jsx)("polygon",{points:"24,4 29,18 44,18 32,27 36,42 24,33 12,42 16,27 4,18 19,18",fill:"url(#sg)"})]})}}let l=["circle","triangle","plus","waves","stripes","star"],n=["time_ms","click_count","unique_tiles_clicked","verify_attempts","mistakes","avg_click_delta_ms","std_click_delta_ms","hesitations","blur_count","reset_count","path_len_px","avg_speed","speed_std","avg_acceleration","acc_std","curvature","direction_changes","click_precision_px","path_straightness","movement_efficiency","micro_corrections","velocity_consistency","pause_before_click_ms","angular_velocity_std"],i=[.3,-15,60,-400,-80,.8,2,200,-500,-250,.05,0,.5,0,0,0,12,-40,-5,4,40,-5,1.5,0],a=Object.fromEntries(n.map(e=>[e,0])),o={time_ms:[0,6e4],click_count:[0,500],unique_tiles_clicked:[0,16],verify_attempts:[0,50],mistakes:[0,500],avg_click_delta_ms:[0,1e4],std_click_delta_ms:[0,1e4],hesitations:[0,200],blur_count:[0,100],reset_count:[0,200],path_len_px:[0,1e5],avg_speed:[0,5e4],speed_std:[0,5e4],avg_acceleration:[0,1e5],acc_std:[0,1e5],curvature:[0,1e5],direction_changes:[0,5e3],click_precision_px:[0,200],path_straightness:[0,1e3],movement_efficiency:[0,1e3],micro_corrections:[0,2e3],velocity_consistency:[0,1e3],pause_before_click_ms:[0,1e4],angular_velocity_std:[0,5e4]};function c(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function d(e){return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}function u(e){if(e.length<2)return 0;let t=d(e);return Math.sqrt(e.reduce((e,s)=>e+(s-t)**2,0)/e.length)}function h(e){let t,s=(t=0|e,()=>{let e=Math.imul((t=t+0x6d2b79f5|0)^t>>>15,1|t);return(((e=e+Math.imul(e^e>>>7,61|e)^e)^e>>>14)>>>0)/0x100000000}),r=l[Math.floor(s()*l.length)],n=4+Math.floor(4*s()),i=Array.from({length:16},(e,t)=>t);for(let e=i.length-1;e>0;e--){let t=Math.floor(s()*(e+1));[i[e],i[t]]=[i[t],i[e]]}let a=new Set(i.slice(0,n)),o=l.filter(e=>e!==r),c=[];for(let e=0;e<16;e++)c.push(a.has(e)?r:o[Math.floor(s()*o.length)]);return{seed:e,id:`pzl_${e.toString(16).padStart(8,"0")}`,target:r,tiles:c,targetIndices:a}}function p(e,t,s,r,l,n,i,a,h,p,x){let m=i??0,f=Math.round(Math.max(0,(a??m)-m)),g=[];for(let t=1;t<e.length;t++)g.push(Math.max(0,e[t]-e[t-1]));let b=d(g),v=u(g),j=g.filter(e=>e>1200).length,w=0,y=[],N=[],_=[],k=0,C=0;for(let e=1;e<h.length;e++){let t=c(h[e-1],h[e]);w+=t,y.push(t/Math.max(1,h[e].t-h[e-1].t)*1e3)}for(let e=1;e<y.length;e++){let t=Math.max(1,(h[e+1]?.t??h[e].t)-h[e].t||1);N.push(Math.abs(y[e]-y[e-1])/t*1e3)}for(let e=1;e<h.length-1;e++){let t=function(e,t,s){let r=t.x-e.x,l=t.y-e.y,n=s.x-t.x,i=s.y-t.y;return Math.abs(Math.atan2(r*i-l*n,r*n+l*i))}(h[e-1],h[e],h[e+1]);_.push(t),t>Math.PI/6&&k++,t>Math.PI/4&&15>c(h[e-1],h[e])&&C++}let M=[];for(let e=0;e<_.length;e++)M.push(_[e]/Math.max(1,h[e+1].t-h[e].t)*1e3);let S=0;p.length>0&&(S=d(p.map(e=>Math.sqrt((e.x-e.tileCenterX)**2+(e.y-e.tileCenterY)**2))));let B=0,P=500;if(e.length>=2&&h.length>=2){let t=[];for(let s=1;s<e.length;s++){let r=h.filter(t=>t.t>=e[s-1]-50&&t.t<=e[s]+50);if(r.length>=2){let e=0;for(let t=1;t<r.length;t++)e+=c(r[t-1],r[t]);let s=c(r[0],r[r.length-1]);e>0&&t.push(s/e)}}t.length>0&&(B=Math.round(1e3*d(t)),P=Math.round((1-d(t))*1e3))}else if(h.length>=2){let e=c(h[0],h[h.length-1]);w>0&&(B=Math.round(e/w*1e3),P=Math.round((1-e/w)*1e3))}let A=y.length>1?Math.round((1-Math.min(1,u(y)/(d(y)||1)))*1e3):500,T=(e,t)=>Math.round(function(e,t,s){return Math.max(t,Math.min(s,e))}(t,...o[e]));return{time_ms:T("time_ms",f),click_count:T("click_count",e.length),unique_tiles_clicked:T("unique_tiles_clicked",t.size),verify_attempts:T("verify_attempts",s),mistakes:T("mistakes",r),avg_click_delta_ms:T("avg_click_delta_ms",b),std_click_delta_ms:T("std_click_delta_ms",v),hesitations:T("hesitations",j),blur_count:T("blur_count",l),reset_count:T("reset_count",n),path_len_px:T("path_len_px",w),avg_speed:T("avg_speed",d(y)),speed_std:T("speed_std",u(y)),avg_acceleration:T("avg_acceleration",d(N)),acc_std:T("acc_std",u(N)),curvature:T("curvature",100*_.reduce((e,t)=>e+t,0)),direction_changes:T("direction_changes",k),click_precision_px:T("click_precision_px",S),path_straightness:T("path_straightness",B),movement_efficiency:T("movement_efficiency",P),micro_corrections:T("micro_corrections",C),velocity_consistency:T("velocity_consistency",A),pause_before_click_ms:T("pause_before_click_ms",d(x)),angular_velocity_std:T("angular_velocity_std",100*u(M))}}function x(e){let t=n.reduce((t,s,r)=>t+i[r]*e[s],-1500);return{score:Math.round(t),label:t>=0?"HUMAN":"BOT"}}function m(e,t,s,r,l){let n=Math.max(12,Math.round(l/8)),i=[];for(let l=0;l<=n;l++){let a=l/n;i.push({x:e+(s-e)*a+(Math.random()-.5)*.15,y:t+(r-t)*a+(Math.random()-.5)*.15,t:8*l})}return i}function f(e){return{score:e}}function g({isOpen:e,onClose:l,onVerifiedHuman:n}){let i=function(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)"),s=()=>t(e.matches);return s(),e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[]),e}(),[o,c]=(0,s.useState)(()=>h(42)),[d,u]=(0,s.useState)(new Set),[g,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)(a),[w,y]=(0,s.useState)(0),[N,_]=(0,s.useState)("BOT"),[k,C]=(0,s.useState)(!1),[M,S]=(0,s.useState)(!1),[B,P]=(0,s.useState)(new Set),[A,T]=(0,s.useState)(new Set),[R,V]=(0,s.useState)(!1),[z,E]=(0,s.useState)(null),[L,H]=(0,s.useState)(!1),O=(0,s.useRef)([]),I=(0,s.useRef)(new Set),F=(0,s.useRef)(0),$=(0,s.useRef)(0),K=(0,s.useRef)(0),Z=(0,s.useRef)(0),W=(0,s.useRef)(null),q=(0,s.useRef)(!1),U=(0,s.useRef)([]),G=(0,s.useRef)([]),D=(0,s.useRef)([]),Y=(0,s.useRef)([]),Q=(0,s.useRef)([]),J=(0,s.useRef)(null),X=(0,s.useRef)(null),ee=(0,s.useRef)(null),et=(0,s.useRef)(()=>{}),es=(0,s.useRef)(()=>{}),er=()=>{U.current.forEach(clearTimeout),U.current=[],G.current.forEach(cancelAnimationFrame),G.current=[]};(0,s.useEffect)(()=>()=>er(),[]);let el=()=>{O.current=[],I.current=new Set,F.current=0,$.current=0,W.current=null,q.current=!1,D.current=[],Y.current=[],Q.current=[],J.current=null},en=(0,s.useCallback)(e=>{let t=p(O.current,I.current,F.current,$.current,K.current,Z.current,W.current,e,D.current,Y.current,Q.current),s=x(t);return j(t),y(s.score),_(s.label),{features:t,model:s}},[]),ei=(0,s.useCallback)(()=>{er(),H(!1),E(null),c(h(Date.now())),u(new Set),C(!1),S(!1),V(!1),P(new Set),T(new Set),Z.current+=1,el(),en(null)},[en]);(0,s.useEffect)(()=>{let e=()=>{q.current&&(K.current+=1)};return window.addEventListener("blur",e),window.addEventListener("focus",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("focus",e)}},[]),(0,s.useEffect)(()=>{if(!e)return;ei();let t=setTimeout(()=>ee.current?.focus(),40);return()=>clearTimeout(t)},[e,ei]),(0,s.useEffect)(()=>{if(!e)return;let t=e=>{if("Escape"!==e.key||g||l(),"Tab"!==e.key)return;let t=ee.current;if(!t)return;let s=Array.from(t.querySelectorAll("button,input,[tabindex]:not([tabindex='-1'])")).filter(e=>!e.hasAttribute("disabled"));if(0===s.length)return;let r=s[0],n=s[s.length-1];e.shiftKey||document.activeElement!==n?e.shiftKey&&document.activeElement===r&&(e.preventDefault(),n.focus()):(e.preventDefault(),r.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,l,g]),(0,s.useEffect)(()=>{if(!e)return;let t=X.current;if(!t||g)return;let s=e=>{if(!q.current&&null===W.current)return;let s=performance.now(),r=t.getBoundingClientRect();D.current.push({x:e.clientX-r.left,y:e.clientY-r.top,t:s}),J.current=s};return t.addEventListener("mousemove",s),()=>t.removeEventListener("mousemove",s)},[g,e]);let ea=(0,s.useCallback)(e=>{let t=X.current;if(!t)return null;let s=t.children[e];if(!s)return null;let r=t.getBoundingClientRect(),l=s.getBoundingClientRect();return{x:l.left-r.left+l.width/2,y:l.top-r.top+l.height/2}},[]),eo=(0,s.useCallback)((e,t,s)=>{if(k&&M)return;(B.size>0||A.size>0)&&(P(new Set),T(new Set));let r=performance.now();null===W.current&&(W.current=r,q.current=!0),O.current.push(r),I.current.add(e),null!==J.current&&Q.current.push(r-J.current);let l=ea(e);if(l&&void 0!==t&&void 0!==s)Y.current.push({x:t,y:s,tileCenterX:l.x,tileCenterY:l.y});else if(l){let e=5+15*Math.random(),t=Math.random()*Math.PI*2;Y.current.push({x:l.x+Math.cos(t)*e,y:l.y+Math.sin(t)*e,tileCenterX:l.x,tileCenterY:l.y})}u(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s}),en(r)},[k,M,B,A,ea,en]),ec=(0,s.useCallback)((e,t)=>{let s=X.current;if(!s)return eo(e);let r=s.getBoundingClientRect();eo(e,t.clientX-r.left,t.clientY-r.top)},[eo]),ed=(0,s.useCallback)(()=>{if(k&&M)return;V(!0);let e=setTimeout(()=>{let e=performance.now();F.current+=1;let t=new Set([...d].filter(e=>!o.targetIndices.has(e))),s=new Set([...o.targetIndices].filter(e=>!d.has(e)));if($.current+=t.size+s.size,(0!==t.size||0!==s.size)&&!g){P(t),T(s),en(e),V(!1);return}P(new Set),T(new Set),C(!0),S(!0);let{features:r,model:l}=en(e);g?_("BOT"):(_("HUMAN"),n(f(l.score),l.score)),j(r),y(l.score),V(!1)},450);U.current.push(e)},[k,M,d,o,g,n,en]);(0,s.useEffect)(()=>{et.current=eo,es.current=ed},[eo,ed]);let eu=(0,s.useCallback)(()=>{er();let e=h(Date.now());c(e),u(new Set),C(!1),S(!1),el(),Z.current=0,en(null);let t=[...e.targetIndices],s=setTimeout(()=>{H(!0);let e=X.current;if(!e)return;let s=e.getBoundingClientRect(),r=t=>{let r=e.children[t];if(!r)return{x:s.width/2,y:s.height/2};let l=r.getBoundingClientRect();return{x:l.left-s.left+l.width/2,y:l.top-s.top+l.height/2}},l=s.width/2,n=-20,i=0;W.current=performance.now(),q.current=!0,t.forEach(e=>{let t=220+60*Math.random(),s=30+30*Math.random(),a=l,o=n,c=setTimeout(()=>{let l=r(e),n=m(a,o,l.x,l.y,t),i=performance.now();n.forEach(e=>D.current.push({x:e.x,y:e.y,t:i+e.t}));let c=n[n.length-1].t,d=()=>{let e=performance.now()-i;if(e>=c)return void E({x:n[n.length-1].x,y:n[n.length-1].y});let t=Math.min(Math.floor(e/c*n.length),n.length-1);E({x:n[t].x,y:n[t].y}),G.current.push(requestAnimationFrame(d))};G.current.push(requestAnimationFrame(d));let u=setTimeout(()=>{let t=r(e),l=t.x+(Math.random()-.5)*1.5,n=t.y+(Math.random()-.5)*1.5;E({x:l,y:n}),J.current=performance.now()-s,et.current(e,l,n)},t+s);U.current.push(u)},300+i);U.current.push(c);let d=r(e);l=d.x,n=d.y,i+=t+s+180});let a=setTimeout(()=>{H(!1),es.current()},300+i+220);U.current.push(a)},120);U.current.push(s)},[en]),eh=(0,s.useCallback)(e=>{b(e),e?eu():(er(),H(!1),E(null),ei())},[ei,eu]),ep=(0,s.useMemo)(()=>B.size>0||A.size>0?"bg-red-500/80":M&&k?"HUMAN"===N?"bg-emerald-500/80":"bg-red-500/80":"bg-purple-600/65",[B,A,M,k,N]);return e?(0,t.jsx)("div",{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/62 ${i?"":"animate-[fadeIn_0.3s_ease-out]"}`,onClick:e=>{e.target!==e.currentTarget||g||l()},children:(0,t.jsxs)("div",{ref:ee,role:"dialog","aria-modal":"true",tabIndex:-1,className:`relative mx-4 w-[92vw] max-w-[420px] overflow-hidden rounded-2xl border border-white/12 bg-[#1e1033] shadow-2xl outline-none ${i?"":"animate-[zoomIn_0.3s_ease-out]"}`,children:[!g&&(0,t.jsx)("button",{type:"button",onClick:l,className:"absolute right-3 top-3 z-10 flex h-8 w-8 items-center justify-center rounded-full text-white/50 transition hover:bg-white/10 hover:text-white",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsxs)("div",{className:`px-5 pb-4 pt-5 transition-colors duration-300 ${ep}`,children:[(0,t.jsx)("p",{className:"mb-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-white/70",children:"Step 1: Prove humanity"}),B.size>0||A.size>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Try Again"}),(0,t.jsx)("p",{className:"mt-1 text-[13px] text-white/80",children:"Adjust your selection and verify again."})]}):M&&k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"HUMAN"===N?"Access Granted":"Classified as Bot"}),(0,t.jsx)("p",{className:"mt-1 text-[13px] text-white/80",children:"HUMAN"===N?`Behavioral score ${w} accepted.`:"Behavior did not meet the human threshold."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-[13px] text-white/65",children:"Select all squares with"}),(0,t.jsxs)("h2",{className:"mt-0.5 text-2xl font-bold capitalize text-white",children:[o.target,"s"]}),(0,t.jsx)("p",{className:"mt-1 text-[13px] text-white/55",children:"If there are none, click skip"})]})]}),(0,t.jsxs)("div",{className:"relative max-h-[54vh] overflow-y-auto",children:[(0,t.jsx)("div",{ref:X,className:"grid grid-cols-4 gap-[2px] bg-white/6 p-[2px]",children:o.tiles.map((e,s)=>{let l=d.has(s),n=B.has(s),i=A.has(s),a=n||i;return(0,t.jsxs)("button",{type:"button",disabled:g,onClick:e=>ec(s,e),className:`relative flex aspect-square min-h-11 items-center justify-center transition-all duration-150 ${a?"bg-red-500/20 ring-2 ring-inset ring-red-400":l?"scale-[0.92] bg-purple-500/20 ring-[3px] ring-inset ring-purple-400":"bg-white/6 hover:bg-white/14"} ${g?"cursor-not-allowed":"cursor-pointer active:scale-95"}`,children:[(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center p-2",children:(0,t.jsx)(r,{type:e})}),l&&!a&&(0,t.jsx)("div",{className:"absolute bottom-1 left-1 flex h-5 w-5 items-center justify-center rounded-full bg-purple-500 shadow",children:(0,t.jsx)("svg",{className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3.5,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),n&&(0,t.jsx)("div",{className:"absolute bottom-1 left-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 shadow",children:(0,t.jsx)("svg",{className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3.5,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),i&&(0,t.jsx)("div",{className:"absolute bottom-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500/80 shadow",children:(0,t.jsx)("span",{className:"text-[9px] font-bold text-white",children:"!"})})]},s)})}),L&&z&&(0,t.jsxs)("div",{className:"pointer-events-none absolute z-50",style:{left:z.x-4,top:z.y-4,transition:"left 0.016s linear, top 0.016s linear"},children:[(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,t.jsx)("path",{d:"M3 3L10.5 21L13 13L21 10.5L3 3Z",fill:"#ef4444",stroke:"#991b1b",strokeWidth:"1.5",strokeLinejoin:"round"})}),(0,t.jsx)("span",{className:"absolute -right-8 -top-1 rounded bg-red-600 px-1.5 py-0.5 text-[9px] font-bold text-white shadow",children:"BOT"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-white/12 bg-white/5 px-3 py-2.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:ei,className:"flex h-8 w-8 items-center justify-center rounded-full text-white/50 transition hover:bg-white/10 hover:text-white/80",title:"New challenge",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,t.jsxs)("label",{className:"flex cursor-pointer items-center gap-1.5 text-[11px] font-medium text-white/65",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-3.5 w-3.5 rounded accent-purple-500",checked:g,onChange:e=>eh(e.target.checked)}),"Bot"]})]}),(0,t.jsx)("button",{type:"button",onClick:ed,disabled:g||R,className:"btn-primary min-h-10 rounded-lg px-5 py-1.5 text-sm font-semibold",children:R?"Verifying...":"Verify Access"})]})]})}):null}e.s(["BOT_STEP_INTERVAL_MS",0,180,"INITIAL_SEED",0,42,"THRESHOLD",0,0,"ZERO_FEATURES",0,a,"computeFeatures",()=>p,"generateBotPath",()=>m,"generatePuzzle",()=>h,"runModel",()=>x,"toExportJson",()=>f],65916),e.s(["CaptchaModal",()=>g],7815)},77340,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(21863);function l(){return(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 overflow-x-auto",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90 mb-4",children:"How it works"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-white/60",children:"Tile puzzle"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 rounded-lg border border-white/20 bg-white/5 p-2",style:{width:88,height:88},children:Array.from({length:16}).map((e,s)=>(0,t.jsx)("div",{className:"rounded bg-purple-500/30 border border-white/10",style:{width:18,height:18}},s))})]}),(0,t.jsx)("span",{className:"text-purple-400/80 text-lg",children:"â†’"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-white/60",children:"Behavioral model"}),(0,t.jsxs)("div",{className:"rounded-lg border border-white/20 bg-white/5 px-3 py-2 text-center",children:[(0,t.jsx)("span",{className:"text-xs text-white/70",children:"24 features"}),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-xs text-purple-300/90",children:"path, speed, timing"})]})]}),(0,t.jsx)("span",{className:"text-purple-400/80 text-lg",children:"â†’"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-white/60",children:"Score"}),(0,t.jsx)("div",{className:"rounded-lg border border-white/20 bg-emerald-500/20 px-3 py-2",children:(0,t.jsx)("span",{className:"text-sm font-medium text-emerald-300",children:"Human / Bot"})})]}),(0,t.jsx)("span",{className:"text-purple-400/80 text-lg",children:"â†’"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-white/60",children:"ZK (optional)"}),(0,t.jsx)("div",{className:"rounded-lg border border-white/20 bg-white/5 px-3 py-2",children:(0,t.jsx)("span",{className:"text-xs text-white/70",children:"Proof"})})]})]})]})}var n=e.i(29541),i=e.i(59002),a=e.i(88333),o=e.i(20544),c=e.i(41395),d=e.i(90472),u=e.i(7815),h=e.i(65916),p=e.i(22016);function x(){let[e,x]=(0,s.useState)("dark"),[m,f]=(0,s.useState)(4),[g,b]=(0,s.useState)(!0),[v,j]=(0,s.useState)("ts"),[w,y]=(0,s.useState)("app"),[N,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[M,S]=(0,s.useState)(!1),B=(0,s.useMemo)(()=>"app"===w?"app/api/validate/route.ts":"pages"===w?"pages/api/validate.ts":"your API route for validation",[w]),P=(0,s.useMemo)(()=>{let t="ts"===v?"(payload: ExportedJson, score: number)":"(payload, score)",s="ts"===v?`
import type { ExportedJson } from "@/lib/captchaModel";`:"",r=g?`
import { generateProof, submitProofForValidation } from "@/lib/zk/prove";`:"",l=g?`  const onVerifiedHuman = async ${t} => {
    setOpen(false);
    setVerifying(true);
    try {
      const proofResult = await generateProof(score);
      if (!proofResult.success) {
        setVerifying(false);
        return;
      }
      const { ok, verified } = await submitProofForValidation(
        proofResult.proof,
        proofResult.publicSignals
      );
      setVerificationState(verified ? "verified" : "unverified");
    } finally {
      setVerifying(false);
    }
  };`:`  const onVerifiedHuman = ${t} => {
    setOpen(false);
    // handle verification (e.g. call mint API)
  };`,n=g?`
  const [verifying, setVerifying] = useState(false);
  const [verificationState, setVerificationState] = useState("unverified");`:"",i=g?" disabled={verifying}":"",a=g?'{verifying ? "Verifying..." : "Verify Access"}':'"Verify Access"',o=`import { useState } from "react";
import { CaptchaModal } from "@/components/faucet/CaptchaModal";${s}${r}`,c=4!==m?`
  // CaptchaModal uses 4x4; grid ${m}x${m} may need future support
`:"";return`${o}

export function VerifyButton() {
  const [open, setOpen] = useState(false);${n}
${c}
  ${l}

  return (
    <>
      <button onClick={() => setOpen(true)}${i}>
        ${a}
      </button>
      <div data-theme="${e}" className="contents">
        <CaptchaModal
          isOpen={open}
          onClose={() => setOpen(false)}
          onVerifiedHuman={onVerifiedHuman}
        />
      </div>
    </>
  );
}`},[e,m,g,v,w]),A=(0,s.useMemo)(()=>`// In onVerifiedHuman callback (see generated component above)
const proofResult = await generateProof(score);
if (!proofResult.success) return;
const { ok, verified } = await submitProofForValidation(
  proofResult.proof,
  proofResult.publicSignals
);
// verified === true â†’ proceed to mint/claim`,[]),T=(0,s.useMemo)(()=>g?`// Minimal page: VerifyButton + ZK + mint
"use client";
import { useState } from "react";
import { VerifyButton } from "@/components/VerifyButton";

export default function FaucetPage() {
  const [wallet] = useState("0x..."); // from useAccount etc.

  return (
    <div>
      <VerifyButton />
      {/* After verification passes, call your mint API: */}
      {/* fetch("/api/mint", { method: "POST", body: JSON.stringify({ to_address: wallet }) }); */}
    </div>
  );
}`:`// Minimal page: VerifyButton (no ZK)
"use client";
import { VerifyButton } from "@/components/VerifyButton";

export default function ProtectedPage() {
  return (
    <div>
      <VerifyButton />
      {/* onVerifiedHuman receives (payload, score) â€” use score threshold or call your API */}
    </div>
  );
}`,[g]),R=(0,s.useCallback)(()=>{let e=`// Paste into components/VerifyButton.tsx

`;navigator.clipboard.writeText(e+P),S(!0),setTimeout(()=>S(!1),2e3)},[P]),V=(0,s.useMemo)(()=>{let e=[{num:1,title:"Copy CaptchaModal",body:"Copy CaptchaModal from this repo or ensure it exists at the path below.",filePath:"components/faucet/CaptchaModal.tsx"}],t=2;return g&&(e.push({num:t++,title:"Add ZK assets",body:"Place captcha.wasm and captcha_final.zkey in public/zk/",filePath:"public/zk/"}),e.push({num:t++,title:"Add validate API route",body:"Create the /api/validate route to verify ZK proofs.",filePath:B})),e.push({num:t++,title:"Create VerifyButton",body:"Add the generated component below to your project.",filePath:"components/VerifyButton.tsx"}),e.push({num:t++,title:"Use VerifyButton",body:"Add VerifyButton to any page that requires verification before mint or claim.",filePath:"app"===w?"app/faucet/page.tsx":"pages"===w?"pages/faucet.tsx":"your-page.tsx"}),e},[g,B,w]);return(0,t.jsxs)("div",{className:"mx-auto max-w-3xl space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.default,{href:"/modules",className:"text-sm text-white/60 hover:text-white/90",children:"â† Modules"}),(0,t.jsx)("h1",{className:"mt-2 text-2xl font-semibold",children:"Captcha Builder"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/60",children:"Generate a tile-puzzle verification widget with behavioral scoring and optional ZK proof."})]}),(0,t.jsxs)(i.ConceptCard,{title:"What this captcha does",actionLink:{href:"/faucet",label:"See it in action"},learnMore:(0,t.jsx)("p",{children:"Users solve a tile puzzle; behavioral features (clicks, path, speed, etc.) are scored. Optionally, a ZK proof proves the score passed the threshold without revealing it. Your API validates the proof and mints the iNFT."}),children:[(0,t.jsx)("p",{className:"mb-2",children:"Users select tiles matching a pattern. Mouse movement and timing are analyzed to distinguish humans from bots. Optionally, a ZK proof proves the score passed without revealing it."}),(0,t.jsxs)("ul",{className:"list-inside list-disc space-y-1 text-white/70",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{className:"text-white/90",children:"Tile puzzle:"})," 4x4 grid, select matching pattern"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{className:"text-white/90",children:"Behavioral model:"})," 24 features (clicks, path, speed, etc.)"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{className:"text-white/90",children:"Human/Bot score:"})," threshold-based"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{className:"text-white/90",children:"ZK proof:"})," optional, proves score range without revealing value"]})]})]}),(0,t.jsx)(o.FlowDiagram,{nodes:["User","Tile puzzle","Behavior score","ZK proof (optional)","onVerifiedHuman(score)","Your API (mint/claim)"],icons:["ðŸ‘¤","ðŸ§©","ðŸ§ ","ðŸ”’","âœ“","ðŸš€"]}),(0,t.jsx)(l,{}),(0,t.jsxs)("section",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:"Before you start"}),(0,t.jsxs)("div",{className:"mt-3 space-y-2 text-sm text-white/70",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{className:"text-white/90",children:"Required:"})}),(0,t.jsxs)("ul",{className:"list-inside list-disc space-y-1 ml-2",children:[(0,t.jsx)("li",{children:"CaptchaModal component (copy from this repo or install from package)"}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("li",{children:["ZK assets in ",(0,t.jsx)("code",{className:"rounded bg-white/10 px-1",children:"public/zk/"}),": captcha.wasm, captcha_final.zkey"]}),(0,t.jsxs)("li",{children:["API route ",(0,t.jsx)("code",{className:"rounded bg-white/10 px-1",children:"/api/validate"})]})]})]}),(0,t.jsxs)("p",{className:"pt-2",children:[(0,t.jsx)("strong",{className:"text-white/90",children:"Optional:"})," Copy from this project or download ZK artifacts"]})]})]}),(0,t.jsx)(a.ConfigPanel,{title:"Configure your integration",fields:[{id:"language",label:"Language",type:"select",value:v,onChange:j,options:[{value:"ts",label:"TypeScript"},{value:"js",label:"JavaScript"}],helper:"Changes generated types and function signatures."},{id:"framework",label:"Framework",type:"select",value:w,onChange:y,options:[{value:"app",label:"Next.js App Router"},{value:"pages",label:"Next.js Pages"},{value:"react",label:"Plain React"}],helper:"Affects import paths and API route hints."},{id:"zk",label:"Include ZK proof flow",type:"select",value:g?"yes":"no",onChange:e=>b("yes"===e),options:[{value:"yes",label:"Yes (generateProof + submitProofForValidation)"},{value:"no",label:"No (onVerifiedHuman receives score; you decide)"}],helper:"When off: you handle verification in onVerifiedHuman. When on: snippet wires ZK."},{id:"theme",label:"Theme",type:"select",value:e,onChange:x,options:[{value:"dark",label:"Dark"},{value:"light",label:"Light"}],helper:"Passed to wrapper; CaptchaModal styling may vary."},{id:"grid",label:"Grid size",type:"number",value:m,onChange:f,helper:"CaptchaModal uses 4x4; future versions may support 3x3."}]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Generated component"}),(0,t.jsx)("button",{type:"button",onClick:R,className:"btn-primary rounded-lg px-3 py-1.5 text-sm font-medium",children:M?"Copied":"Copy all integration"})]}),(0,t.jsx)(n.CodeOutput,{title:"Copy this component",code:P}),g&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n.CodeOutput,{title:"ZK wiring (reference)",code:A})})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"mb-3 text-lg font-semibold",children:"Where this goes"}),(0,t.jsx)(c.PlacementGuide,{filePath:"components/VerifyButton.tsx",description:"Add this component to any page that needs verification before mint or claim.",code:P})]}),(0,t.jsx)(r.AddToProjectSteps,{steps:V}),(0,t.jsx)(d.WorkedExample,{title:"Show full integration example",code:T}),(0,t.jsxs)("section",{className:"glass-card rounded-2xl p-5",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white/90",children:"Try the captcha"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-white/60",children:"Solve the tile puzzle below. No ZK, no APIâ€”just the behavioral model. See your score and human/bot result."}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col items-start gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{C(null),_(!0)},className:"btn-primary rounded-lg px-4 py-2 text-sm font-medium",children:"Open captcha demo"}),k&&(0,t.jsx)("div",{className:`rounded-lg border px-4 py-3 ${k.isHuman?"border-emerald-500/40 bg-emerald-500/10":"border-amber-500/40 bg-amber-500/10"}`,children:(0,t.jsxs)("span",{className:"text-sm font-medium text-white/90",children:["Score: ",k.score.toFixed(2)," â€” ",k.isHuman?"Human":"Bot"]})})]}),(0,t.jsx)(u.CaptchaModal,{isOpen:N,onClose:()=>_(!1),onVerifiedHuman:(e,t)=>{C({score:t,isHuman:t>h.THRESHOLD}),_(!1)}})]})]})}e.s(["default",()=>x],77340)}]);